(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function US(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Wf={exports:{}},Ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function jS(){if(g0)return Ml;g0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Ml.Fragment=e,Ml.jsx=n,Ml.jsxs=n,Ml}var p0;function zS(){return p0||(p0=1,Wf.exports=jS()),Wf.exports}var x=zS(),em={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function BS(){if(y0)return Ce;y0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),_=Symbol.iterator;function S(k){return k===null||typeof k!="object"?null:(k=_&&k[_]||k["@@iterator"],typeof k=="function"?k:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,K={};function O(k,te,oe){this.props=k,this.context=te,this.refs=K,this.updater=oe||D}O.prototype.isReactComponent={},O.prototype.setState=function(k,te){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,te,"setState")},O.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function Z(){}Z.prototype=O.prototype;function re(k,te,oe){this.props=k,this.context=te,this.refs=K,this.updater=oe||D}var $=re.prototype=new Z;$.constructor=re,F($,O.prototype),$.isPureReactComponent=!0;var le=Array.isArray,se={H:null,A:null,T:null,S:null,V:null},ce=Object.prototype.hasOwnProperty;function N(k,te,oe,ie,me,Ae){return oe=Ae.ref,{$$typeof:r,type:k,key:te,ref:oe!==void 0?oe:null,props:Ae}}function A(k,te){return N(k.type,te,void 0,void 0,void 0,k.props)}function R(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function M(k){var te={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(oe){return te[oe]})}var V=/\/+/g;function L(k,te){return typeof k=="object"&&k!==null&&k.key!=null?M(""+k.key):te.toString(36)}function I(){}function We(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(I,I):(k.status="pending",k.then(function(te){k.status==="pending"&&(k.status="fulfilled",k.value=te)},function(te){k.status==="pending"&&(k.status="rejected",k.reason=te)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function et(k,te,oe,ie,me){var Ae=typeof k;(Ae==="undefined"||Ae==="boolean")&&(k=null);var pe=!1;if(k===null)pe=!0;else switch(Ae){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(k.$$typeof){case r:case e:pe=!0;break;case E:return pe=k._init,et(pe(k._payload),te,oe,ie,me)}}if(pe)return me=me(k),pe=ie===""?"."+L(k,0):ie,le(me)?(oe="",pe!=null&&(oe=pe.replace(V,"$&/")+"/"),et(me,te,oe,"",function(Rt){return Rt})):me!=null&&(R(me)&&(me=A(me,oe+(me.key==null||k&&k.key===me.key?"":(""+me.key).replace(V,"$&/")+"/")+pe)),te.push(me)),1;pe=0;var mt=ie===""?".":ie+":";if(le(k))for(var je=0;je<k.length;je++)ie=k[je],Ae=mt+L(ie,je),pe+=et(ie,te,oe,Ae,me);else if(je=S(k),typeof je=="function")for(k=je.call(k),je=0;!(ie=k.next()).done;)ie=ie.value,Ae=mt+L(ie,je++),pe+=et(ie,te,oe,Ae,me);else if(Ae==="object"){if(typeof k.then=="function")return et(We(k),te,oe,ie,me);throw te=String(k),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return pe}function Q(k,te,oe){if(k==null)return k;var ie=[],me=0;return et(k,ie,"","",function(Ae){return te.call(oe,Ae,me++)}),ie}function ae(k){if(k._status===-1){var te=k._result;te=te(),te.then(function(oe){(k._status===0||k._status===-1)&&(k._status=1,k._result=oe)},function(oe){(k._status===0||k._status===-1)&&(k._status=2,k._result=oe)}),k._status===-1&&(k._status=0,k._result=te)}if(k._status===1)return k._result.default;throw k._result}var ge=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function Ie(){}return Ce.Children={map:Q,forEach:function(k,te,oe){Q(k,function(){te.apply(this,arguments)},oe)},count:function(k){var te=0;return Q(k,function(){te++}),te},toArray:function(k){return Q(k,function(te){return te})||[]},only:function(k){if(!R(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Ce.Component=O,Ce.Fragment=n,Ce.Profiler=o,Ce.PureComponent=re,Ce.StrictMode=s,Ce.Suspense=g,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(k){return se.H.useMemoCache(k)}},Ce.cache=function(k){return function(){return k.apply(null,arguments)}},Ce.cloneElement=function(k,te,oe){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ie=F({},k.props),me=k.key,Ae=void 0;if(te!=null)for(pe in te.ref!==void 0&&(Ae=void 0),te.key!==void 0&&(me=""+te.key),te)!ce.call(te,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&te.ref===void 0||(ie[pe]=te[pe]);var pe=arguments.length-2;if(pe===1)ie.children=oe;else if(1<pe){for(var mt=Array(pe),je=0;je<pe;je++)mt[je]=arguments[je+2];ie.children=mt}return N(k.type,me,void 0,void 0,Ae,ie)},Ce.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},Ce.createElement=function(k,te,oe){var ie,me={},Ae=null;if(te!=null)for(ie in te.key!==void 0&&(Ae=""+te.key),te)ce.call(te,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(me[ie]=te[ie]);var pe=arguments.length-2;if(pe===1)me.children=oe;else if(1<pe){for(var mt=Array(pe),je=0;je<pe;je++)mt[je]=arguments[je+2];me.children=mt}if(k&&k.defaultProps)for(ie in pe=k.defaultProps,pe)me[ie]===void 0&&(me[ie]=pe[ie]);return N(k,Ae,void 0,void 0,null,me)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(k){return{$$typeof:m,render:k}},Ce.isValidElement=R,Ce.lazy=function(k){return{$$typeof:E,_payload:{_status:-1,_result:k},_init:ae}},Ce.memo=function(k,te){return{$$typeof:y,type:k,compare:te===void 0?null:te}},Ce.startTransition=function(k){var te=se.T,oe={};se.T=oe;try{var ie=k(),me=se.S;me!==null&&me(oe,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(Ie,ge)}catch(Ae){ge(Ae)}finally{se.T=te}},Ce.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},Ce.use=function(k){return se.H.use(k)},Ce.useActionState=function(k,te,oe){return se.H.useActionState(k,te,oe)},Ce.useCallback=function(k,te){return se.H.useCallback(k,te)},Ce.useContext=function(k){return se.H.useContext(k)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(k,te){return se.H.useDeferredValue(k,te)},Ce.useEffect=function(k,te,oe){var ie=se.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(k,te)},Ce.useId=function(){return se.H.useId()},Ce.useImperativeHandle=function(k,te,oe){return se.H.useImperativeHandle(k,te,oe)},Ce.useInsertionEffect=function(k,te){return se.H.useInsertionEffect(k,te)},Ce.useLayoutEffect=function(k,te){return se.H.useLayoutEffect(k,te)},Ce.useMemo=function(k,te){return se.H.useMemo(k,te)},Ce.useOptimistic=function(k,te){return se.H.useOptimistic(k,te)},Ce.useReducer=function(k,te,oe){return se.H.useReducer(k,te,oe)},Ce.useRef=function(k){return se.H.useRef(k)},Ce.useState=function(k){return se.H.useState(k)},Ce.useSyncExternalStore=function(k,te,oe){return se.H.useSyncExternalStore(k,te,oe)},Ce.useTransition=function(){return se.H.useTransition()},Ce.version="19.1.0",Ce}var v0;function Zm(){return v0||(v0=1,em.exports=BS()),em.exports}var q=Zm();const dn=US(q);var tm={exports:{}},Vl={},nm={exports:{}},rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0;function FS(){return _0||(_0=1,function(r){function e(Q,ae){var ge=Q.length;Q.push(ae);e:for(;0<ge;){var Ie=ge-1>>>1,k=Q[Ie];if(0<o(k,ae))Q[Ie]=ae,Q[ge]=k,ge=Ie;else break e}}function n(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var ae=Q[0],ge=Q.pop();if(ge!==ae){Q[0]=ge;e:for(var Ie=0,k=Q.length,te=k>>>1;Ie<te;){var oe=2*(Ie+1)-1,ie=Q[oe],me=oe+1,Ae=Q[me];if(0>o(ie,ge))me<k&&0>o(Ae,ie)?(Q[Ie]=Ae,Q[me]=ge,Ie=me):(Q[Ie]=ie,Q[oe]=ge,Ie=oe);else if(me<k&&0>o(Ae,ge))Q[Ie]=Ae,Q[me]=ge,Ie=me;else break e}}return ae}function o(Q,ae){var ge=Q.sortIndex-ae.sortIndex;return ge!==0?ge:Q.id-ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var g=[],y=[],E=1,_=null,S=3,D=!1,F=!1,K=!1,O=!1,Z=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function le(Q){for(var ae=n(y);ae!==null;){if(ae.callback===null)s(y);else if(ae.startTime<=Q)s(y),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=n(y)}}function se(Q){if(K=!1,le(Q),!F)if(n(g)!==null)F=!0,ce||(ce=!0,L());else{var ae=n(y);ae!==null&&et(se,ae.startTime-Q)}}var ce=!1,N=-1,A=5,R=-1;function M(){return O?!0:!(r.unstable_now()-R<A)}function V(){if(O=!1,ce){var Q=r.unstable_now();R=Q;var ae=!0;try{e:{F=!1,K&&(K=!1,re(N),N=-1),D=!0;var ge=S;try{t:{for(le(Q),_=n(g);_!==null&&!(_.expirationTime>Q&&M());){var Ie=_.callback;if(typeof Ie=="function"){_.callback=null,S=_.priorityLevel;var k=Ie(_.expirationTime<=Q);if(Q=r.unstable_now(),typeof k=="function"){_.callback=k,le(Q),ae=!0;break t}_===n(g)&&s(g),le(Q)}else s(g);_=n(g)}if(_!==null)ae=!0;else{var te=n(y);te!==null&&et(se,te.startTime-Q),ae=!1}}break e}finally{_=null,S=ge,D=!1}ae=void 0}}finally{ae?L():ce=!1}}}var L;if(typeof $=="function")L=function(){$(V)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,We=I.port2;I.port1.onmessage=V,L=function(){We.postMessage(null)}}else L=function(){Z(V,0)};function et(Q,ae){N=Z(function(){Q(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var ge=S;S=ae;try{return Q()}finally{S=ge}},r.unstable_requestPaint=function(){O=!0},r.unstable_runWithPriority=function(Q,ae){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ge=S;S=Q;try{return ae()}finally{S=ge}},r.unstable_scheduleCallback=function(Q,ae,ge){var Ie=r.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Ie+ge:Ie):ge=Ie,Q){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=ge+k,Q={id:E++,callback:ae,priorityLevel:Q,startTime:ge,expirationTime:k,sortIndex:-1},ge>Ie?(Q.sortIndex=ge,e(y,Q),n(g)===null&&Q===n(y)&&(K?(re(N),N=-1):K=!0,et(se,ge-Ie))):(Q.sortIndex=k,e(g,Q),F||D||(F=!0,ce||(ce=!0,L()))),Q},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(Q){var ae=S;return function(){var ge=S;S=ae;try{return Q.apply(this,arguments)}finally{S=ge}}}}(rm)),rm}var b0;function qS(){return b0||(b0=1,nm.exports=FS()),nm.exports}var im={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0;function HS(){if(E0)return un;E0=1;var r=Zm();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,E){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:g,containerInfo:y,implementation:E}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,un.createPortal=function(g,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,E)},un.flushSync=function(g){var y=d.T,E=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=E,s.d.f()}},un.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},un.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},un.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var E=y.as,_=m(E,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,D=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:D}):E==="script"&&s.d.X(g,{crossOrigin:_,integrity:S,fetchPriority:D,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},un.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=m(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},un.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,_=m(E,y.crossOrigin);s.d.L(g,E,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},un.preloadModule=function(g,y){if(typeof g=="string")if(y){var E=m(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},un.requestFormReset=function(g){s.d.r(g)},un.unstable_batchedUpdates=function(g,y){return g(y)},un.useFormState=function(g,y,E){return d.H.useFormState(g,y,E)},un.useFormStatus=function(){return d.H.useHostTransitionStatus()},un.version="19.1.0",un}var T0;function pb(){if(T0)return im.exports;T0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),im.exports=HS(),im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0;function GS(){if(S0)return Vl;S0=1;var r=qS(),e=Zm(),n=pb();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function g(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var b=!1,T=h.child;T;){if(T===a){b=!0,a=h,l=f;break}if(T===l){b=!0,l=h,a=f;break}T=T.sibling}if(!b){for(T=f.child;T;){if(T===a){b=!0,a=f,l=h;break}if(T===l){b=!0,l=f,a=h;break}T=T.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var E=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),re=Symbol.for("react.consumer"),$=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function We(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case O:return"Profiler";case K:return"StrictMode";case se:return"Suspense";case ce:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case D:return"Portal";case $:return(t.displayName||"Context")+".Provider";case re:return(t._context.displayName||"Context")+".Consumer";case le:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return i=t.displayName||null,i!==null?i:We(t.type)||"Memo";case A:i=t._payload,t=t._init;try{return We(t(i))}catch{}}return null}var et=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Ie=[],k=-1;function te(t){return{current:t}}function oe(t){0>k||(t.current=Ie[k],Ie[k]=null,k--)}function ie(t,i){k++,Ie[k]=t.current,t.current=i}var me=te(null),Ae=te(null),pe=te(null),mt=te(null);function je(t,i){switch(ie(pe,i),ie(Ae,t),ie(me,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?qv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=qv(i),t=Hv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(me),ie(me,t)}function Rt(){oe(me),oe(Ae),oe(pe)}function ke(t){t.memoizedState!==null&&ie(mt,t);var i=me.current,a=Hv(i,t.type);i!==a&&(ie(Ae,t),ie(me,a))}function gn(t){Ae.current===t&&(oe(me),oe(Ae)),mt.current===t&&(oe(mt),Cl._currentValue=ge)}var qt=Object.prototype.hasOwnProperty,wn=r.unstable_scheduleCallback,Zt=r.unstable_cancelCallback,zn=r.unstable_shouldYield,rr=r.unstable_requestPaint,pn=r.unstable_now,ga=r.unstable_getCurrentPriorityLevel,Hr=r.unstable_ImmediatePriority,yn=r.unstable_UserBlockingPriority,Bn=r.unstable_NormalPriority,Di=r.unstable_LowPriority,Gr=r.unstable_IdlePriority,Ni=r.log,pa=r.unstable_setDisableYieldValue,ct=null,Pe=null;function xt(t){if(typeof Ni=="function"&&pa(t),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(ct,t)}catch{}}var yt=Math.clz32?Math.clz32:vr,As=Math.log,Fn=Math.LN2;function vr(t){return t>>>=0,t===0?32:31-(As(t)/Fn|0)|0}var Kr=256,Yr=4194304;function vn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Qr(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=vn(l):(b&=T,b!==0?h=vn(b):a||(a=T&~t,a!==0&&(h=vn(a))))):(T=l&~f,T!==0?h=vn(T):b!==0?h=vn(b):a||(a=l&~t,a!==0&&(h=vn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function Xr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Oi(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rs(){var t=Kr;return Kr<<=1,(Kr&4194048)===0&&(Kr=256),t}function xs(){var t=Yr;return Yr<<=1,(Yr&62914560)===0&&(Yr=4194304),t}function ir(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function ot(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Mt(t,i,a,l,h,f){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,C=t.expirationTimes,B=t.hiddenUpdates;for(a=b&~a;0<a;){var X=31-yt(a),W=1<<X;T[X]=0,C[X]=-1;var H=B[X];if(H!==null)for(B[X]=null,X=0;X<H.length;X++){var G=H[X];G!==null&&(G.lane&=-536870913)}a&=~W}l!==0&&ht(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(b&~i))}function ht(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-yt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function An(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-yt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Et(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function It(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Vt(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:u0(t.type))}function sr(t,i){var a=ae.p;try{return ae.p=t,i()}finally{ae.p=a}}var xe=Math.random().toString(36).slice(2),tt="__reactFiber$"+xe,Ge="__reactProps$"+xe,vt="__reactContainer$"+xe,ar="__reactEvents$"+xe,$r="__reactListeners$"+xe,Jt="__reactHandles$"+xe,_r="__reactResources$"+xe,or="__reactMarker$"+xe;function ki(t){delete t[tt],delete t[Ge],delete t[ar],delete t[$r],delete t[Jt]}function Zr(t){var i=t[tt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[vt]||a[tt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Qv(t);t!==null;){if(a=t[tt])return a;t=Qv(t)}return i}t=a,a=t.parentNode}return null}function br(t){if(t=t[tt]||t[vt]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Er(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function _n(t){var i=t[_r];return i||(i=t[_r]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Tt(t){t[or]=!0}var Vo=new Set,ya={};function lr(t,i){Jr(t,i),Jr(t+"Capture",i)}function Jr(t,i){for(ya[t]=i,t=0;t<i.length;t++)Vo.add(i[t])}var Ru=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xu={},Is={};function Iu(t){return qt.call(Is,t)?!0:qt.call(xu,t)?!1:Ru.test(t)?Is[t]=!0:(xu[t]=!0,!1)}function Mi(t,i,a){if(Iu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Tr(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Wt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var Cs,Cu;function Wr(t){if(Cs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Cs=i&&i[1]||"",Cu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cs+t+Cu}var va=!1;function _a(t,i){if(!t||va)return"";va=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(G){var H=G}Reflect.construct(t,[],W)}else{try{W.call()}catch(G){H=G}t.call(W.prototype)}}else{try{throw Error()}catch(G){H=G}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],T=f[1];if(b&&T){var C=b.split(`
`),B=T.split(`
`);for(h=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===C.length||h===B.length)for(l=C.length-1,h=B.length-1;1<=l&&0<=h&&C[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(C[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||C[l]!==B[h]){var X=`
`+C[l].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=l&&0<=h);break}}}finally{va=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Wr(a):""}function Po(t){switch(t.tag){case 26:case 27:case 5:return Wr(t.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 15:return _a(t.type,!1);case 11:return _a(t.type.render,!1);case 1:return _a(t.type,!0);case 31:return Wr("Activity");default:return""}}function ba(t){try{var i="";do i+=Po(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function bn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function nd(t){var i=Lo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,f.call(this,b)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ea(t){t._valueTracker||(t._valueTracker=nd(t))}function Uo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Lo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Ds(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var rd=/[\n"\\]/g;function Ct(t){return t.replace(rd,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function On(t,i,a,l,h,f,b,T){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),i!=null?b==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+bn(i)):t.value!==""+bn(i)&&(t.value=""+bn(i)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),i!=null?Vi(t,b,bn(i)):a!=null?Vi(t,b,bn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+bn(T):t.removeAttribute("name")}function Ns(t,i,a,l,h,f,b,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+bn(a):"",i=i!=null?""+bn(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function Vi(t,i,a){i==="number"&&Ds(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ei(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+bn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function nt(t,i,a){if(i!=null&&(i=""+bn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+bn(a):""}function Os(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(et(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=bn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function qn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ks=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Du(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||ks.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function jo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Du(t,h,l)}else for(var f in i)i.hasOwnProperty(f)&&Du(t,f,i[f])}function zo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ta(t){return sd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ti=null;function Hn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ni=null,ri=null;function Bo(t){var i=br(t);if(i&&(t=i.stateNode)){var a=t[Ge]||null;e:switch(t=i.stateNode,i.type){case"input":if(On(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ct(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Ge]||null;if(!h)throw Error(s(90));On(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Uo(l)}break e;case"textarea":nt(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&ei(t,!!a.multiple,i,!1)}}}var Sr=!1;function Nu(t,i,a){if(Sr)return t(i,a);Sr=!0;try{var l=t(i);return l}finally{if(Sr=!1,(ni!==null||ri!==null)&&(wc(),ni&&(i=ni,t=ri,ri=ni=null,Bo(i),t)))for(i=0;i<t.length;i++)Bo(t[i])}}function Ms(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Ge]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(ur)try{var Vs={};Object.defineProperty(Vs,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",Vs,Vs),window.removeEventListener("test",Vs,Vs)}catch{Gn=!1}var wr=null,Pi=null,ii=null;function Fo(){if(ii)return ii;var t,i=Pi,a=i.length,l,h="value"in wr?wr.value:wr.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var b=a-t;for(l=1;l<=b&&i[a-l]===h[f-l];l++);return ii=h.slice(t,1<l?1-l:void 0)}function Ar(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Rr(){return!0}function qo(){return!1}function Ht(t){function i(a,l,h,f,b){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Rr:qo,this.isPropagationStopped=qo,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),i}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sa=Ht(Qe),Ps=E({},Qe,{view:0,detail:0}),Ou=Ht(Ps),wa,Aa,xr,Ls=E({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xr&&(xr&&t.type==="mousemove"?(wa=t.screenX-xr.screenX,Aa=t.screenY-xr.screenY):Aa=wa=0,xr=t),wa)},movementY:function(t){return"movementY"in t?t.movementY:Aa}}),Kn=Ht(Ls),ku=E({},Ls,{dataTransfer:0}),ad=Ht(ku),Us=E({},Ps,{relatedTarget:0}),Ra=Ht(Us),Ho=E({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),xa=Ht(Ho),Mu=E({},Qe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ia=Ht(Mu),od=E({},Qe,{data:0}),Go=Ht(od),js={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ko(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Pu[t])?!!i[t]:!1}function zs(){return Ko}var Lu=E({},Ps,{key:function(t){if(t.key){var i=js[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ar(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zs,charCode:function(t){return t.type==="keypress"?Ar(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ar(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ca=Ht(Lu),Uu=E({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yo=Ht(Uu),si=E({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zs}),ju=Ht(si),zu=E({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bu=Ht(zu),Fu=E({},Ls,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Da=Ht(Fu),En=E({},Qe,{newState:0,oldState:0}),qu=Ht(En),Hu=[9,13,27,32],Ir=ur&&"CompositionEvent"in window,c=null;ur&&"documentMode"in document&&(c=document.documentMode);var p=ur&&"TextEvent"in window&&!c,v=ur&&(!Ir||c&&8<c&&11>=c),w=" ",j=!1;function Y(t,i){switch(t){case"keyup":return Hu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ze=!1;function Pt(t,i){switch(t){case"compositionend":return ue(i);case"keypress":return i.which!==32?null:(j=!0,w);case"textInput":return t=i.data,t===w&&j?null:t;default:return null}}function Be(t,i){if(ze)return t==="compositionend"||!Ir&&Y(t,i)?(t=Fo(),ii=Pi=wr=null,ze=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Gt[t.type]:i==="textarea"}function ai(t,i,a,l){ni?ri?ri.push(l):ri=[l]:ni=l,i=Dc(i,"onChange"),0<i.length&&(a=new Sa("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var en=null,Cr=null;function Qo(t){Uv(t,0)}function Gu(t){var i=Er(t);if(Uo(i))return t}function sp(t,i){if(t==="change")return i}var ap=!1;if(ur){var ld;if(ur){var ud="oninput"in document;if(!ud){var op=document.createElement("div");op.setAttribute("oninput","return;"),ud=typeof op.oninput=="function"}ld=ud}else ld=!1;ap=ld&&(!document.documentMode||9<document.documentMode)}function lp(){en&&(en.detachEvent("onpropertychange",up),Cr=en=null)}function up(t){if(t.propertyName==="value"&&Gu(Cr)){var i=[];ai(i,Cr,t,Hn(t)),Nu(Qo,i)}}function m1(t,i,a){t==="focusin"?(lp(),en=i,Cr=a,en.attachEvent("onpropertychange",up)):t==="focusout"&&lp()}function g1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gu(Cr)}function p1(t,i){if(t==="click")return Gu(i)}function y1(t,i){if(t==="input"||t==="change")return Gu(i)}function v1(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var kn=typeof Object.is=="function"?Object.is:v1;function Xo(t,i){if(kn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!qt.call(i,h)||!kn(t[h],i[h]))return!1}return!0}function cp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hp(t,i){var a=cp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=cp(a)}}function dp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?dp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function fp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ds(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ds(t.document)}return i}function cd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var _1=ur&&"documentMode"in document&&11>=document.documentMode,Na=null,hd=null,$o=null,dd=!1;function mp(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;dd||Na==null||Na!==Ds(l)||(l=Na,"selectionStart"in l&&cd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),$o&&Xo($o,l)||($o=l,l=Dc(hd,"onSelect"),0<l.length&&(i=new Sa("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Na)))}function Bs(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Oa={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},fd={},gp={};ur&&(gp=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function Fs(t){if(fd[t])return fd[t];if(!Oa[t])return t;var i=Oa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in gp)return fd[t]=i[a];return t}var pp=Fs("animationend"),yp=Fs("animationiteration"),vp=Fs("animationstart"),b1=Fs("transitionrun"),E1=Fs("transitionstart"),T1=Fs("transitioncancel"),_p=Fs("transitionend"),bp=new Map,md="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");md.push("scrollEnd");function cr(t,i){bp.set(t,i),lr(i,[t])}var Ep=new WeakMap;function Yn(t,i){if(typeof t=="object"&&t!==null){var a=Ep.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ba(i)},Ep.set(t,i),i)}return{value:t,source:i,stack:ba(i)}}var Qn=[],ka=0,gd=0;function Ku(){for(var t=ka,i=gd=ka=0;i<t;){var a=Qn[i];Qn[i++]=null;var l=Qn[i];Qn[i++]=null;var h=Qn[i];Qn[i++]=null;var f=Qn[i];if(Qn[i++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}f!==0&&Tp(a,h,f)}}function Yu(t,i,a,l){Qn[ka++]=t,Qn[ka++]=i,Qn[ka++]=a,Qn[ka++]=l,gd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function pd(t,i,a,l){return Yu(t,i,a,l),Qu(t)}function Ma(t,i){return Yu(t,null,null,i),Qu(t)}function Tp(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-yt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),f):null}function Qu(t){if(50<El)throw El=0,Sf=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Va={};function S1(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,i,a,l){return new S1(t,i,a,l)}function yd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oi(t,i){var a=t.alternate;return a===null?(a=Mn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Sp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Xu(t,i,a,l,h,f){var b=0;if(l=t,typeof t=="function")yd(t)&&(b=1);else if(typeof t=="string")b=AS(t,a,me.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Mn(31,a,i,h),t.elementType=R,t.lanes=f,t;case F:return qs(a.children,h,f,i);case K:b=8,h|=24;break;case O:return t=Mn(12,a,i,h|2),t.elementType=O,t.lanes=f,t;case se:return t=Mn(13,a,i,h),t.elementType=se,t.lanes=f,t;case ce:return t=Mn(19,a,i,h),t.elementType=ce,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:case $:b=10;break e;case re:b=9;break e;case le:b=11;break e;case N:b=14;break e;case A:b=16,l=null;break e}b=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Mn(b,a,i,h),i.elementType=t,i.type=l,i.lanes=f,i}function qs(t,i,a,l){return t=Mn(7,t,l,i),t.lanes=a,t}function vd(t,i,a){return t=Mn(6,t,null,i),t.lanes=a,t}function _d(t,i,a){return i=Mn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Pa=[],La=0,$u=null,Zu=0,Xn=[],$n=0,Hs=null,li=1,ui="";function Gs(t,i){Pa[La++]=Zu,Pa[La++]=$u,$u=t,Zu=i}function wp(t,i,a){Xn[$n++]=li,Xn[$n++]=ui,Xn[$n++]=Hs,Hs=t;var l=li;t=ui;var h=32-yt(l)-1;l&=~(1<<h),a+=1;var f=32-yt(i)+h;if(30<f){var b=h-h%5;f=(l&(1<<b)-1).toString(32),l>>=b,h-=b,li=1<<32-yt(i)+h|a<<h|l,ui=f+t}else li=1<<f|a<<h|l,ui=t}function bd(t){t.return!==null&&(Gs(t,1),wp(t,1,0))}function Ed(t){for(;t===$u;)$u=Pa[--La],Pa[La]=null,Zu=Pa[--La],Pa[La]=null;for(;t===Hs;)Hs=Xn[--$n],Xn[$n]=null,ui=Xn[--$n],Xn[$n]=null,li=Xn[--$n],Xn[$n]=null}var Tn=null,_t=null,Ke=!1,Ks=null,Dr=!1,Td=Error(s(519));function Ys(t){var i=Error(s(418,""));throw Wo(Yn(i,t)),Td}function Ap(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[tt]=t,i[Ge]=l,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<Sl.length;a++)Ve(Sl[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),Ns(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ea(i);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),Os(i,l.value,l.defaultValue,l.children),Ea(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Fv(i.textContent,a)?(l.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),l.onScroll!=null&&Ve("scroll",i),l.onScrollEnd!=null&&Ve("scrollend",i),l.onClick!=null&&(i.onclick=Nc),i=!0):i=!1,i||Ys(t)}function Rp(t){for(Tn=t.return;Tn;)switch(Tn.tag){case 5:case 13:Dr=!1;return;case 27:case 3:Dr=!0;return;default:Tn=Tn.return}}function Zo(t){if(t!==Tn)return!1;if(!Ke)return Rp(t),Ke=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||jf(t.type,t.memoizedProps)),a=!a),a&&_t&&Ys(t),Rp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){_t=dr(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}_t=null}}else i===27?(i=_t,Ji(t.type)?(t=qf,qf=null,_t=t):_t=i):_t=Tn?dr(t.stateNode.nextSibling):null;return!0}function Jo(){_t=Tn=null,Ke=!1}function xp(){var t=Ks;return t!==null&&(In===null?In=t:In.push.apply(In,t),Ks=null),t}function Wo(t){Ks===null?Ks=[t]:Ks.push(t)}var Sd=te(null),Qs=null,ci=null;function Li(t,i,a){ie(Sd,i._currentValue),i._currentValue=a}function hi(t){t._currentValue=Sd.current,oe(Sd)}function wd(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Ad(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var b=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var C=0;C<i.length;C++)if(T.context===i[C]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),wd(f.return,a,t),l||(b=null);break e}f=T.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(s(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),wd(b,a,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function el(t,i,a,l){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var T=h.type;kn(h.pendingProps.value,b.value)||(t!==null?t.push(T):t=[T])}}else if(h===mt.current){if(b=h.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Cl):t=[Cl])}h=h.return}t!==null&&Ad(i,t,a,l),i.flags|=262144}function Ju(t){for(t=t.firstContext;t!==null;){if(!kn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Xs(t){Qs=t,ci=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ln(t){return Ip(Qs,t)}function Wu(t,i){return Qs===null&&Xs(t),Ip(t,i)}function Ip(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ci===null){if(t===null)throw Error(s(308));ci=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else ci=ci.next=i;return a}var w1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},A1=r.unstable_scheduleCallback,R1=r.unstable_NormalPriority,Ut={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rd(){return{controller:new w1,data:new Map,refCount:0}}function tl(t){t.refCount--,t.refCount===0&&A1(R1,function(){t.controller.abort()})}var nl=null,xd=0,Ua=0,ja=null;function x1(t,i){if(nl===null){var a=nl=[];xd=0,Ua=Df(),ja={status:"pending",value:void 0,then:function(l){a.push(l)}}}return xd++,i.then(Cp,Cp),i}function Cp(){if(--xd===0&&nl!==null){ja!==null&&(ja.status="fulfilled");var t=nl;nl=null,Ua=0,ja=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function I1(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Dp=Q.S;Q.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&x1(t,i),Dp!==null&&Dp(t,i)};var $s=te(null);function Id(){var t=$s.current;return t!==null?t:lt.pooledCache}function ec(t,i){i===null?ie($s,$s.current):ie($s,i.pool)}function Np(){var t=Id();return t===null?null:{parent:Ut._currentValue,pool:t}}var rl=Error(s(460)),Op=Error(s(474)),tc=Error(s(542)),Cd={then:function(){}};function kp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function nc(){}function Mp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(nc,nc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Pp(t),t;default:if(typeof i.status=="string")i.then(nc,nc);else{if(t=lt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Pp(t),t}throw il=i,rl}}var il=null;function Vp(){if(il===null)throw Error(s(459));var t=il;return il=null,t}function Pp(t){if(t===rl||t===tc)throw Error(s(483))}var Ui=!1;function Dd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ji(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function zi(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ze&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Qu(t),Tp(t,null,a),i}return Yu(t,l,i,a),Qu(t)}function sl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,An(t,a)}}function Od(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var kd=!1;function al(){if(kd){var t=ja;if(t!==null)throw t}}function ol(t,i,a,l){kd=!1;var h=t.updateQueue;Ui=!1;var f=h.firstBaseUpdate,b=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var C=T,B=C.next;C.next=null,b===null?f=B:b.next=B,b=C;var X=t.alternate;X!==null&&(X=X.updateQueue,T=X.lastBaseUpdate,T!==b&&(T===null?X.firstBaseUpdate=B:T.next=B,X.lastBaseUpdate=C))}if(f!==null){var W=h.baseState;b=0,X=B=C=null,T=f;do{var H=T.lane&-536870913,G=H!==T.lane;if(G?(Fe&H)===H:(l&H)===H){H!==0&&H===Ua&&(kd=!0),X!==null&&(X=X.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Te=t,_e=T;H=i;var st=a;switch(_e.tag){case 1:if(Te=_e.payload,typeof Te=="function"){W=Te.call(st,W,H);break e}W=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=_e.payload,H=typeof Te=="function"?Te.call(st,W,H):Te,H==null)break e;W=E({},W,H);break e;case 2:Ui=!0}}H=T.callback,H!==null&&(t.flags|=64,G&&(t.flags|=8192),G=h.callbacks,G===null?h.callbacks=[H]:G.push(H))}else G={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},X===null?(B=X=G,C=W):X=X.next=G,b|=H;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;G=T,T=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);X===null&&(C=W),h.baseState=C,h.firstBaseUpdate=B,h.lastBaseUpdate=X,f===null&&(h.shared.lanes=0),Qi|=b,t.lanes=b,t.memoizedState=W}}function Lp(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Up(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Lp(a[t],i)}var za=te(null),rc=te(0);function jp(t,i){t=vi,ie(rc,t),ie(za,i),vi=t|i.baseLanes}function Md(){ie(rc,vi),ie(za,za.current)}function Vd(){vi=rc.current,oe(za),oe(rc)}var Bi=0,De=null,rt=null,Dt=null,ic=!1,Ba=!1,Zs=!1,sc=0,ll=0,Fa=null,C1=0;function St(){throw Error(s(321))}function Pd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!kn(t[a],i[a]))return!1;return!0}function Ld(t,i,a,l,h,f){return Bi=f,De=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=t===null||t.memoizedState===null?Ty:Sy,Zs=!1,f=a(l,h),Zs=!1,Ba&&(f=Bp(i,a,l,h)),zp(t),f}function zp(t){Q.H=hc;var i=rt!==null&&rt.next!==null;if(Bi=0,Dt=rt=De=null,ic=!1,ll=0,Fa=null,i)throw Error(s(300));t===null||Kt||(t=t.dependencies,t!==null&&Ju(t)&&(Kt=!0))}function Bp(t,i,a,l){De=t;var h=0;do{if(Ba&&(Fa=null),ll=0,Ba=!1,25<=h)throw Error(s(301));if(h+=1,Dt=rt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=P1,f=i(a,l)}while(Ba);return f}function D1(){var t=Q.H,i=t.useState()[0];return i=typeof i.then=="function"?ul(i):i,t=t.useState()[0],(rt!==null?rt.memoizedState:null)!==t&&(De.flags|=1024),i}function Ud(){var t=sc!==0;return sc=0,t}function jd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function zd(t){if(ic){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}ic=!1}Bi=0,Dt=rt=De=null,Ba=!1,ll=sc=0,Fa=null}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?De.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function Nt(){if(rt===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var i=Dt===null?De.memoizedState:Dt.next;if(i!==null)Dt=i,rt=t;else{if(t===null)throw De.alternate===null?Error(s(467)):Error(s(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Dt===null?De.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Bd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ul(t){var i=ll;return ll+=1,Fa===null&&(Fa=[]),t=Mp(Fa,t,i),i=De,(Dt===null?i.memoizedState:Dt.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?Ty:Sy),t}function ac(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ul(t);if(t.$$typeof===$)return ln(t)}throw Error(s(438,String(t)))}function Fd(t){var i=null,a=De.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=De.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Bd(),De.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=M;return i.index++,a}function di(t,i){return typeof i=="function"?i(t):i}function oc(t){var i=Nt();return qd(i,rt,t)}function qd(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var b=h.next;h.next=f.next,f.next=b}i.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var T=b=null,C=null,B=i,X=!1;do{var W=B.lane&-536870913;if(W!==B.lane?(Fe&W)===W:(Bi&W)===W){var H=B.revertLane;if(H===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),W===Ua&&(X=!0);else if((Bi&H)===H){B=B.next,H===Ua&&(X=!0);continue}else W={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},C===null?(T=C=W,b=f):C=C.next=W,De.lanes|=H,Qi|=H;W=B.action,Zs&&a(f,W),f=B.hasEagerState?B.eagerState:a(f,W)}else H={lane:W,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},C===null?(T=C=H,b=f):C=C.next=H,De.lanes|=W,Qi|=W;B=B.next}while(B!==null&&B!==i);if(C===null?b=f:C.next=T,!kn(f,t.memoizedState)&&(Kt=!0,X&&(a=ja,a!==null)))throw a;t.memoizedState=f,t.baseState=b,t.baseQueue=C,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Hd(t){var i=Nt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var b=h=h.next;do f=t(f,b.action),b=b.next;while(b!==h);kn(f,i.memoizedState)||(Kt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function Fp(t,i,a){var l=De,h=Nt(),f=Ke;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var b=!kn((rt||h).memoizedState,a);b&&(h.memoizedState=a,Kt=!0),h=h.queue;var T=Gp.bind(null,l,h,t);if(cl(2048,8,T,[t]),h.getSnapshot!==i||b||Dt!==null&&Dt.memoizedState.tag&1){if(l.flags|=2048,qa(9,lc(),Hp.bind(null,l,h,a,i),null),lt===null)throw Error(s(349));f||(Bi&124)!==0||qp(l,i,a)}return a}function qp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=De.updateQueue,i===null?(i=Bd(),De.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Hp(t,i,a,l){i.value=a,i.getSnapshot=l,Kp(i)&&Yp(t)}function Gp(t,i,a){return a(function(){Kp(i)&&Yp(t)})}function Kp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!kn(t,a)}catch{return!0}}function Yp(t){var i=Ma(t,2);i!==null&&jn(i,t,2)}function Gd(t){var i=Rn();if(typeof t=="function"){var a=t;if(t=a(),Zs){xt(!0);try{a()}finally{xt(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:t},i}function Qp(t,i,a,l){return t.baseState=a,qd(t,rt,typeof l=="function"?l:di)}function N1(t,i,a,l,h){if(cc(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,Xp(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Xp(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var f=Q.T,b={};Q.T=b;try{var T=a(h,l),C=Q.S;C!==null&&C(b,T),$p(t,i,T)}catch(B){Kd(t,i,B)}finally{Q.T=f}}else try{f=a(h,l),$p(t,i,f)}catch(B){Kd(t,i,B)}}function $p(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Zp(t,i,l)},function(l){return Kd(t,i,l)}):Zp(t,i,a)}function Zp(t,i,a){i.status="fulfilled",i.value=a,Jp(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Xp(t,a)))}function Kd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Jp(i),i=i.next;while(i!==l)}t.action=null}function Jp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Wp(t,i){return i}function ey(t,i){if(Ke){var a=lt.formState;if(a!==null){e:{var l=De;if(Ke){if(_t){t:{for(var h=_t,f=Dr;h.nodeType!==8;){if(!f){h=null;break t}if(h=dr(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){_t=dr(h.nextSibling),l=h.data==="F!";break e}}Ys(l)}l=!1}l&&(i=a[0])}}return a=Rn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wp,lastRenderedState:i},a.queue=l,a=_y.bind(null,De,l),l.dispatch=a,l=Gd(!1),f=Zd.bind(null,De,!1,l.queue),l=Rn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=N1.bind(null,De,h,f,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function ty(t){var i=Nt();return ny(i,rt,t)}function ny(t,i,a){if(i=qd(t,i,Wp)[0],t=oc(di)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=ul(i)}catch(b){throw b===rl?tc:b}else l=i;i=Nt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(De.flags|=2048,qa(9,lc(),O1.bind(null,h,a),null)),[l,f,t]}function O1(t,i){t.action=i}function ry(t){var i=Nt(),a=rt;if(a!==null)return ny(i,a,t);Nt(),i=i.memoizedState,a=Nt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function qa(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=De.updateQueue,i===null&&(i=Bd(),De.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function lc(){return{destroy:void 0,resource:void 0}}function iy(){return Nt().memoizedState}function uc(t,i,a,l){var h=Rn();l=l===void 0?null:l,De.flags|=t,h.memoizedState=qa(1|i,lc(),a,l)}function cl(t,i,a,l){var h=Nt();l=l===void 0?null:l;var f=h.memoizedState.inst;rt!==null&&l!==null&&Pd(l,rt.memoizedState.deps)?h.memoizedState=qa(i,f,a,l):(De.flags|=t,h.memoizedState=qa(1|i,f,a,l))}function sy(t,i){uc(8390656,8,t,i)}function ay(t,i){cl(2048,8,t,i)}function oy(t,i){return cl(4,2,t,i)}function ly(t,i){return cl(4,4,t,i)}function uy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function cy(t,i,a){a=a!=null?a.concat([t]):null,cl(4,4,uy.bind(null,i,t),a)}function Yd(){}function hy(t,i){var a=Nt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Pd(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function dy(t,i){var a=Nt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Pd(i,l[1]))return l[0];if(l=t(),Zs){xt(!0);try{t()}finally{xt(!1)}}return a.memoizedState=[l,i],l}function Qd(t,i,a){return a===void 0||(Bi&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=gv(),De.lanes|=t,Qi|=t,a)}function fy(t,i,a,l){return kn(a,i)?a:za.current!==null?(t=Qd(t,a,l),kn(t,i)||(Kt=!0),t):(Bi&42)===0?(Kt=!0,t.memoizedState=a):(t=gv(),De.lanes|=t,Qi|=t,i)}function my(t,i,a,l,h){var f=ae.p;ae.p=f!==0&&8>f?f:8;var b=Q.T,T={};Q.T=T,Zd(t,!1,i,a);try{var C=h(),B=Q.S;if(B!==null&&B(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var X=I1(C,l);hl(t,i,X,Un(t))}else hl(t,i,l,Un(t))}catch(W){hl(t,i,{then:function(){},status:"rejected",reason:W},Un())}finally{ae.p=f,Q.T=b}}function k1(){}function Xd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=gy(t).queue;my(t,h,i,ge,a===null?k1:function(){return py(t),a(l)})}function gy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:ge},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function py(t){var i=gy(t).next.queue;hl(t,i,{},Un())}function $d(){return ln(Cl)}function yy(){return Nt().memoizedState}function vy(){return Nt().memoizedState}function M1(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Un();t=ji(a);var l=zi(i,t,a);l!==null&&(jn(l,i,a),sl(l,i,a)),i={cache:Rd()},t.payload=i;return}i=i.return}}function V1(t,i,a){var l=Un();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},cc(t)?by(i,a):(a=pd(t,i,a,l),a!==null&&(jn(a,t,l),Ey(a,i,l)))}function _y(t,i,a){var l=Un();hl(t,i,a,l)}function hl(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(cc(t))by(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var b=i.lastRenderedState,T=f(b,a);if(h.hasEagerState=!0,h.eagerState=T,kn(T,b))return Yu(t,i,h,0),lt===null&&Ku(),!1}catch{}finally{}if(a=pd(t,i,h,l),a!==null)return jn(a,t,l),Ey(a,i,l),!0}return!1}function Zd(t,i,a,l){if(l={lane:2,revertLane:Df(),action:l,hasEagerState:!1,eagerState:null,next:null},cc(t)){if(i)throw Error(s(479))}else i=pd(t,a,l,2),i!==null&&jn(i,t,2)}function cc(t){var i=t.alternate;return t===De||i!==null&&i===De}function by(t,i){Ba=ic=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Ey(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,An(t,a)}}var hc={readContext:ln,use:ac,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St},Ty={readContext:ln,use:ac,useCallback:function(t,i){return Rn().memoizedState=[t,i===void 0?null:i],t},useContext:ln,useEffect:sy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,uc(4194308,4,uy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return uc(4194308,4,t,i)},useInsertionEffect:function(t,i){uc(4,2,t,i)},useMemo:function(t,i){var a=Rn();i=i===void 0?null:i;var l=t();if(Zs){xt(!0);try{t()}finally{xt(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=Rn();if(a!==void 0){var h=a(i);if(Zs){xt(!0);try{a(i)}finally{xt(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=V1.bind(null,De,t),[l.memoizedState,t]},useRef:function(t){var i=Rn();return t={current:t},i.memoizedState=t},useState:function(t){t=Gd(t);var i=t.queue,a=_y.bind(null,De,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Yd,useDeferredValue:function(t,i){var a=Rn();return Qd(a,t,i)},useTransition:function(){var t=Gd(!1);return t=my.bind(null,De,t.queue,!0,!1),Rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=De,h=Rn();if(Ke){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),lt===null)throw Error(s(349));(Fe&124)!==0||qp(l,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,sy(Gp.bind(null,l,f,t),[t]),l.flags|=2048,qa(9,lc(),Hp.bind(null,l,f,a,i),null),a},useId:function(){var t=Rn(),i=lt.identifierPrefix;if(Ke){var a=ui,l=li;a=(l&~(1<<32-yt(l)-1)).toString(32)+a,i=""+i+"R"+a,a=sc++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=C1++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:$d,useFormState:ey,useActionState:ey,useOptimistic:function(t){var i=Rn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Zd.bind(null,De,!0,a),a.dispatch=i,[t,i]},useMemoCache:Fd,useCacheRefresh:function(){return Rn().memoizedState=M1.bind(null,De)}},Sy={readContext:ln,use:ac,useCallback:hy,useContext:ln,useEffect:ay,useImperativeHandle:cy,useInsertionEffect:oy,useLayoutEffect:ly,useMemo:dy,useReducer:oc,useRef:iy,useState:function(){return oc(di)},useDebugValue:Yd,useDeferredValue:function(t,i){var a=Nt();return fy(a,rt.memoizedState,t,i)},useTransition:function(){var t=oc(di)[0],i=Nt().memoizedState;return[typeof t=="boolean"?t:ul(t),i]},useSyncExternalStore:Fp,useId:yy,useHostTransitionStatus:$d,useFormState:ty,useActionState:ty,useOptimistic:function(t,i){var a=Nt();return Qp(a,rt,t,i)},useMemoCache:Fd,useCacheRefresh:vy},P1={readContext:ln,use:ac,useCallback:hy,useContext:ln,useEffect:ay,useImperativeHandle:cy,useInsertionEffect:oy,useLayoutEffect:ly,useMemo:dy,useReducer:Hd,useRef:iy,useState:function(){return Hd(di)},useDebugValue:Yd,useDeferredValue:function(t,i){var a=Nt();return rt===null?Qd(a,t,i):fy(a,rt.memoizedState,t,i)},useTransition:function(){var t=Hd(di)[0],i=Nt().memoizedState;return[typeof t=="boolean"?t:ul(t),i]},useSyncExternalStore:Fp,useId:yy,useHostTransitionStatus:$d,useFormState:ry,useActionState:ry,useOptimistic:function(t,i){var a=Nt();return rt!==null?Qp(a,rt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Fd,useCacheRefresh:vy},Ha=null,dl=0;function dc(t){var i=dl;return dl+=1,Ha===null&&(Ha=[]),Mp(Ha,t,i)}function fl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function fc(t,i){throw i.$$typeof===_?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function wy(t){var i=t._init;return i(t._payload)}function Ay(t){function i(U,P){if(t){var z=U.deletions;z===null?(U.deletions=[P],U.flags|=16):z.push(P)}}function a(U,P){if(!t)return null;for(;P!==null;)i(U,P),P=P.sibling;return null}function l(U){for(var P=new Map;U!==null;)U.key!==null?P.set(U.key,U):P.set(U.index,U),U=U.sibling;return P}function h(U,P){return U=oi(U,P),U.index=0,U.sibling=null,U}function f(U,P,z){return U.index=z,t?(z=U.alternate,z!==null?(z=z.index,z<P?(U.flags|=67108866,P):z):(U.flags|=67108866,P)):(U.flags|=1048576,P)}function b(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function T(U,P,z,J){return P===null||P.tag!==6?(P=vd(z,U.mode,J),P.return=U,P):(P=h(P,z),P.return=U,P)}function C(U,P,z,J){var de=z.type;return de===F?X(U,P,z.props.children,J,z.key):P!==null&&(P.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===A&&wy(de)===P.type)?(P=h(P,z.props),fl(P,z),P.return=U,P):(P=Xu(z.type,z.key,z.props,null,U.mode,J),fl(P,z),P.return=U,P)}function B(U,P,z,J){return P===null||P.tag!==4||P.stateNode.containerInfo!==z.containerInfo||P.stateNode.implementation!==z.implementation?(P=_d(z,U.mode,J),P.return=U,P):(P=h(P,z.children||[]),P.return=U,P)}function X(U,P,z,J,de){return P===null||P.tag!==7?(P=qs(z,U.mode,J,de),P.return=U,P):(P=h(P,z),P.return=U,P)}function W(U,P,z){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=vd(""+P,U.mode,z),P.return=U,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case S:return z=Xu(P.type,P.key,P.props,null,U.mode,z),fl(z,P),z.return=U,z;case D:return P=_d(P,U.mode,z),P.return=U,P;case A:var J=P._init;return P=J(P._payload),W(U,P,z)}if(et(P)||L(P))return P=qs(P,U.mode,z,null),P.return=U,P;if(typeof P.then=="function")return W(U,dc(P),z);if(P.$$typeof===$)return W(U,Wu(U,P),z);fc(U,P)}return null}function H(U,P,z,J){var de=P!==null?P.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return de!==null?null:T(U,P,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return z.key===de?C(U,P,z,J):null;case D:return z.key===de?B(U,P,z,J):null;case A:return de=z._init,z=de(z._payload),H(U,P,z,J)}if(et(z)||L(z))return de!==null?null:X(U,P,z,J,null);if(typeof z.then=="function")return H(U,P,dc(z),J);if(z.$$typeof===$)return H(U,P,Wu(U,z),J);fc(U,z)}return null}function G(U,P,z,J,de){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return U=U.get(z)||null,T(P,U,""+J,de);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return U=U.get(J.key===null?z:J.key)||null,C(P,U,J,de);case D:return U=U.get(J.key===null?z:J.key)||null,B(P,U,J,de);case A:var Oe=J._init;return J=Oe(J._payload),G(U,P,z,J,de)}if(et(J)||L(J))return U=U.get(z)||null,X(P,U,J,de,null);if(typeof J.then=="function")return G(U,P,z,dc(J),de);if(J.$$typeof===$)return G(U,P,z,Wu(P,J),de);fc(P,J)}return null}function Te(U,P,z,J){for(var de=null,Oe=null,ye=P,be=P=0,Qt=null;ye!==null&&be<z.length;be++){ye.index>be?(Qt=ye,ye=null):Qt=ye.sibling;var He=H(U,ye,z[be],J);if(He===null){ye===null&&(ye=Qt);break}t&&ye&&He.alternate===null&&i(U,ye),P=f(He,P,be),Oe===null?de=He:Oe.sibling=He,Oe=He,ye=Qt}if(be===z.length)return a(U,ye),Ke&&Gs(U,be),de;if(ye===null){for(;be<z.length;be++)ye=W(U,z[be],J),ye!==null&&(P=f(ye,P,be),Oe===null?de=ye:Oe.sibling=ye,Oe=ye);return Ke&&Gs(U,be),de}for(ye=l(ye);be<z.length;be++)Qt=G(ye,U,be,z[be],J),Qt!==null&&(t&&Qt.alternate!==null&&ye.delete(Qt.key===null?be:Qt.key),P=f(Qt,P,be),Oe===null?de=Qt:Oe.sibling=Qt,Oe=Qt);return t&&ye.forEach(function(rs){return i(U,rs)}),Ke&&Gs(U,be),de}function _e(U,P,z,J){if(z==null)throw Error(s(151));for(var de=null,Oe=null,ye=P,be=P=0,Qt=null,He=z.next();ye!==null&&!He.done;be++,He=z.next()){ye.index>be?(Qt=ye,ye=null):Qt=ye.sibling;var rs=H(U,ye,He.value,J);if(rs===null){ye===null&&(ye=Qt);break}t&&ye&&rs.alternate===null&&i(U,ye),P=f(rs,P,be),Oe===null?de=rs:Oe.sibling=rs,Oe=rs,ye=Qt}if(He.done)return a(U,ye),Ke&&Gs(U,be),de;if(ye===null){for(;!He.done;be++,He=z.next())He=W(U,He.value,J),He!==null&&(P=f(He,P,be),Oe===null?de=He:Oe.sibling=He,Oe=He);return Ke&&Gs(U,be),de}for(ye=l(ye);!He.done;be++,He=z.next())He=G(ye,U,be,He.value,J),He!==null&&(t&&He.alternate!==null&&ye.delete(He.key===null?be:He.key),P=f(He,P,be),Oe===null?de=He:Oe.sibling=He,Oe=He);return t&&ye.forEach(function(LS){return i(U,LS)}),Ke&&Gs(U,be),de}function st(U,P,z,J){if(typeof z=="object"&&z!==null&&z.type===F&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case S:e:{for(var de=z.key;P!==null;){if(P.key===de){if(de=z.type,de===F){if(P.tag===7){a(U,P.sibling),J=h(P,z.props.children),J.return=U,U=J;break e}}else if(P.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===A&&wy(de)===P.type){a(U,P.sibling),J=h(P,z.props),fl(J,z),J.return=U,U=J;break e}a(U,P);break}else i(U,P);P=P.sibling}z.type===F?(J=qs(z.props.children,U.mode,J,z.key),J.return=U,U=J):(J=Xu(z.type,z.key,z.props,null,U.mode,J),fl(J,z),J.return=U,U=J)}return b(U);case D:e:{for(de=z.key;P!==null;){if(P.key===de)if(P.tag===4&&P.stateNode.containerInfo===z.containerInfo&&P.stateNode.implementation===z.implementation){a(U,P.sibling),J=h(P,z.children||[]),J.return=U,U=J;break e}else{a(U,P);break}else i(U,P);P=P.sibling}J=_d(z,U.mode,J),J.return=U,U=J}return b(U);case A:return de=z._init,z=de(z._payload),st(U,P,z,J)}if(et(z))return Te(U,P,z,J);if(L(z)){if(de=L(z),typeof de!="function")throw Error(s(150));return z=de.call(z),_e(U,P,z,J)}if(typeof z.then=="function")return st(U,P,dc(z),J);if(z.$$typeof===$)return st(U,P,Wu(U,z),J);fc(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,P!==null&&P.tag===6?(a(U,P.sibling),J=h(P,z),J.return=U,U=J):(a(U,P),J=vd(z,U.mode,J),J.return=U,U=J),b(U)):a(U,P)}return function(U,P,z,J){try{dl=0;var de=st(U,P,z,J);return Ha=null,de}catch(ye){if(ye===rl||ye===tc)throw ye;var Oe=Mn(29,ye,null,U.mode);return Oe.lanes=J,Oe.return=U,Oe}finally{}}}var Ga=Ay(!0),Ry=Ay(!1),Zn=te(null),Nr=null;function Fi(t){var i=t.alternate;ie(jt,jt.current&1),ie(Zn,t),Nr===null&&(i===null||za.current!==null||i.memoizedState!==null)&&(Nr=t)}function xy(t){if(t.tag===22){if(ie(jt,jt.current),ie(Zn,t),Nr===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Nr=t)}}else qi()}function qi(){ie(jt,jt.current),ie(Zn,Zn.current)}function fi(t){oe(Zn),Nr===t&&(Nr=null),oe(jt)}var jt=te(0);function mc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Ff(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Jd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Wd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Un(),h=ji(l);h.payload=i,a!=null&&(h.callback=a),i=zi(t,h,l),i!==null&&(jn(i,t,l),sl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Un(),h=ji(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=zi(t,h,l),i!==null&&(jn(i,t,l),sl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Un(),l=ji(a);l.tag=2,i!=null&&(l.callback=i),i=zi(t,l,a),i!==null&&(jn(i,t,a),sl(i,t,a))}};function Iy(t,i,a,l,h,f,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,b):i.prototype&&i.prototype.isPureReactComponent?!Xo(a,l)||!Xo(h,f):!0}function Cy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Wd.enqueueReplaceState(i,i.state,null)}function Js(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var gc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Dy(t){gc(t)}function Ny(t){console.error(t)}function Oy(t){gc(t)}function pc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function ky(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ef(t,i,a){return a=ji(a),a.tag=3,a.payload={element:null},a.callback=function(){pc(t,i)},a}function My(t){return t=ji(t),t.tag=3,t}function Vy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){ky(i,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){ky(i,a,l),typeof h!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function L1(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&el(i,a,h,!0),a=Zn.current,a!==null){switch(a.tag){case 13:return Nr===null?Af():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Cd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),xf(t,l,h)),!1;case 22:return a.flags|=65536,l===Cd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),xf(t,l,h)),!1}throw Error(s(435,a.tag))}return xf(t,l,h),Af(),!1}if(Ke)return i=Zn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Td&&(t=Error(s(422),{cause:l}),Wo(Yn(t,a)))):(l!==Td&&(i=Error(s(423),{cause:l}),Wo(Yn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Yn(l,a),h=ef(t.stateNode,l,h),Od(t,h),bt!==4&&(bt=2)),!1;var f=Error(s(520),{cause:l});if(f=Yn(f,a),bl===null?bl=[f]:bl.push(f),bt!==4&&(bt=2),i===null)return!0;l=Yn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=ef(a.stateNode,l,t),Od(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Xi===null||!Xi.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=My(h),Vy(h,t,a,l),Od(a,h),!1}a=a.return}while(a!==null);return!1}var Py=Error(s(461)),Kt=!1;function tn(t,i,a,l){i.child=t===null?Ry(i,null,a,l):Ga(i,t.child,a,l)}function Ly(t,i,a,l,h){a=a.render;var f=i.ref;if("ref"in l){var b={};for(var T in l)T!=="ref"&&(b[T]=l[T])}else b=l;return Xs(i),l=Ld(t,i,a,b,f,h),T=Ud(),t!==null&&!Kt?(jd(t,i,h),mi(t,i,h)):(Ke&&T&&bd(i),i.flags|=1,tn(t,i,l,h),i.child)}function Uy(t,i,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!yd(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,jy(t,i,f,l,h)):(t=Xu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!uf(t,h)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:Xo,a(b,l)&&t.ref===i.ref)return mi(t,i,h)}return i.flags|=1,t=oi(f,l),t.ref=i.ref,t.return=i,i.child=t}function jy(t,i,a,l,h){if(t!==null){var f=t.memoizedProps;if(Xo(f,l)&&t.ref===i.ref)if(Kt=!1,i.pendingProps=l=f,uf(t,h))(t.flags&131072)!==0&&(Kt=!0);else return i.lanes=t.lanes,mi(t,i,h)}return tf(t,i,a,l,h)}function zy(t,i,a){var l=i.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=i.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~l}else i.childLanes=0,i.child=null;return By(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&ec(i,f!==null?f.cachePool:null),f!==null?jp(i,f):Md(),xy(i);else return i.lanes=i.childLanes=536870912,By(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(ec(i,f.cachePool),jp(i,f),qi(),i.memoizedState=null):(t!==null&&ec(i,null),Md(),qi());return tn(t,i,h,a),i.child}function By(t,i,a,l){var h=Id();return h=h===null?null:{parent:Ut._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&ec(i,null),Md(),xy(i),t!==null&&el(t,i,l,!0),null}function yc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function tf(t,i,a,l,h){return Xs(i),a=Ld(t,i,a,l,void 0,h),l=Ud(),t!==null&&!Kt?(jd(t,i,h),mi(t,i,h)):(Ke&&l&&bd(i),i.flags|=1,tn(t,i,a,h),i.child)}function Fy(t,i,a,l,h,f){return Xs(i),i.updateQueue=null,a=Bp(i,l,a,h),zp(t),l=Ud(),t!==null&&!Kt?(jd(t,i,f),mi(t,i,f)):(Ke&&l&&bd(i),i.flags|=1,tn(t,i,a,f),i.child)}function qy(t,i,a,l,h){if(Xs(i),i.stateNode===null){var f=Va,b=a.contextType;typeof b=="object"&&b!==null&&(f=ln(b)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Wd,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},Dd(i),b=a.contextType,f.context=typeof b=="object"&&b!==null?ln(b):Va,f.state=i.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Jd(i,a,b,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&Wd.enqueueReplaceState(f,f.state,null),ol(i,l,f,h),al(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var T=i.memoizedProps,C=Js(a,T);f.props=C;var B=f.context,X=a.contextType;b=Va,typeof X=="object"&&X!==null&&(b=ln(X));var W=a.getDerivedStateFromProps;X=typeof W=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,X||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||B!==b)&&Cy(i,f,l,b),Ui=!1;var H=i.memoizedState;f.state=H,ol(i,l,f,h),al(),B=i.memoizedState,T||H!==B||Ui?(typeof W=="function"&&(Jd(i,a,W,l),B=i.memoizedState),(C=Ui||Iy(i,a,C,l,H,B,b))?(X||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),f.props=l,f.state=B,f.context=b,l=C):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,Nd(t,i),b=i.memoizedProps,X=Js(a,b),f.props=X,W=i.pendingProps,H=f.context,B=a.contextType,C=Va,typeof B=="object"&&B!==null&&(C=ln(B)),T=a.getDerivedStateFromProps,(B=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==W||H!==C)&&Cy(i,f,l,C),Ui=!1,H=i.memoizedState,f.state=H,ol(i,l,f,h),al();var G=i.memoizedState;b!==W||H!==G||Ui||t!==null&&t.dependencies!==null&&Ju(t.dependencies)?(typeof T=="function"&&(Jd(i,a,T,l),G=i.memoizedState),(X=Ui||Iy(i,a,X,l,H,G,C)||t!==null&&t.dependencies!==null&&Ju(t.dependencies))?(B||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,G,C),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,G,C)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),f.props=l,f.state=G,f.context=C,l=X):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,yc(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=Ga(i,t.child,null,h),i.child=Ga(i,null,a,h)):tn(t,i,a,h),i.memoizedState=f.state,t=i.child):t=mi(t,i,h),t}function Hy(t,i,a,l){return Jo(),i.flags|=256,tn(t,i,a,l),i.child}var nf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rf(t){return{baseLanes:t,cachePool:Np()}}function sf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Jn),t}function Gy(t,i,a){var l=i.pendingProps,h=!1,f=(i.flags&128)!==0,b;if((b=f)||(b=t!==null&&t.memoizedState===null?!1:(jt.current&2)!==0),b&&(h=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ke){if(h?Fi(i):qi(),Ke){var T=_t,C;if(C=T){e:{for(C=T,T=Dr;C.nodeType!==8;){if(!T){T=null;break e}if(C=dr(C.nextSibling),C===null){T=null;break e}}T=C}T!==null?(i.memoizedState={dehydrated:T,treeContext:Hs!==null?{id:li,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},C=Mn(18,null,null,0),C.stateNode=T,C.return=i,i.child=C,Tn=i,_t=null,C=!0):C=!1}C||Ys(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Ff(T)?i.lanes=32:i.lanes=536870912,null;fi(i)}return T=l.children,l=l.fallback,h?(qi(),h=i.mode,T=vc({mode:"hidden",children:T},h),l=qs(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,h=i.child,h.memoizedState=rf(a),h.childLanes=sf(t,b,a),i.memoizedState=nf,l):(Fi(i),af(i,T))}if(C=t.memoizedState,C!==null&&(T=C.dehydrated,T!==null)){if(f)i.flags&256?(Fi(i),i.flags&=-257,i=of(t,i,a)):i.memoizedState!==null?(qi(),i.child=t.child,i.flags|=128,i=null):(qi(),h=l.fallback,T=i.mode,l=vc({mode:"visible",children:l.children},T),h=qs(h,T,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Ga(i,t.child,null,a),l=i.child,l.memoizedState=rf(a),l.childLanes=sf(t,b,a),i.memoizedState=nf,i=h);else if(Fi(i),Ff(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var B=b.dgst;b=B,l=Error(s(419)),l.stack="",l.digest=b,Wo({value:l,source:null,stack:null}),i=of(t,i,a)}else if(Kt||el(t,i,a,!1),b=(a&t.childLanes)!==0,Kt||b){if(b=lt,b!==null&&(l=a&-a,l=(l&42)!==0?1:Et(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,Ma(t,l),jn(b,t,l),Py;T.data==="$?"||Af(),i=of(t,i,a)}else T.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=C.treeContext,_t=dr(T.nextSibling),Tn=i,Ke=!0,Ks=null,Dr=!1,t!==null&&(Xn[$n++]=li,Xn[$n++]=ui,Xn[$n++]=Hs,li=t.id,ui=t.overflow,Hs=i),i=af(i,l.children),i.flags|=4096);return i}return h?(qi(),h=l.fallback,T=i.mode,C=t.child,B=C.sibling,l=oi(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,B!==null?h=oi(B,h):(h=qs(h,T,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,T=t.child.memoizedState,T===null?T=rf(a):(C=T.cachePool,C!==null?(B=Ut._currentValue,C=C.parent!==B?{parent:B,pool:B}:C):C=Np(),T={baseLanes:T.baseLanes|a,cachePool:C}),h.memoizedState=T,h.childLanes=sf(t,b,a),i.memoizedState=nf,l):(Fi(i),a=t.child,t=a.sibling,a=oi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(b=i.deletions,b===null?(i.deletions=[t],i.flags|=16):b.push(t)),i.child=a,i.memoizedState=null,a)}function af(t,i){return i=vc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function vc(t,i){return t=Mn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function of(t,i,a){return Ga(i,t.child,null,a),t=af(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Ky(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),wd(t.return,i,a)}function lf(t,i,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function Yy(t,i,a){var l=i.pendingProps,h=l.revealOrder,f=l.tail;if(tn(t,i,l.children,a),l=jt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ky(t,a,i);else if(t.tag===19)Ky(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ie(jt,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&mc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),lf(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&mc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}lf(i,!0,a,null,f);break;case"together":lf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function mi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Qi|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(el(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=oi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=oi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function uf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Ju(t)))}function U1(t,i,a){switch(i.tag){case 3:je(i,i.stateNode.containerInfo),Li(i,Ut,t.memoizedState.cache),Jo();break;case 27:case 5:ke(i);break;case 4:je(i,i.stateNode.containerInfo);break;case 10:Li(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Fi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Gy(t,i,a):(Fi(i),t=mi(t,i,a),t!==null?t.sibling:null);Fi(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(el(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Yy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(jt,jt.current),l)break;return null;case 22:case 23:return i.lanes=0,zy(t,i,a);case 24:Li(i,Ut,t.memoizedState.cache)}return mi(t,i,a)}function Qy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Kt=!0;else{if(!uf(t,a)&&(i.flags&128)===0)return Kt=!1,U1(t,i,a);Kt=(t.flags&131072)!==0}else Kt=!1,Ke&&(i.flags&1048576)!==0&&wp(i,Zu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")yd(l)?(t=Js(l,t),i.tag=1,i=qy(null,i,l,t,a)):(i.tag=0,i=tf(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===le){i.tag=11,i=Ly(null,i,l,t,a);break e}else if(h===N){i.tag=14,i=Uy(null,i,l,t,a);break e}}throw i=We(l)||l,Error(s(306,i,""))}}return i;case 0:return tf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Js(l,i.pendingProps),qy(t,i,l,h,a);case 3:e:{if(je(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var f=i.memoizedState;h=f.element,Nd(t,i),ol(i,l,null,a);var b=i.memoizedState;if(l=b.cache,Li(i,Ut,l),l!==f.cache&&Ad(i,[Ut],a,!0),al(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Hy(t,i,l,a);break e}else if(l!==h){h=Yn(Error(s(424)),i),Wo(h),i=Hy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_t=dr(t.firstChild),Tn=i,Ke=!0,Ks=null,Dr=!0,a=Ry(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Jo(),l===h){i=mi(t,i,a);break e}tn(t,i,l,a)}i=i.child}return i;case 26:return yc(t,i),t===null?(a=Jv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ke||(a=i.type,t=i.pendingProps,l=Oc(pe.current).createElement(a),l[tt]=i,l[Ge]=t,rn(l,a,t),Tt(l),i.stateNode=l):i.memoizedState=Jv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return ke(i),t===null&&Ke&&(l=i.stateNode=Xv(i.type,i.pendingProps,pe.current),Tn=i,Dr=!0,h=_t,Ji(i.type)?(qf=h,_t=dr(l.firstChild)):_t=h),tn(t,i,i.pendingProps.children,a),yc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ke&&((h=l=_t)&&(l=dS(l,i.type,i.pendingProps,Dr),l!==null?(i.stateNode=l,Tn=i,_t=dr(l.firstChild),Dr=!1,h=!0):h=!1),h||Ys(i)),ke(i),h=i.type,f=i.pendingProps,b=t!==null?t.memoizedProps:null,l=f.children,jf(h,f)?l=null:b!==null&&jf(h,b)&&(i.flags|=32),i.memoizedState!==null&&(h=Ld(t,i,D1,null,null,a),Cl._currentValue=h),yc(t,i),tn(t,i,l,a),i.child;case 6:return t===null&&Ke&&((t=a=_t)&&(a=fS(a,i.pendingProps,Dr),a!==null?(i.stateNode=a,Tn=i,_t=null,t=!0):t=!1),t||Ys(i)),null;case 13:return Gy(t,i,a);case 4:return je(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Ga(i,null,l,a):tn(t,i,l,a),i.child;case 11:return Ly(t,i,i.type,i.pendingProps,a);case 7:return tn(t,i,i.pendingProps,a),i.child;case 8:return tn(t,i,i.pendingProps.children,a),i.child;case 12:return tn(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Li(i,i.type,l.value),tn(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Xs(i),h=ln(h),l=l(h),i.flags|=1,tn(t,i,l,a),i.child;case 14:return Uy(t,i,i.type,i.pendingProps,a);case 15:return jy(t,i,i.type,i.pendingProps,a);case 19:return Yy(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=vc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=oi(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return zy(t,i,a);case 24:return Xs(i),l=ln(Ut),t===null?(h=Id(),h===null&&(h=lt,f=Rd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:l,cache:h},Dd(i),Li(i,Ut,h)):((t.lanes&a)!==0&&(Nd(t,i),ol(i,null,null,a),al()),h=t.memoizedState,f=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Li(i,Ut,l)):(l=f.cache,Li(i,Ut,l),l!==h.cache&&Ad(i,[Ut],a,!0))),tn(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function gi(t){t.flags|=4}function Xy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!r0(i)){if(i=Zn.current,i!==null&&((Fe&4194048)===Fe?Nr!==null:(Fe&62914560)!==Fe&&(Fe&536870912)===0||i!==Nr))throw il=Cd,Op;t.flags|=8192}}function _c(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?xs():536870912,t.lanes|=i,Xa|=i)}function ml(t,i){if(!Ke)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function gt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function j1(t,i,a){var l=i.pendingProps;switch(Ed(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(i),null;case 1:return gt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),hi(Ut),Rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Zo(i)?gi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,xp())),gt(i),null;case 26:return a=i.memoizedState,t===null?(gi(i),a!==null?(gt(i),Xy(i,a)):(gt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(gi(i),gt(i),Xy(i,a)):(gt(i),i.flags&=-16777217):(t.memoizedProps!==l&&gi(i),gt(i),i.flags&=-16777217),null;case 27:gn(i),a=pe.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&gi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return gt(i),null}t=me.current,Zo(i)?Ap(i):(t=Xv(h,l,a),i.stateNode=t,gi(i))}return gt(i),null;case 5:if(gn(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&gi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return gt(i),null}if(t=me.current,Zo(i))Ap(i);else{switch(h=Oc(pe.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[tt]=i,t[Ge]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(rn(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&gi(i)}}return gt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&gi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=pe.current,Zo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Tn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[tt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Fv(t.nodeValue,a)),t||Ys(i)}else t=Oc(t).createTextNode(l),t[tt]=i,i.stateNode=t}return gt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Zo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[tt]=i}else Jo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;gt(i),h=!1}else h=xp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(fi(i),i):(fi(i),null)}if(fi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),_c(i,i.updateQueue),gt(i),null;case 4:return Rt(),t===null&&Mf(i.stateNode.containerInfo),gt(i),null;case 10:return hi(i.type),gt(i),null;case 19:if(oe(jt),h=i.memoizedState,h===null)return gt(i),null;if(l=(i.flags&128)!==0,f=h.rendering,f===null)if(l)ml(h,!1);else{if(bt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=mc(t),f!==null){for(i.flags|=128,ml(h,!1),t=f.updateQueue,i.updateQueue=t,_c(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Sp(a,t),a=a.sibling;return ie(jt,jt.current&1|2),i.child}t=t.sibling}h.tail!==null&&pn()>Tc&&(i.flags|=128,l=!0,ml(h,!1),i.lanes=4194304)}else{if(!l)if(t=mc(f),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,_c(i,t),ml(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Ke)return gt(i),null}else 2*pn()-h.renderingStartTime>Tc&&a!==536870912&&(i.flags|=128,l=!0,ml(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(t=h.last,t!==null?t.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=pn(),i.sibling=null,t=jt.current,ie(jt,l?t&1|2:t&1),i):(gt(i),null);case 22:case 23:return fi(i),Vd(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(gt(i),i.subtreeFlags&6&&(i.flags|=8192)):gt(i),a=i.updateQueue,a!==null&&_c(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&oe($s),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),hi(Ut),gt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function z1(t,i){switch(Ed(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return hi(Ut),Rt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return gn(i),null;case 13:if(fi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Jo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return oe(jt),null;case 4:return Rt(),null;case 10:return hi(i.type),null;case 22:case 23:return fi(i),Vd(),t!==null&&oe($s),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return hi(Ut),null;case 25:return null;default:return null}}function $y(t,i){switch(Ed(i),i.tag){case 3:hi(Ut),Rt();break;case 26:case 27:case 5:gn(i);break;case 4:Rt();break;case 13:fi(i);break;case 19:oe(jt);break;case 10:hi(i.type);break;case 22:case 23:fi(i),Vd(),t!==null&&oe($s);break;case 24:hi(Ut)}}function gl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,b=a.inst;l=f(),b.destroy=l}a=a.next}while(a!==h)}}catch(T){at(i,i.return,T)}}function Hi(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var b=l.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,h=i;var C=a,B=T;try{B()}catch(X){at(h,C,X)}}}l=l.next}while(l!==f)}}catch(X){at(i,i.return,X)}}function Zy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Up(i,a)}catch(l){at(t,t.return,l)}}}function Jy(t,i,a){a.props=Js(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){at(t,i,l)}}function pl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){at(t,i,h)}}function Or(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){at(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){at(t,i,h)}else a.current=null}function Wy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){at(t,t.return,h)}}function cf(t,i,a){try{var l=t.stateNode;oS(l,t.type,a,i),l[Ge]=i}catch(h){at(t,t.return,h)}}function ev(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ji(t.type)||t.tag===4}function hf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ev(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ji(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function df(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Nc));else if(l!==4&&(l===27&&Ji(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(df(t,i,a),t=t.sibling;t!==null;)df(t,i,a),t=t.sibling}function bc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Ji(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(bc(t,i,a),t=t.sibling;t!==null;)bc(t,i,a),t=t.sibling}function tv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);rn(i,l,a),i[tt]=t,i[Ge]=a}catch(f){at(t,t.return,f)}}var pi=!1,wt=!1,ff=!1,nv=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function B1(t,i){if(t=t.containerInfo,Lf=Uc,t=fp(t),cd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,T=-1,C=-1,B=0,X=0,W=t,H=null;t:for(;;){for(var G;W!==a||h!==0&&W.nodeType!==3||(T=b+h),W!==f||l!==0&&W.nodeType!==3||(C=b+l),W.nodeType===3&&(b+=W.nodeValue.length),(G=W.firstChild)!==null;)H=W,W=G;for(;;){if(W===t)break t;if(H===a&&++B===h&&(T=b),H===f&&++X===l&&(C=b),(G=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=G}a=T===-1||C===-1?null:{start:T,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Uf={focusedElem:t,selectionRange:a},Uc=!1,Yt=i;Yt!==null;)if(i=Yt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Yt=t;else for(;Yt!==null;){switch(i=Yt,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Te=Js(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Te,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){at(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Bf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Bf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Yt=t;break}Yt=i.return}}function rv(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Gi(t,a),l&4&&gl(5,a);break;case 1:if(Gi(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(b){at(a,a.return,b)}else{var h=Js(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(b){at(a,a.return,b)}}l&64&&Zy(a),l&512&&pl(a,a.return);break;case 3:if(Gi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Up(t,i)}catch(b){at(a,a.return,b)}}break;case 27:i===null&&l&4&&tv(a);case 26:case 5:Gi(t,a),i===null&&l&4&&Wy(a),l&512&&pl(a,a.return);break;case 12:Gi(t,a);break;case 13:Gi(t,a),l&4&&av(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=$1.bind(null,a),mS(t,a))));break;case 22:if(l=a.memoizedState!==null||pi,!l){i=i!==null&&i.memoizedState!==null||wt,h=pi;var f=wt;pi=l,(wt=i)&&!f?Ki(t,a,(a.subtreeFlags&8772)!==0):Gi(t,a),pi=h,wt=f}break;case 30:break;default:Gi(t,a)}}function iv(t){var i=t.alternate;i!==null&&(t.alternate=null,iv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ki(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,xn=!1;function yi(t,i,a){for(a=a.child;a!==null;)sv(t,i,a),a=a.sibling}function sv(t,i,a){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(ct,a)}catch{}switch(a.tag){case 26:wt||Or(a,i),yi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:wt||Or(a,i);var l=dt,h=xn;Ji(a.type)&&(dt=a.stateNode,xn=!1),yi(t,i,a),Al(a.stateNode),dt=l,xn=h;break;case 5:wt||Or(a,i);case 6:if(l=dt,h=xn,dt=null,yi(t,i,a),dt=l,xn=h,dt!==null)if(xn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(f){at(a,i,f)}else try{dt.removeChild(a.stateNode)}catch(f){at(a,i,f)}break;case 18:dt!==null&&(xn?(t=dt,Yv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),kl(t)):Yv(dt,a.stateNode));break;case 4:l=dt,h=xn,dt=a.stateNode.containerInfo,xn=!0,yi(t,i,a),dt=l,xn=h;break;case 0:case 11:case 14:case 15:wt||Hi(2,a,i),wt||Hi(4,a,i),yi(t,i,a);break;case 1:wt||(Or(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Jy(a,i,l)),yi(t,i,a);break;case 21:yi(t,i,a);break;case 22:wt=(l=wt)||a.memoizedState!==null,yi(t,i,a),wt=l;break;default:yi(t,i,a)}}function av(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{kl(t)}catch(a){at(i,i.return,a)}}function F1(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new nv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new nv),i;default:throw Error(s(435,t.tag))}}function mf(t,i){var a=F1(t);i.forEach(function(l){var h=Z1.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Vn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,b=i,T=b;e:for(;T!==null;){switch(T.tag){case 27:if(Ji(T.type)){dt=T.stateNode,xn=!1;break e}break;case 5:dt=T.stateNode,xn=!1;break e;case 3:case 4:dt=T.stateNode.containerInfo,xn=!0;break e}T=T.return}if(dt===null)throw Error(s(160));sv(f,b,h),dt=null,xn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)ov(i,t),i=i.sibling}var hr=null;function ov(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Vn(i,t),Pn(t),l&4&&(Hi(3,t,t.return),gl(3,t),Hi(5,t,t.return));break;case 1:Vn(i,t),Pn(t),l&512&&(wt||a===null||Or(a,a.return)),l&64&&pi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=hr;if(Vn(i,t),Pn(t),l&512&&(wt||a===null||Or(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[or]||f[tt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),rn(f,l,a),f[tt]=t,Tt(f),l=f;break e;case"link":var b=t0("link","href",h).get(l+(a.href||""));if(b){for(var T=0;T<b.length;T++)if(f=b[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(T,1);break t}}f=h.createElement(l),rn(f,l,a),h.head.appendChild(f);break;case"meta":if(b=t0("meta","content",h).get(l+(a.content||""))){for(T=0;T<b.length;T++)if(f=b[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(T,1);break t}}f=h.createElement(l),rn(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[tt]=t,Tt(f),l=f}t.stateNode=l}else n0(h,t.type,t.stateNode);else t.stateNode=e0(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?n0(h,t.type,t.stateNode):e0(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&cf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Vn(i,t),Pn(t),l&512&&(wt||a===null||Or(a,a.return)),a!==null&&l&4&&cf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Vn(i,t),Pn(t),l&512&&(wt||a===null||Or(a,a.return)),t.flags&32){h=t.stateNode;try{qn(h,"")}catch(G){at(t,t.return,G)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,cf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(ff=!0);break;case 6:if(Vn(i,t),Pn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(G){at(t,t.return,G)}}break;case 3:if(Vc=null,h=hr,hr=kc(i.containerInfo),Vn(i,t),hr=h,Pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{kl(i.containerInfo)}catch(G){at(t,t.return,G)}ff&&(ff=!1,lv(t));break;case 4:l=hr,hr=kc(t.stateNode.containerInfo),Vn(i,t),Pn(t),hr=l;break;case 12:Vn(i,t),Pn(t);break;case 13:Vn(i,t),Pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(bf=pn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,mf(t,l)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,B=pi,X=wt;if(pi=B||h,wt=X||C,Vn(i,t),wt=X,pi=B,Pn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||C||pi||wt||Ws(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){C=a=i;try{if(f=C.stateNode,h)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=C.stateNode;var W=C.memoizedProps.style,H=W!=null&&W.hasOwnProperty("display")?W.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(G){at(C,C.return,G)}}}else if(i.tag===6){if(a===null){C=i;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(G){at(C,C.return,G)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,mf(t,a))));break;case 19:Vn(i,t),Pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,mf(t,l)));break;case 30:break;case 21:break;default:Vn(i,t),Pn(t)}}function Pn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(ev(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=hf(t);bc(t,f,h);break;case 5:var b=a.stateNode;a.flags&32&&(qn(b,""),a.flags&=-33);var T=hf(t);bc(t,T,b);break;case 3:case 4:var C=a.stateNode.containerInfo,B=hf(t);df(t,B,C);break;default:throw Error(s(161))}}catch(X){at(t,t.return,X)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function lv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;lv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Gi(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)rv(t,i.alternate,i),i=i.sibling}function Ws(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Hi(4,i,i.return),Ws(i);break;case 1:Or(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Jy(i,i.return,a),Ws(i);break;case 27:Al(i.stateNode);case 26:case 5:Or(i,i.return),Ws(i);break;case 22:i.memoizedState===null&&Ws(i);break;case 30:Ws(i);break;default:Ws(i)}t=t.sibling}}function Ki(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,f=i,b=f.flags;switch(f.tag){case 0:case 11:case 15:Ki(h,f,a),gl(4,f);break;case 1:if(Ki(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){at(l,l.return,B)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)Lp(C[h],T)}catch(B){at(l,l.return,B)}}a&&b&64&&Zy(f),pl(f,f.return);break;case 27:tv(f);case 26:case 5:Ki(h,f,a),a&&l===null&&b&4&&Wy(f),pl(f,f.return);break;case 12:Ki(h,f,a);break;case 13:Ki(h,f,a),a&&b&4&&av(h,f);break;case 22:f.memoizedState===null&&Ki(h,f,a),pl(f,f.return);break;case 30:break;default:Ki(h,f,a)}i=i.sibling}}function gf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&tl(a))}function pf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&tl(t))}function kr(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)uv(t,i,a,l),i=i.sibling}function uv(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:kr(t,i,a,l),h&2048&&gl(9,i);break;case 1:kr(t,i,a,l);break;case 3:kr(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&tl(t)));break;case 12:if(h&2048){kr(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,b=f.id,T=f.onPostCommit;typeof T=="function"&&T(b,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){at(i,i.return,C)}}else kr(t,i,a,l);break;case 13:kr(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,b=i.alternate,i.memoizedState!==null?f._visibility&2?kr(t,i,a,l):yl(t,i):f._visibility&2?kr(t,i,a,l):(f._visibility|=2,Ka(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&gf(b,i);break;case 24:kr(t,i,a,l),h&2048&&pf(i.alternate,i);break;default:kr(t,i,a,l)}}function Ka(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,b=i,T=a,C=l,B=b.flags;switch(b.tag){case 0:case 11:case 15:Ka(f,b,T,C,h),gl(8,b);break;case 23:break;case 22:var X=b.stateNode;b.memoizedState!==null?X._visibility&2?Ka(f,b,T,C,h):yl(f,b):(X._visibility|=2,Ka(f,b,T,C,h)),h&&B&2048&&gf(b.alternate,b);break;case 24:Ka(f,b,T,C,h),h&&B&2048&&pf(b.alternate,b);break;default:Ka(f,b,T,C,h)}i=i.sibling}}function yl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:yl(a,l),h&2048&&gf(l.alternate,l);break;case 24:yl(a,l),h&2048&&pf(l.alternate,l);break;default:yl(a,l)}i=i.sibling}}var vl=8192;function Ya(t){if(t.subtreeFlags&vl)for(t=t.child;t!==null;)cv(t),t=t.sibling}function cv(t){switch(t.tag){case 26:Ya(t),t.flags&vl&&t.memoizedState!==null&&xS(hr,t.memoizedState,t.memoizedProps);break;case 5:Ya(t);break;case 3:case 4:var i=hr;hr=kc(t.stateNode.containerInfo),Ya(t),hr=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=vl,vl=16777216,Ya(t),vl=i):Ya(t));break;default:Ya(t)}}function hv(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function _l(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Yt=l,fv(l,t)}hv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)dv(t),t=t.sibling}function dv(t){switch(t.tag){case 0:case 11:case 15:_l(t),t.flags&2048&&Hi(9,t,t.return);break;case 3:_l(t);break;case 12:_l(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Ec(t)):_l(t);break;default:_l(t)}}function Ec(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Yt=l,fv(l,t)}hv(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Hi(8,i,i.return),Ec(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ec(i));break;default:Ec(i)}t=t.sibling}}function fv(t,i){for(;Yt!==null;){var a=Yt;switch(a.tag){case 0:case 11:case 15:Hi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:tl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Yt=l;else e:for(a=t;Yt!==null;){l=Yt;var h=l.sibling,f=l.return;if(iv(l),l===a){Yt=null;break e}if(h!==null){h.return=f,Yt=h;break e}Yt=f}}}var q1={getCacheForType:function(t){var i=ln(Ut),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},H1=typeof WeakMap=="function"?WeakMap:Map,Ze=0,lt=null,Me=null,Fe=0,Je=0,Ln=null,Yi=!1,Qa=!1,yf=!1,vi=0,bt=0,Qi=0,ea=0,vf=0,Jn=0,Xa=0,bl=null,In=null,_f=!1,bf=0,Tc=1/0,Sc=null,Xi=null,nn=0,$i=null,$a=null,Za=0,Ef=0,Tf=null,mv=null,El=0,Sf=null;function Un(){if((Ze&2)!==0&&Fe!==0)return Fe&-Fe;if(Q.T!==null){var t=Ua;return t!==0?t:Df()}return Vt()}function gv(){Jn===0&&(Jn=(Fe&536870912)===0||Ke?Rs():536870912);var t=Zn.current;return t!==null&&(t.flags|=32),Jn}function jn(t,i,a){(t===lt&&(Je===2||Je===9)||t.cancelPendingCommit!==null)&&(Ja(t,0),Zi(t,Fe,Jn,!1)),ot(t,a),((Ze&2)===0||t!==lt)&&(t===lt&&((Ze&2)===0&&(ea|=a),bt===4&&Zi(t,Fe,Jn,!1)),Mr(t))}function pv(t,i,a){if((Ze&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||Xr(t,i),h=l?Y1(t,i):Rf(t,i,!0),f=l;do{if(h===0){Qa&&!l&&Zi(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!G1(a)){h=Rf(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var T=t;h=bl;var C=T.current.memoizedState.isDehydrated;if(C&&(Ja(T,b).flags|=256),b=Rf(T,b,!1),b!==2){if(yf&&!C){T.errorRecoveryDisabledLanes|=f,ea|=f,h=4;break e}f=In,In=h,f!==null&&(In===null?In=f:In.push.apply(In,f))}h=b}if(f=!1,h!==2)continue}}if(h===1){Ja(t,0),Zi(t,i,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Zi(l,i,Jn,!Yi);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=bf+300-pn(),10<h)){if(Zi(l,i,Jn,!Yi),Qr(l,0,!0)!==0)break e;l.timeoutHandle=Gv(yv.bind(null,l,a,In,Sc,_f,i,Jn,ea,Xa,Yi,f,2,-0,0),h);break e}yv(l,a,In,Sc,_f,i,Jn,ea,Xa,Yi,f,0,-0,0)}}break}while(!0);Mr(t)}function yv(t,i,a,l,h,f,b,T,C,B,X,W,H,G){if(t.timeoutHandle=-1,W=i.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(Il={stylesheets:null,count:0,unsuspend:RS},cv(i),W=IS(),W!==null)){t.cancelPendingCommit=W(wv.bind(null,t,i,f,a,l,h,b,T,C,X,1,H,G)),Zi(t,f,b,!B);return}wv(t,i,f,a,l,h,b,T,C)}function G1(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!kn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Zi(t,i,a,l){i&=~vf,i&=~ea,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var f=31-yt(h),b=1<<f;l[f]=-1,h&=~b}a!==0&&ht(t,a,i)}function wc(){return(Ze&6)===0?(Tl(0),!1):!0}function wf(){if(Me!==null){if(Je===0)var t=Me.return;else t=Me,ci=Qs=null,zd(t),Ha=null,dl=0,t=Me;for(;t!==null;)$y(t.alternate,t),t=t.return;Me=null}}function Ja(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,uS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),wf(),lt=t,Me=a=oi(t.current,null),Fe=i,Je=0,Ln=null,Yi=!1,Qa=Xr(t,i),yf=!1,Xa=Jn=vf=ea=Qi=bt=0,In=bl=null,_f=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-yt(l),f=1<<h;i|=t[h],l&=~f}return vi=i,Ku(),a}function vv(t,i){De=null,Q.H=hc,i===rl||i===tc?(i=Vp(),Je=3):i===Op?(i=Vp(),Je=4):Je=i===Py?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ln=i,Me===null&&(bt=1,pc(t,Yn(i,t.current)))}function _v(){var t=Q.H;return Q.H=hc,t===null?hc:t}function bv(){var t=Q.A;return Q.A=q1,t}function Af(){bt=4,Yi||(Fe&4194048)!==Fe&&Zn.current!==null||(Qa=!0),(Qi&134217727)===0&&(ea&134217727)===0||lt===null||Zi(lt,Fe,Jn,!1)}function Rf(t,i,a){var l=Ze;Ze|=2;var h=_v(),f=bv();(lt!==t||Fe!==i)&&(Sc=null,Ja(t,i)),i=!1;var b=bt;e:do try{if(Je!==0&&Me!==null){var T=Me,C=Ln;switch(Je){case 8:wf(),b=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(i=!0);var B=Je;if(Je=0,Ln=null,Wa(t,T,C,B),a&&Qa){b=0;break e}break;default:B=Je,Je=0,Ln=null,Wa(t,T,C,B)}}K1(),b=bt;break}catch(X){vv(t,X)}while(!0);return i&&t.shellSuspendCounter++,ci=Qs=null,Ze=l,Q.H=h,Q.A=f,Me===null&&(lt=null,Fe=0,Ku()),b}function K1(){for(;Me!==null;)Ev(Me)}function Y1(t,i){var a=Ze;Ze|=2;var l=_v(),h=bv();lt!==t||Fe!==i?(Sc=null,Tc=pn()+500,Ja(t,i)):Qa=Xr(t,i);e:do try{if(Je!==0&&Me!==null){i=Me;var f=Ln;t:switch(Je){case 1:Je=0,Ln=null,Wa(t,i,f,1);break;case 2:case 9:if(kp(f)){Je=0,Ln=null,Tv(i);break}i=function(){Je!==2&&Je!==9||lt!==t||(Je=7),Mr(t)},f.then(i,i);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:kp(f)?(Je=0,Ln=null,Tv(i)):(Je=0,Ln=null,Wa(t,i,f,7));break;case 5:var b=null;switch(Me.tag){case 26:b=Me.memoizedState;case 5:case 27:var T=Me;if(!b||r0(b)){Je=0,Ln=null;var C=T.sibling;if(C!==null)Me=C;else{var B=T.return;B!==null?(Me=B,Ac(B)):Me=null}break t}}Je=0,Ln=null,Wa(t,i,f,5);break;case 6:Je=0,Ln=null,Wa(t,i,f,6);break;case 8:wf(),bt=6;break e;default:throw Error(s(462))}}Q1();break}catch(X){vv(t,X)}while(!0);return ci=Qs=null,Q.H=l,Q.A=h,Ze=a,Me!==null?0:(lt=null,Fe=0,Ku(),bt)}function Q1(){for(;Me!==null&&!zn();)Ev(Me)}function Ev(t){var i=Qy(t.alternate,t,vi);t.memoizedProps=t.pendingProps,i===null?Ac(t):Me=i}function Tv(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Fy(a,i,i.pendingProps,i.type,void 0,Fe);break;case 11:i=Fy(a,i,i.pendingProps,i.type.render,i.ref,Fe);break;case 5:zd(i);default:$y(a,i),i=Me=Sp(i,vi),i=Qy(a,i,vi)}t.memoizedProps=t.pendingProps,i===null?Ac(t):Me=i}function Wa(t,i,a,l){ci=Qs=null,zd(i),Ha=null,dl=0;var h=i.return;try{if(L1(t,h,i,a,Fe)){bt=1,pc(t,Yn(a,t.current)),Me=null;return}}catch(f){if(h!==null)throw Me=h,f;bt=1,pc(t,Yn(a,t.current)),Me=null;return}i.flags&32768?(Ke||l===1?t=!0:Qa||(Fe&536870912)!==0?t=!1:(Yi=t=!0,(l===2||l===9||l===3||l===6)&&(l=Zn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Sv(i,t)):Ac(i)}function Ac(t){var i=t;do{if((i.flags&32768)!==0){Sv(i,Yi);return}t=i.return;var a=j1(i.alternate,i,vi);if(a!==null){Me=a;return}if(i=i.sibling,i!==null){Me=i;return}Me=i=t}while(i!==null);bt===0&&(bt=5)}function Sv(t,i){do{var a=z1(t.alternate,t);if(a!==null){a.flags&=32767,Me=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Me=t;return}Me=t=a}while(t!==null);bt=6,Me=null}function wv(t,i,a,l,h,f,b,T,C){t.cancelPendingCommit=null;do Rc();while(nn!==0);if((Ze&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=gd,Mt(t,a,f,b,T,C),t===lt&&(Me=lt=null,Fe=0),$a=i,$i=t,Za=a,Ef=f,Tf=h,mv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,J1(Bn,function(){return Cv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=ae.p,ae.p=2,b=Ze,Ze|=4;try{B1(t,i,a)}finally{Ze=b,ae.p=h,Q.T=l}}nn=1,Av(),Rv(),xv()}}function Av(){if(nn===1){nn=0;var t=$i,i=$a,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=ae.p;ae.p=2;var h=Ze;Ze|=4;try{ov(i,t);var f=Uf,b=fp(t.containerInfo),T=f.focusedElem,C=f.selectionRange;if(b!==T&&T&&T.ownerDocument&&dp(T.ownerDocument.documentElement,T)){if(C!==null&&cd(T)){var B=C.start,X=C.end;if(X===void 0&&(X=B),"selectionStart"in T)T.selectionStart=B,T.selectionEnd=Math.min(X,T.value.length);else{var W=T.ownerDocument||document,H=W&&W.defaultView||window;if(H.getSelection){var G=H.getSelection(),Te=T.textContent.length,_e=Math.min(C.start,Te),st=C.end===void 0?_e:Math.min(C.end,Te);!G.extend&&_e>st&&(b=st,st=_e,_e=b);var U=hp(T,_e),P=hp(T,st);if(U&&P&&(G.rangeCount!==1||G.anchorNode!==U.node||G.anchorOffset!==U.offset||G.focusNode!==P.node||G.focusOffset!==P.offset)){var z=W.createRange();z.setStart(U.node,U.offset),G.removeAllRanges(),_e>st?(G.addRange(z),G.extend(P.node,P.offset)):(z.setEnd(P.node,P.offset),G.addRange(z))}}}}for(W=[],G=T;G=G.parentNode;)G.nodeType===1&&W.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<W.length;T++){var J=W[T];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Uc=!!Lf,Uf=Lf=null}finally{Ze=h,ae.p=l,Q.T=a}}t.current=i,nn=2}}function Rv(){if(nn===2){nn=0;var t=$i,i=$a,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=ae.p;ae.p=2;var h=Ze;Ze|=4;try{rv(t,i.alternate,i)}finally{Ze=h,ae.p=l,Q.T=a}}nn=3}}function xv(){if(nn===4||nn===3){nn=0,rr();var t=$i,i=$a,a=Za,l=mv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?nn=5:(nn=0,$a=$i=null,Iv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Xi=null),It(a),i=i.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(ct,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Q.T,h=ae.p,ae.p=2,Q.T=null;try{for(var f=t.onRecoverableError,b=0;b<l.length;b++){var T=l[b];f(T.value,{componentStack:T.stack})}}finally{Q.T=i,ae.p=h}}(Za&3)!==0&&Rc(),Mr(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Sf?El++:(El=0,Sf=t):El=0,Tl(0)}}function Iv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,tl(i)))}function Rc(t){return Av(),Rv(),xv(),Cv()}function Cv(){if(nn!==5)return!1;var t=$i,i=Ef;Ef=0;var a=It(Za),l=Q.T,h=ae.p;try{ae.p=32>a?32:a,Q.T=null,a=Tf,Tf=null;var f=$i,b=Za;if(nn=0,$a=$i=null,Za=0,(Ze&6)!==0)throw Error(s(331));var T=Ze;if(Ze|=4,dv(f.current),uv(f,f.current,b,a),Ze=T,Tl(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(ct,f)}catch{}return!0}finally{ae.p=h,Q.T=l,Iv(t,i)}}function Dv(t,i,a){i=Yn(a,i),i=ef(t.stateNode,i,2),t=zi(t,i,2),t!==null&&(ot(t,2),Mr(t))}function at(t,i,a){if(t.tag===3)Dv(t,t,a);else for(;i!==null;){if(i.tag===3){Dv(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xi===null||!Xi.has(l))){t=Yn(a,t),a=My(2),l=zi(i,a,2),l!==null&&(Vy(a,l,i,t),ot(l,2),Mr(l));break}}i=i.return}}function xf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new H1;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(yf=!0,h.add(a),t=X1.bind(null,t,i,a),i.then(t,t))}function X1(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,lt===t&&(Fe&a)===a&&(bt===4||bt===3&&(Fe&62914560)===Fe&&300>pn()-bf?(Ze&2)===0&&Ja(t,0):vf|=a,Xa===Fe&&(Xa=0)),Mr(t)}function Nv(t,i){i===0&&(i=xs()),t=Ma(t,i),t!==null&&(ot(t,i),Mr(t))}function $1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Nv(t,a)}function Z1(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Nv(t,a)}function J1(t,i){return wn(t,i)}var xc=null,eo=null,If=!1,Ic=!1,Cf=!1,ta=0;function Mr(t){t!==eo&&t.next===null&&(eo===null?xc=eo=t:eo=eo.next=t),Ic=!0,If||(If=!0,eS())}function Tl(t,i){if(!Cf&&Ic){Cf=!0;do for(var a=!1,l=xc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var b=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-yt(42|t)+1)-1,f&=h&~(b&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Vv(l,f))}else f=Fe,f=Qr(l,l===lt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Xr(l,f)||(a=!0,Vv(l,f));l=l.next}while(a);Cf=!1}}function W1(){Ov()}function Ov(){Ic=If=!1;var t=0;ta!==0&&(lS()&&(t=ta),ta=0);for(var i=pn(),a=null,l=xc;l!==null;){var h=l.next,f=kv(l,i);f===0?(l.next=null,a===null?xc=h:a.next=h,h===null&&(eo=a)):(a=l,(t!==0||(f&3)!==0)&&(Ic=!0)),l=h}Tl(t)}function kv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var b=31-yt(f),T=1<<b,C=h[b];C===-1?((T&a)===0||(T&l)!==0)&&(h[b]=Oi(T,i)):C<=i&&(t.expiredLanes|=T),f&=~T}if(i=lt,a=Fe,a=Qr(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Je===2||Je===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Zt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Xr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&Zt(l),It(a)){case 2:case 8:a=yn;break;case 32:a=Bn;break;case 268435456:a=Gr;break;default:a=Bn}return l=Mv.bind(null,t),a=wn(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&Zt(l),t.callbackPriority=2,t.callbackNode=null,2}function Mv(t,i){if(nn!==0&&nn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Rc()&&t.callbackNode!==a)return null;var l=Fe;return l=Qr(t,t===lt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(pv(t,l,i),kv(t,pn()),t.callbackNode!=null&&t.callbackNode===a?Mv.bind(null,t):null)}function Vv(t,i){if(Rc())return null;pv(t,i,!0)}function eS(){cS(function(){(Ze&6)!==0?wn(Hr,W1):Ov()})}function Df(){return ta===0&&(ta=Rs()),ta}function Pv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ta(""+t)}function Lv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function tS(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var f=Pv((h[Ge]||null).action),b=l.submitter;b&&(i=(i=b[Ge]||null)?Pv(i.formAction):b.getAttribute("formAction"),i!==null&&(f=i,b=null));var T=new Sa("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ta!==0){var C=b?Lv(h,b):new FormData(h);Xd(a,{pending:!0,data:C,method:h.method,action:f},null,C)}}else typeof f=="function"&&(T.preventDefault(),C=b?Lv(h,b):new FormData(h),Xd(a,{pending:!0,data:C,method:h.method,action:f},f,C))},currentTarget:h}]})}}for(var Nf=0;Nf<md.length;Nf++){var Of=md[Nf],nS=Of.toLowerCase(),rS=Of[0].toUpperCase()+Of.slice(1);cr(nS,"on"+rS)}cr(pp,"onAnimationEnd"),cr(yp,"onAnimationIteration"),cr(vp,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(b1,"onTransitionRun"),cr(E1,"onTransitionStart"),cr(T1,"onTransitionCancel"),cr(_p,"onTransitionEnd"),Jr("onMouseEnter",["mouseout","mouseover"]),Jr("onMouseLeave",["mouseout","mouseover"]),Jr("onPointerEnter",["pointerout","pointerover"]),Jr("onPointerLeave",["pointerout","pointerover"]),lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function Uv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var b=l.length-1;0<=b;b--){var T=l[b],C=T.instance,B=T.currentTarget;if(T=T.listener,C!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=B;try{f(h)}catch(X){gc(X)}h.currentTarget=null,f=C}else for(b=0;b<l.length;b++){if(T=l[b],C=T.instance,B=T.currentTarget,T=T.listener,C!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=B;try{f(h)}catch(X){gc(X)}h.currentTarget=null,f=C}}}}function Ve(t,i){var a=i[ar];a===void 0&&(a=i[ar]=new Set);var l=t+"__bubble";a.has(l)||(jv(i,t,2,!1),a.add(l))}function kf(t,i,a){var l=0;i&&(l|=4),jv(a,t,l,i)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function Mf(t){if(!t[Cc]){t[Cc]=!0,Vo.forEach(function(a){a!=="selectionchange"&&(iS.has(a)||kf(a,!1,t),kf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Cc]||(i[Cc]=!0,kf("selectionchange",!1,i))}}function jv(t,i,a,l){switch(u0(i)){case 2:var h=NS;break;case 8:h=OS;break;default:h=Qf}a=h.bind(null,i,a,t),h=void 0,!Gn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Vf(t,i,a,l,h){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var T=l.stateNode.containerInfo;if(T===h)break;if(b===4)for(b=l.return;b!==null;){var C=b.tag;if((C===3||C===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;T!==null;){if(b=Zr(T),b===null)return;if(C=b.tag,C===5||C===6||C===26||C===27){l=f=b;continue e}T=T.parentNode}}l=l.return}Nu(function(){var B=f,X=Hn(a),W=[];e:{var H=bp.get(t);if(H!==void 0){var G=Sa,Te=t;switch(t){case"keypress":if(Ar(a)===0)break e;case"keydown":case"keyup":G=Ca;break;case"focusin":Te="focus",G=Ra;break;case"focusout":Te="blur",G=Ra;break;case"beforeblur":case"afterblur":G=Ra;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=ad;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=ju;break;case pp:case yp:case vp:G=xa;break;case _p:G=Bu;break;case"scroll":case"scrollend":G=Ou;break;case"wheel":G=Da;break;case"copy":case"cut":case"paste":G=Ia;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Yo;break;case"toggle":case"beforetoggle":G=qu}var _e=(i&4)!==0,st=!_e&&(t==="scroll"||t==="scrollend"),U=_e?H!==null?H+"Capture":null:H;_e=[];for(var P=B,z;P!==null;){var J=P;if(z=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||z===null||U===null||(J=Ms(P,U),J!=null&&_e.push(wl(P,J,z))),st)break;P=P.return}0<_e.length&&(H=new G(H,Te,null,a,X),W.push({event:H,listeners:_e}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",H&&a!==ti&&(Te=a.relatedTarget||a.fromElement)&&(Zr(Te)||Te[vt]))break e;if((G||H)&&(H=X.window===X?X:(H=X.ownerDocument)?H.defaultView||H.parentWindow:window,G?(Te=a.relatedTarget||a.toElement,G=B,Te=Te?Zr(Te):null,Te!==null&&(st=u(Te),_e=Te.tag,Te!==st||_e!==5&&_e!==27&&_e!==6)&&(Te=null)):(G=null,Te=B),G!==Te)){if(_e=Kn,J="onMouseLeave",U="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(_e=Yo,J="onPointerLeave",U="onPointerEnter",P="pointer"),st=G==null?H:Er(G),z=Te==null?H:Er(Te),H=new _e(J,P+"leave",G,a,X),H.target=st,H.relatedTarget=z,J=null,Zr(X)===B&&(_e=new _e(U,P+"enter",Te,a,X),_e.target=z,_e.relatedTarget=st,J=_e),st=J,G&&Te)t:{for(_e=G,U=Te,P=0,z=_e;z;z=to(z))P++;for(z=0,J=U;J;J=to(J))z++;for(;0<P-z;)_e=to(_e),P--;for(;0<z-P;)U=to(U),z--;for(;P--;){if(_e===U||U!==null&&_e===U.alternate)break t;_e=to(_e),U=to(U)}_e=null}else _e=null;G!==null&&zv(W,H,G,_e,!1),Te!==null&&st!==null&&zv(W,st,Te,_e,!0)}}e:{if(H=B?Er(B):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var de=sp;else if(Lt(H))if(ap)de=y1;else{de=g1;var Oe=m1}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?B&&zo(B.elementType)&&(de=sp):de=p1;if(de&&(de=de(t,B))){ai(W,de,a,X);break e}Oe&&Oe(t,H,B),t==="focusout"&&B&&H.type==="number"&&B.memoizedProps.value!=null&&Vi(H,"number",H.value)}switch(Oe=B?Er(B):window,t){case"focusin":(Lt(Oe)||Oe.contentEditable==="true")&&(Na=Oe,hd=B,$o=null);break;case"focusout":$o=hd=Na=null;break;case"mousedown":dd=!0;break;case"contextmenu":case"mouseup":case"dragend":dd=!1,mp(W,a,X);break;case"selectionchange":if(_1)break;case"keydown":case"keyup":mp(W,a,X)}var ye;if(Ir)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else ze?Y(t,a)&&(be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(v&&a.locale!=="ko"&&(ze||be!=="onCompositionStart"?be==="onCompositionEnd"&&ze&&(ye=Fo()):(wr=X,Pi="value"in wr?wr.value:wr.textContent,ze=!0)),Oe=Dc(B,be),0<Oe.length&&(be=new Go(be,t,null,a,X),W.push({event:be,listeners:Oe}),ye?be.data=ye:(ye=ue(a),ye!==null&&(be.data=ye)))),(ye=p?Pt(t,a):Be(t,a))&&(be=Dc(B,"onBeforeInput"),0<be.length&&(Oe=new Go("onBeforeInput","beforeinput",null,a,X),W.push({event:Oe,listeners:be}),Oe.data=ye)),tS(W,t,B,a,X)}Uv(W,i)})}function wl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Dc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Ms(t,a),h!=null&&l.unshift(wl(t,h,f)),h=Ms(t,i),h!=null&&l.push(wl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function to(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function zv(t,i,a,l,h){for(var f=i._reactName,b=[];a!==null&&a!==l;){var T=a,C=T.alternate,B=T.stateNode;if(T=T.tag,C!==null&&C===l)break;T!==5&&T!==26&&T!==27||B===null||(C=B,h?(B=Ms(a,f),B!=null&&b.unshift(wl(a,B,C))):h||(B=Ms(a,f),B!=null&&b.push(wl(a,B,C)))),a=a.return}b.length!==0&&t.push({event:i,listeners:b})}var sS=/\r\n?/g,aS=/\u0000|\uFFFD/g;function Bv(t){return(typeof t=="string"?t:""+t).replace(sS,`
`).replace(aS,"")}function Fv(t,i){return i=Bv(i),Bv(t)===i}function Nc(){}function it(t,i,a,l,h,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||qn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&qn(t,""+l);break;case"className":Tr(t,"class",l);break;case"tabIndex":Tr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Tr(t,a,l);break;case"style":jo(t,l,f);break;case"data":if(i!=="object"){Tr(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ta(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&it(t,i,"name",h.name,h,null),it(t,i,"formEncType",h.formEncType,h,null),it(t,i,"formMethod",h.formMethod,h,null),it(t,i,"formTarget",h.formTarget,h,null)):(it(t,i,"encType",h.encType,h,null),it(t,i,"method",h.method,h,null),it(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ta(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Nc);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ta(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ve("beforetoggle",t),Ve("toggle",t),Mi(t,"popover",l);break;case"xlinkActuate":Wt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Wt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Wt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Wt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Wt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Wt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Wt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Wt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Wt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Mi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=id.get(a)||a,Mi(t,a,l))}}function Pf(t,i,a,l,h,f){switch(a){case"style":jo(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?qn(t,l):(typeof l=="number"||typeof l=="bigint")&&qn(t,""+l);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Nc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ya.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[Ge]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Mi(t,a,l)}}}function rn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",t),Ve("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:it(t,i,f,b,a,null)}}h&&it(t,i,"srcSet",a.srcSet,a,null),l&&it(t,i,"src",a.src,a,null);return;case"input":Ve("invalid",t);var T=f=b=h=null,C=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":h=X;break;case"type":b=X;break;case"checked":C=X;break;case"defaultChecked":B=X;break;case"value":f=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:it(t,i,l,X,a,null)}}Ns(t,f,T,C,B,b,h,!1),Ea(t);return;case"select":Ve("invalid",t),l=b=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":b=T;break;case"multiple":l=T;default:it(t,i,h,T,a,null)}i=f,a=b,t.multiple=!!l,i!=null?ei(t,!!l,i,!1):a!=null&&ei(t,!!l,a,!0);return;case"textarea":Ve("invalid",t),f=h=l=null;for(b in a)if(a.hasOwnProperty(b)&&(T=a[b],T!=null))switch(b){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:it(t,i,b,T,a,null)}Os(t,l,h,f),Ea(t);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:it(t,i,C,l,a,null)}return;case"dialog":Ve("beforetoggle",t),Ve("toggle",t),Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":Ve("load",t);break;case"video":case"audio":for(l=0;l<Sl.length;l++)Ve(Sl[l],t);break;case"image":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"embed":case"source":case"link":Ve("error",t),Ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:it(t,i,B,l,a,null)}return;default:if(zo(i)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&Pf(t,i,X,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&it(t,i,T,l,a,null))}function oS(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,b=null,T=null,C=null,B=null,X=null;for(G in a){var W=a[G];if(a.hasOwnProperty(G)&&W!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":C=W;default:l.hasOwnProperty(G)||it(t,i,G,null,l,W)}}for(var H in l){var G=l[H];if(W=a[H],l.hasOwnProperty(H)&&(G!=null||W!=null))switch(H){case"type":f=G;break;case"name":h=G;break;case"checked":B=G;break;case"defaultChecked":X=G;break;case"value":b=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:G!==W&&it(t,i,H,G,l,W)}}On(t,b,T,C,B,X,f,h);return;case"select":G=b=T=H=null;for(f in a)if(C=a[f],a.hasOwnProperty(f)&&C!=null)switch(f){case"value":break;case"multiple":G=C;default:l.hasOwnProperty(f)||it(t,i,f,null,l,C)}for(h in l)if(f=l[h],C=a[h],l.hasOwnProperty(h)&&(f!=null||C!=null))switch(h){case"value":H=f;break;case"defaultValue":T=f;break;case"multiple":b=f;default:f!==C&&it(t,i,h,f,l,C)}i=T,a=b,l=G,H!=null?ei(t,!!a,H,!1):!!l!=!!a&&(i!=null?ei(t,!!a,i,!0):ei(t,!!a,a?[]:"",!1));return;case"textarea":G=H=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:it(t,i,T,null,l,h)}for(b in l)if(h=l[b],f=a[b],l.hasOwnProperty(b)&&(h!=null||f!=null))switch(b){case"value":H=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&it(t,i,b,h,l,f)}nt(t,H,G);return;case"option":for(var Te in a)if(H=a[Te],a.hasOwnProperty(Te)&&H!=null&&!l.hasOwnProperty(Te))switch(Te){case"selected":t.selected=!1;break;default:it(t,i,Te,null,l,H)}for(C in l)if(H=l[C],G=a[C],l.hasOwnProperty(C)&&H!==G&&(H!=null||G!=null))switch(C){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:it(t,i,C,H,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)H=a[_e],a.hasOwnProperty(_e)&&H!=null&&!l.hasOwnProperty(_e)&&it(t,i,_e,null,l,H);for(B in l)if(H=l[B],G=a[B],l.hasOwnProperty(B)&&H!==G&&(H!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:it(t,i,B,H,l,G)}return;default:if(zo(i)){for(var st in a)H=a[st],a.hasOwnProperty(st)&&H!==void 0&&!l.hasOwnProperty(st)&&Pf(t,i,st,void 0,l,H);for(X in l)H=l[X],G=a[X],!l.hasOwnProperty(X)||H===G||H===void 0&&G===void 0||Pf(t,i,X,H,l,G);return}}for(var U in a)H=a[U],a.hasOwnProperty(U)&&H!=null&&!l.hasOwnProperty(U)&&it(t,i,U,null,l,H);for(W in l)H=l[W],G=a[W],!l.hasOwnProperty(W)||H===G||H==null&&G==null||it(t,i,W,H,l,G)}var Lf=null,Uf=null;function Oc(t){return t.nodeType===9?t:t.ownerDocument}function qv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function jf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var zf=null;function lS(){var t=window.event;return t&&t.type==="popstate"?t===zf?!1:(zf=t,!0):(zf=null,!1)}var Gv=typeof setTimeout=="function"?setTimeout:void 0,uS=typeof clearTimeout=="function"?clearTimeout:void 0,Kv=typeof Promise=="function"?Promise:void 0,cS=typeof queueMicrotask=="function"?queueMicrotask:typeof Kv<"u"?function(t){return Kv.resolve(null).then(t).catch(hS)}:Gv;function hS(t){setTimeout(function(){throw t})}function Ji(t){return t==="head"}function Yv(t,i){var a=i,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var b=t.ownerDocument;if(a&1&&Al(b.documentElement),a&2&&Al(b.body),a&4)for(a=b.head,Al(a),b=a.firstChild;b;){var T=b.nextSibling,C=b.nodeName;b[or]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=T}}if(h===0){t.removeChild(f),kl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);kl(i)}function Bf(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Bf(a),ki(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function dS(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[or])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=dr(t.nextSibling),t===null)break}return null}function fS(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=dr(t.nextSibling),t===null))return null;return t}function Ff(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function mS(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function dr(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var qf=null;function Qv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function Xv(t,i,a){switch(i=Oc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Al(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ki(t)}var Wn=new Map,$v=new Set;function kc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _i=ae.d;ae.d={f:gS,r:pS,D:yS,C:vS,L:_S,m:bS,X:TS,S:ES,M:SS};function gS(){var t=_i.f(),i=wc();return t||i}function pS(t){var i=br(t);i!==null&&i.tag===5&&i.type==="form"?py(i):_i.r(t)}var no=typeof document>"u"?null:document;function Zv(t,i,a){var l=no;if(l&&typeof i=="string"&&i){var h=Ct(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),$v.has(h)||($v.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),rn(i,"link",t),Tt(i),l.head.appendChild(i)))}}function yS(t){_i.D(t),Zv("dns-prefetch",t,null)}function vS(t,i){_i.C(t,i),Zv("preconnect",t,i)}function _S(t,i,a){_i.L(t,i,a);var l=no;if(l&&t&&i){var h='link[rel="preload"][as="'+Ct(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Ct(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Ct(a.imageSizes)+'"]')):h+='[href="'+Ct(t)+'"]';var f=h;switch(i){case"style":f=ro(t);break;case"script":f=io(t)}Wn.has(f)||(t=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Wn.set(f,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Rl(f))||i==="script"&&l.querySelector(xl(f))||(i=l.createElement("link"),rn(i,"link",t),Tt(i),l.head.appendChild(i)))}}function bS(t,i){_i.m(t,i);var a=no;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Ct(l)+'"][href="'+Ct(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=io(t)}if(!Wn.has(f)&&(t=E({rel:"modulepreload",href:t},i),Wn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(xl(f)))return}l=a.createElement("link"),rn(l,"link",t),Tt(l),a.head.appendChild(l)}}}function ES(t,i,a){_i.S(t,i,a);var l=no;if(l&&t){var h=_n(l).hoistableStyles,f=ro(t);i=i||"default";var b=h.get(f);if(!b){var T={loading:0,preload:null};if(b=l.querySelector(Rl(f)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Wn.get(f))&&Hf(t,a);var C=b=l.createElement("link");Tt(C),rn(C,"link",t),C._p=new Promise(function(B,X){C.onload=B,C.onerror=X}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Mc(b,i,l)}b={type:"stylesheet",instance:b,count:1,state:T},h.set(f,b)}}}function TS(t,i){_i.X(t,i);var a=no;if(a&&t){var l=_n(a).hoistableScripts,h=io(t),f=l.get(h);f||(f=a.querySelector(xl(h)),f||(t=E({src:t,async:!0},i),(i=Wn.get(h))&&Gf(t,i),f=a.createElement("script"),Tt(f),rn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function SS(t,i){_i.M(t,i);var a=no;if(a&&t){var l=_n(a).hoistableScripts,h=io(t),f=l.get(h);f||(f=a.querySelector(xl(h)),f||(t=E({src:t,async:!0,type:"module"},i),(i=Wn.get(h))&&Gf(t,i),f=a.createElement("script"),Tt(f),rn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function Jv(t,i,a,l){var h=(h=pe.current)?kc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ro(a.href),a=_n(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ro(a.href);var f=_n(h).hoistableStyles,b=f.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,b),(f=h.querySelector(Rl(t)))&&!f._p&&(b.instance=f,b.state.loading=5),Wn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(t,a),f||wS(h,t,a,b.state))),i&&l===null)throw Error(s(528,""));return b}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=io(a),a=_n(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function ro(t){return'href="'+Ct(t)+'"'}function Rl(t){return'link[rel="stylesheet"]['+t+"]"}function Wv(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function wS(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),rn(i,"link",a),Tt(i),t.head.appendChild(i))}function io(t){return'[src="'+Ct(t)+'"]'}function xl(t){return"script[async]"+t}function e0(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Ct(a.href)+'"]');if(l)return i.instance=l,Tt(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Tt(l),rn(l,"style",h),Mc(l,a.precedence,t),i.instance=l;case"stylesheet":h=ro(a.href);var f=t.querySelector(Rl(h));if(f)return i.state.loading|=4,i.instance=f,Tt(f),f;l=Wv(a),(h=Wn.get(h))&&Hf(l,h),f=(t.ownerDocument||t).createElement("link"),Tt(f);var b=f;return b._p=new Promise(function(T,C){b.onload=T,b.onerror=C}),rn(f,"link",l),i.state.loading|=4,Mc(f,a.precedence,t),i.instance=f;case"script":return f=io(a.src),(h=t.querySelector(xl(f)))?(i.instance=h,Tt(h),h):(l=a,(h=Wn.get(f))&&(l=E({},a),Gf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Tt(h),rn(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Mc(l,a.precedence,t));return i.instance}function Mc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,b=0;b<l.length;b++){var T=l[b];if(T.dataset.precedence===i)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Hf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Gf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Vc=null;function t0(t,i,a){if(Vc===null){var l=new Map,h=Vc=new Map;h.set(a,l)}else h=Vc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[or]||f[tt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(i)||"";b=t+b;var T=l.get(b);T?T.push(f):l.set(b,[f])}}return l}function n0(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function AS(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function r0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Il=null;function RS(){}function xS(t,i,a){if(Il===null)throw Error(s(475));var l=Il;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=ro(a.href),f=t.querySelector(Rl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Pc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=f,Tt(f);return}f=t.ownerDocument||t,a=Wv(a),(h=Wn.get(h))&&Hf(a,h),f=f.createElement("link"),Tt(f);var b=f;b._p=new Promise(function(T,C){b.onload=T,b.onerror=C}),rn(f,"link",a),i.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Pc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function IS(){if(Il===null)throw Error(s(475));var t=Il;return t.stylesheets&&t.count===0&&Kf(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Kf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Pc(){if(this.count--,this.count===0){if(this.stylesheets)Kf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Lc=null;function Kf(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Lc=new Map,i.forEach(CS,t),Lc=null,Pc.call(t))}function CS(t,i){if(!(i.state.loading&4)){var a=Lc.get(t);if(a)var l=a.get(null);else{a=new Map,Lc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var b=h[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}h=i.instance,b=h.getAttribute("data-precedence"),f=a.get(b)||l,f===l&&a.set(null,h),a.set(b,h),this.count++,l=Pc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Cl={$$typeof:$,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function DS(t,i,a,l,h,f,b,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ir(0),this.hiddenUpdates=ir(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function i0(t,i,a,l,h,f,b,T,C,B,X,W){return t=new DS(t,i,a,b,T,C,B,W),i=1,f===!0&&(i|=24),f=Mn(3,null,null,i),t.current=f,f.stateNode=t,i=Rd(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},Dd(f),t}function s0(t){return t?(t=Va,t):Va}function a0(t,i,a,l,h,f){h=s0(h),l.context===null?l.context=h:l.pendingContext=h,l=ji(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=zi(t,l,i),a!==null&&(jn(a,t,i),sl(a,t,i))}function o0(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Yf(t,i){o0(t,i),(t=t.alternate)&&o0(t,i)}function l0(t){if(t.tag===13){var i=Ma(t,67108864);i!==null&&jn(i,t,67108864),Yf(t,67108864)}}var Uc=!0;function NS(t,i,a,l){var h=Q.T;Q.T=null;var f=ae.p;try{ae.p=2,Qf(t,i,a,l)}finally{ae.p=f,Q.T=h}}function OS(t,i,a,l){var h=Q.T;Q.T=null;var f=ae.p;try{ae.p=8,Qf(t,i,a,l)}finally{ae.p=f,Q.T=h}}function Qf(t,i,a,l){if(Uc){var h=Xf(l);if(h===null)Vf(t,i,l,jc,a),c0(t,l);else if(MS(h,t,i,a,l))l.stopPropagation();else if(c0(t,l),i&4&&-1<kS.indexOf(t)){for(;h!==null;){var f=br(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=vn(f.pendingLanes);if(b!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var C=1<<31-yt(b);T.entanglements[1]|=C,b&=~C}Mr(f),(Ze&6)===0&&(Tc=pn()+500,Tl(0))}}break;case 13:T=Ma(f,2),T!==null&&jn(T,f,2),wc(),Yf(f,2)}if(f=Xf(l),f===null&&Vf(t,i,l,jc,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else Vf(t,i,l,null,a)}}function Xf(t){return t=Hn(t),$f(t)}var jc=null;function $f(t){if(jc=null,t=Zr(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return jc=t,null}function u0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ga()){case Hr:return 2;case yn:return 8;case Bn:case Di:return 32;case Gr:return 268435456;default:return 32}default:return 32}}var Zf=!1,Wi=null,es=null,ts=null,Dl=new Map,Nl=new Map,ns=[],kS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c0(t,i){switch(t){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":Dl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(i.pointerId)}}function Ol(t,i,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},i!==null&&(i=br(i),i!==null&&l0(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function MS(t,i,a,l,h){switch(i){case"focusin":return Wi=Ol(Wi,t,i,a,l,h),!0;case"dragenter":return es=Ol(es,t,i,a,l,h),!0;case"mouseover":return ts=Ol(ts,t,i,a,l,h),!0;case"pointerover":var f=h.pointerId;return Dl.set(f,Ol(Dl.get(f)||null,t,i,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Nl.set(f,Ol(Nl.get(f)||null,t,i,a,l,h)),!0}return!1}function h0(t){var i=Zr(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,sr(t.priority,function(){if(a.tag===13){var l=Un();l=Et(l);var h=Ma(a,l);h!==null&&jn(h,a,l),Yf(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Xf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);ti=l,a.target.dispatchEvent(l),ti=null}else return i=br(a),i!==null&&l0(i),t.blockedOn=a,!1;i.shift()}return!0}function d0(t,i,a){zc(t)&&a.delete(i)}function VS(){Zf=!1,Wi!==null&&zc(Wi)&&(Wi=null),es!==null&&zc(es)&&(es=null),ts!==null&&zc(ts)&&(ts=null),Dl.forEach(d0),Nl.forEach(d0)}function Bc(t,i){t.blockedOn===i&&(t.blockedOn=null,Zf||(Zf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,VS)))}var Fc=null;function f0(t){Fc!==t&&(Fc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Fc===t&&(Fc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if($f(l||a)===null)continue;break}var f=br(a);f!==null&&(t.splice(i,3),i-=3,Xd(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function kl(t){function i(C){return Bc(C,t)}Wi!==null&&Bc(Wi,t),es!==null&&Bc(es,t),ts!==null&&Bc(ts,t),Dl.forEach(i),Nl.forEach(i);for(var a=0;a<ns.length;a++){var l=ns[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ns.length&&(a=ns[0],a.blockedOn===null);)h0(a),a.blockedOn===null&&ns.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],b=h[Ge]||null;if(typeof f=="function")b||f0(a);else if(b){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,b=f[Ge]||null)T=b.formAction;else if($f(h)!==null)continue}else T=b.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),f0(a)}}}function Jf(t){this._internalRoot=t}qc.prototype.render=Jf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Un();a0(a,l,t,i,null,null)},qc.prototype.unmount=Jf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;a0(t.current,2,null,t,null,null),wc(),i[vt]=null}};function qc(t){this._internalRoot=t}qc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Vt();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ns.length&&i!==0&&i<ns[a].priority;a++);ns.splice(a,0,t),a===0&&h0(t)}};var m0=e.version;if(m0!=="19.1.0")throw Error(s(527,m0,"19.1.0"));ae.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var PS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{ct=Hc.inject(PS),Pe=Hc}catch{}}return Vl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Dy,f=Ny,b=Oy,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=i0(t,1,!1,null,null,a,l,h,f,b,T,null),t[vt]=i.current,Mf(t),new Jf(i)},Vl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=Dy,b=Ny,T=Oy,C=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),i=i0(t,1,!0,i,a??null,l,h,f,b,T,C,B),i.context=s0(null),a=i.current,l=Un(),l=Et(l),h=ji(l),h.callback=null,zi(a,h,l),a=l,i.current.lanes=a,ot(i,a),Mr(i),t[vt]=i.current,Mf(t),new qc(i)},Vl.version="19.1.0",Vl}var w0;function KS(){if(w0)return tm.exports;w0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),tm.exports=GS(),tm.exports}var YS=KS();const A0=r=>{let e;const n=new Set,s=(y,E)=>{const _=typeof y=="function"?y(e):y;if(!Object.is(_,e)){const S=e;e=E??(typeof _!="object"||_===null)?_:Object.assign({},e,_),n.forEach(D=>D(e,S))}},o=()=>e,m={setState:s,getState:o,getInitialState:()=>g,subscribe:y=>(n.add(y),()=>n.delete(y))},g=e=r(s,o,m);return m},QS=r=>r?A0(r):A0,XS=r=>r;function $S(r,e=XS){const n=dn.useSyncExternalStore(r.subscribe,()=>e(r.getState()),()=>e(r.getInitialState()));return dn.useDebugValue(n),n}const R0=r=>{const e=QS(r),n=s=>$S(e,s);return Object.assign(n,e),n},yb=r=>r?R0(r):R0;var Pl=pb();function ZS(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return q.useMemo(()=>s=>{e.forEach(o=>o(s))},e)}const Vh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ao(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function Jm(r){return"nodeType"in r}function Nn(r){var e,n;return r?Ao(r)?r:Jm(r)&&(e=(n=r.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Wm(r){const{Document:e}=Nn(r);return r instanceof e}function uu(r){return Ao(r)?!1:r instanceof Nn(r).HTMLElement}function vb(r){return r instanceof Nn(r).SVGElement}function Ro(r){return r?Ao(r)?r.document:Jm(r)?Wm(r)?r:uu(r)||vb(r)?r.ownerDocument:document:document:document}const Fr=Vh?q.useLayoutEffect:q.useEffect;function eg(r){const e=q.useRef(r);return Fr(()=>{e.current=r}),q.useCallback(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e.current==null?void 0:e.current(...s)},[])}function JS(){const r=q.useRef(null),e=q.useCallback((s,o)=>{r.current=setInterval(s,o)},[]),n=q.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[e,n]}function $l(r,e){e===void 0&&(e=[r]);const n=q.useRef(r);return Fr(()=>{n.current!==r&&(n.current=r)},e),n}function cu(r,e){const n=q.useRef();return q.useMemo(()=>{const s=r(n.current);return n.current=s,s},[...e])}function hh(r){const e=eg(r),n=q.useRef(null),s=q.useCallback(o=>{o!==n.current&&(e==null||e(o,n.current)),n.current=o},[]);return[n,s]}function bm(r){const e=q.useRef();return q.useEffect(()=>{e.current=r},[r]),e.current}let sm={};function hu(r,e){return q.useMemo(()=>{if(e)return e;const n=sm[r]==null?0:sm[r]+1;return sm[r]=n,r+"-"+n},[r,e])}function _b(r){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return s.reduce((u,d)=>{const m=Object.entries(d);for(const[g,y]of m){const E=u[g];E!=null&&(u[g]=E+r*y)}return u},{...e})}}const co=_b(1),dh=_b(-1);function WS(r){return"clientX"in r&&"clientY"in r}function tg(r){if(!r)return!1;const{KeyboardEvent:e}=Nn(r.target);return e&&r instanceof e}function ew(r){if(!r)return!1;const{TouchEvent:e}=Nn(r.target);return e&&r instanceof e}function Em(r){if(ew(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:n}=r.touches[0];return{x:e,y:n}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:n}=r.changedTouches[0];return{x:e,y:n}}}return WS(r)?{x:r.clientX,y:r.clientY}:null}const Zl=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:n}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:n}=r;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(r){if(r)return[Zl.Translate.toString(r),Zl.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:n,easing:s}=r;return e+" "+n+"ms "+s}}}),x0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function tw(r){return r.matches(x0)?r:r.querySelector(x0)}const nw={display:"none"};function rw(r){let{id:e,value:n}=r;return dn.createElement("div",{id:e,style:nw},n)}function iw(r){let{id:e,announcement:n,ariaLiveType:s="assertive"}=r;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return dn.createElement("div",{id:e,style:o,role:"status","aria-live":s,"aria-atomic":!0},n)}function sw(){const[r,e]=q.useState("");return{announce:q.useCallback(s=>{s!=null&&e(s)},[]),announcement:r}}const bb=q.createContext(null);function aw(r){const e=q.useContext(bb);q.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function ow(){const[r]=q.useState(()=>new Set),e=q.useCallback(s=>(r.add(s),()=>r.delete(s)),[r]);return[q.useCallback(s=>{let{type:o,event:u}=s;r.forEach(d=>{var m;return(m=d[o])==null?void 0:m.call(d,u)})},[r]),e]}const lw={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},uw={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:n}=r;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:n}=r;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function cw(r){let{announcements:e=uw,container:n,hiddenTextDescribedById:s,screenReaderInstructions:o=lw}=r;const{announce:u,announcement:d}=sw(),m=hu("DndLiveRegion"),[g,y]=q.useState(!1);if(q.useEffect(()=>{y(!0)},[]),aw(q.useMemo(()=>({onDragStart(_){let{active:S}=_;u(e.onDragStart({active:S}))},onDragMove(_){let{active:S,over:D}=_;e.onDragMove&&u(e.onDragMove({active:S,over:D}))},onDragOver(_){let{active:S,over:D}=_;u(e.onDragOver({active:S,over:D}))},onDragEnd(_){let{active:S,over:D}=_;u(e.onDragEnd({active:S,over:D}))},onDragCancel(_){let{active:S,over:D}=_;u(e.onDragCancel({active:S,over:D}))}}),[u,e])),!g)return null;const E=dn.createElement(dn.Fragment,null,dn.createElement(rw,{id:s,value:o.draggable}),dn.createElement(iw,{id:m,announcement:d}));return n?Pl.createPortal(E,n):E}var zt;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(zt||(zt={}));function fh(){}function hw(r,e){return q.useMemo(()=>({sensor:r,options:e??{}}),[r,e])}function dw(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return q.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const pr=Object.freeze({x:0,y:0});function fw(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function mw(r,e){let{data:{value:n}}=r,{data:{value:s}}=e;return n-s}function gw(r,e){let{data:{value:n}}=r,{data:{value:s}}=e;return s-n}function pw(r,e){if(!r||r.length===0)return null;const[n]=r;return n[e]}function I0(r,e,n){return e===void 0&&(e=r.left),n===void 0&&(n=r.top),{x:e+r.width*.5,y:n+r.height*.5}}const yw=r=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=r;const o=I0(e,e.left,e.top),u=[];for(const d of s){const{id:m}=d,g=n.get(m);if(g){const y=fw(I0(g),o);u.push({id:m,data:{droppableContainer:d,value:y}})}}return u.sort(mw)};function vw(r,e){const n=Math.max(e.top,r.top),s=Math.max(e.left,r.left),o=Math.min(e.left+e.width,r.left+r.width),u=Math.min(e.top+e.height,r.top+r.height),d=o-s,m=u-n;if(s<o&&n<u){const g=e.width*e.height,y=r.width*r.height,E=d*m,_=E/(g+y-E);return Number(_.toFixed(4))}return 0}const _w=r=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=r;const o=[];for(const u of s){const{id:d}=u,m=n.get(d);if(m){const g=vw(m,e);g>0&&o.push({id:d,data:{droppableContainer:u,value:g}})}}return o.sort(gw)};function bw(r,e,n){return{...r,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Eb(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:pr}function Ew(r){return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.reduce((d,m)=>({...d,top:d.top+r*m.y,bottom:d.bottom+r*m.y,left:d.left+r*m.x,right:d.right+r*m.x}),{...n})}}const Tw=Ew(1);function Sw(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function ww(r,e,n){const s=Sw(e);if(!s)return r;const{scaleX:o,scaleY:u,x:d,y:m}=s,g=r.left-d-(1-o)*parseFloat(n),y=r.top-m-(1-u)*parseFloat(n.slice(n.indexOf(" ")+1)),E=o?r.width/o:r.width,_=u?r.height/u:r.height;return{width:E,height:_,top:y,right:g+E,bottom:y+_,left:g}}const Aw={ignoreTransform:!1};function xo(r,e){e===void 0&&(e=Aw);let n=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:y,transformOrigin:E}=Nn(r).getComputedStyle(r);y&&(n=ww(n,y,E))}const{top:s,left:o,width:u,height:d,bottom:m,right:g}=n;return{top:s,left:o,width:u,height:d,bottom:m,right:g}}function C0(r){return xo(r,{ignoreTransform:!0})}function Rw(r){const e=r.innerWidth,n=r.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function xw(r,e){return e===void 0&&(e=Nn(r).getComputedStyle(r)),e.position==="fixed"}function Iw(r,e){e===void 0&&(e=Nn(r).getComputedStyle(r));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=e[o];return typeof u=="string"?n.test(u):!1})}function ng(r,e){const n=[];function s(o){if(e!=null&&n.length>=e||!o)return n;if(Wm(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!uu(o)||vb(o)||n.includes(o))return n;const u=Nn(r).getComputedStyle(o);return o!==r&&Iw(o,u)&&n.push(o),xw(o,u)?n:s(o.parentNode)}return r?s(r):n}function Tb(r){const[e]=ng(r,1);return e??null}function am(r){return!Vh||!r?null:Ao(r)?r:Jm(r)?Wm(r)||r===Ro(r).scrollingElement?window:uu(r)?r:null:null}function Sb(r){return Ao(r)?r.scrollX:r.scrollLeft}function wb(r){return Ao(r)?r.scrollY:r.scrollTop}function Tm(r){return{x:Sb(r),y:wb(r)}}var $t;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})($t||($t={}));function Ab(r){return!Vh||!r?!1:r===document.scrollingElement}function Rb(r){const e={x:0,y:0},n=Ab(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},s={x:r.scrollWidth-n.width,y:r.scrollHeight-n.height},o=r.scrollTop<=e.y,u=r.scrollLeft<=e.x,d=r.scrollTop>=s.y,m=r.scrollLeft>=s.x;return{isTop:o,isLeft:u,isBottom:d,isRight:m,maxScroll:s,minScroll:e}}const Cw={x:.2,y:.2};function Dw(r,e,n,s,o){let{top:u,left:d,right:m,bottom:g}=n;s===void 0&&(s=10),o===void 0&&(o=Cw);const{isTop:y,isBottom:E,isLeft:_,isRight:S}=Rb(r),D={x:0,y:0},F={x:0,y:0},K={height:e.height*o.y,width:e.width*o.x};return!y&&u<=e.top+K.height?(D.y=$t.Backward,F.y=s*Math.abs((e.top+K.height-u)/K.height)):!E&&g>=e.bottom-K.height&&(D.y=$t.Forward,F.y=s*Math.abs((e.bottom-K.height-g)/K.height)),!S&&m>=e.right-K.width?(D.x=$t.Forward,F.x=s*Math.abs((e.right-K.width-m)/K.width)):!_&&d<=e.left+K.width&&(D.x=$t.Backward,F.x=s*Math.abs((e.left+K.width-d)/K.width)),{direction:D,speed:F}}function Nw(r){if(r===document.scrollingElement){const{innerWidth:u,innerHeight:d}=window;return{top:0,left:0,right:u,bottom:d,width:u,height:d}}const{top:e,left:n,right:s,bottom:o}=r.getBoundingClientRect();return{top:e,left:n,right:s,bottom:o,width:r.clientWidth,height:r.clientHeight}}function xb(r){return r.reduce((e,n)=>co(e,Tm(n)),pr)}function Ow(r){return r.reduce((e,n)=>e+Sb(n),0)}function kw(r){return r.reduce((e,n)=>e+wb(n),0)}function Mw(r,e){if(e===void 0&&(e=xo),!r)return;const{top:n,left:s,bottom:o,right:u}=e(r);Tb(r)&&(o<=0||u<=0||n>=window.innerHeight||s>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const Vw=[["x",["left","right"],Ow],["y",["top","bottom"],kw]];class rg{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=ng(n),o=xb(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[u,d,m]of Vw)for(const g of d)Object.defineProperty(this,g,{get:()=>{const y=m(s),E=o[u]-y;return this.rect[g]+E},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Bl{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var o;(o=this.target)==null||o.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function Pw(r){const{EventTarget:e}=Nn(r);return r instanceof e?r:Ro(r)}function om(r,e){const n=Math.abs(r.x),s=Math.abs(r.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var er;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(er||(er={}));function D0(r){r.preventDefault()}function Lw(r){r.stopPropagation()}var Ye;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(Ye||(Ye={}));const Ib={start:[Ye.Space,Ye.Enter],cancel:[Ye.Esc],end:[Ye.Space,Ye.Enter,Ye.Tab]},Uw=(r,e)=>{let{currentCoordinates:n}=e;switch(r.code){case Ye.Right:return{...n,x:n.x+25};case Ye.Left:return{...n,x:n.x-25};case Ye.Down:return{...n,y:n.y+25};case Ye.Up:return{...n,y:n.y-25}}};class Cb{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Bl(Ro(n)),this.windowListeners=new Bl(Nn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(er.Resize,this.handleCancel),this.windowListeners.add(er.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(er.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&Mw(s),n(pr)}handleKeyDown(e){if(tg(e)){const{active:n,context:s,options:o}=this.props,{keyboardCodes:u=Ib,coordinateGetter:d=Uw,scrollBehavior:m="smooth"}=o,{code:g}=e;if(u.end.includes(g)){this.handleEnd(e);return}if(u.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:y}=s.current,E=y?{x:y.left,y:y.top}:pr;this.referenceCoordinates||(this.referenceCoordinates=E);const _=d(e,{active:n,context:s.current,currentCoordinates:E});if(_){const S=dh(_,E),D={x:0,y:0},{scrollableAncestors:F}=s.current;for(const K of F){const O=e.code,{isTop:Z,isRight:re,isLeft:$,isBottom:le,maxScroll:se,minScroll:ce}=Rb(K),N=Nw(K),A={x:Math.min(O===Ye.Right?N.right-N.width/2:N.right,Math.max(O===Ye.Right?N.left:N.left+N.width/2,_.x)),y:Math.min(O===Ye.Down?N.bottom-N.height/2:N.bottom,Math.max(O===Ye.Down?N.top:N.top+N.height/2,_.y))},R=O===Ye.Right&&!re||O===Ye.Left&&!$,M=O===Ye.Down&&!le||O===Ye.Up&&!Z;if(R&&A.x!==_.x){const V=K.scrollLeft+S.x,L=O===Ye.Right&&V<=se.x||O===Ye.Left&&V>=ce.x;if(L&&!S.y){K.scrollTo({left:V,behavior:m});return}L?D.x=K.scrollLeft-V:D.x=O===Ye.Right?K.scrollLeft-se.x:K.scrollLeft-ce.x,D.x&&K.scrollBy({left:-D.x,behavior:m});break}else if(M&&A.y!==_.y){const V=K.scrollTop+S.y,L=O===Ye.Down&&V<=se.y||O===Ye.Up&&V>=ce.y;if(L&&!S.x){K.scrollTo({top:V,behavior:m});return}L?D.y=K.scrollTop-V:D.y=O===Ye.Down?K.scrollTop-se.y:K.scrollTop-ce.y,D.y&&K.scrollBy({top:-D.y,behavior:m});break}}this.handleMove(e,co(dh(_,this.referenceCoordinates),D))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Cb.activators=[{eventName:"onKeyDown",handler:(r,e,n)=>{let{keyboardCodes:s=Ib,onActivation:o}=e,{active:u}=n;const{code:d}=r.nativeEvent;if(s.start.includes(d)){const m=u.activatorNode.current;return m&&r.target!==m?!1:(r.preventDefault(),o==null||o({event:r.nativeEvent}),!0)}return!1}}];function N0(r){return!!(r&&"distance"in r)}function O0(r){return!!(r&&"delay"in r)}class ig{constructor(e,n,s){var o;s===void 0&&(s=Pw(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:u}=e,{target:d}=u;this.props=e,this.events=n,this.document=Ro(d),this.documentListeners=new Bl(this.document),this.listeners=new Bl(s),this.windowListeners=new Bl(Nn(d)),this.initialCoordinates=(o=Em(u))!=null?o:pr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(er.Resize,this.handleCancel),this.windowListeners.add(er.DragStart,D0),this.windowListeners.add(er.VisibilityChange,this.handleCancel),this.windowListeners.add(er.ContextMenu,D0),this.documentListeners.add(er.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(O0(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(N0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:s,onPending:o}=this.props;o(s,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(er.Click,Lw,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(er.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:o,props:u}=this,{onMove:d,options:{activationConstraint:m}}=u;if(!o)return;const g=(n=Em(e))!=null?n:pr,y=dh(o,g);if(!s&&m){if(N0(m)){if(m.tolerance!=null&&om(y,m.tolerance))return this.handleCancel();if(om(y,m.distance))return this.handleStart()}if(O0(m)&&om(y,m.tolerance))return this.handleCancel();this.handlePending(m,y);return}e.cancelable&&e.preventDefault(),d(g)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Ye.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const jw={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class sg extends ig{constructor(e){const{event:n}=e,s=Ro(n.target);super(e,jw,s)}}sg.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:n}=r,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const zw={move:{name:"mousemove"},end:{name:"mouseup"}};var Sm;(function(r){r[r.RightClick=2]="RightClick"})(Sm||(Sm={}));class Bw extends ig{constructor(e){super(e,zw,Ro(e.event.target))}}Bw.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:n}=r,{onActivation:s}=e;return n.button===Sm.RightClick?!1:(s==null||s({event:n}),!0)}}];const lm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Fw extends ig{constructor(e){super(e,lm)}static setup(){return window.addEventListener(lm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(lm.move.name,e)};function e(){}}}Fw.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:n}=r,{onActivation:s}=e;const{touches:o}=n;return o.length>1?!1:(s==null||s({event:n}),!0)}}];var Fl;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(Fl||(Fl={}));var mh;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(mh||(mh={}));function qw(r){let{acceleration:e,activator:n=Fl.Pointer,canScroll:s,draggingRect:o,enabled:u,interval:d=5,order:m=mh.TreeOrder,pointerCoordinates:g,scrollableAncestors:y,scrollableAncestorRects:E,delta:_,threshold:S}=r;const D=Gw({delta:_,disabled:!u}),[F,K]=JS(),O=q.useRef({x:0,y:0}),Z=q.useRef({x:0,y:0}),re=q.useMemo(()=>{switch(n){case Fl.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Fl.DraggableRect:return o}},[n,o,g]),$=q.useRef(null),le=q.useCallback(()=>{const ce=$.current;if(!ce)return;const N=O.current.x*Z.current.x,A=O.current.y*Z.current.y;ce.scrollBy(N,A)},[]),se=q.useMemo(()=>m===mh.TreeOrder?[...y].reverse():y,[m,y]);q.useEffect(()=>{if(!u||!y.length||!re){K();return}for(const ce of se){if((s==null?void 0:s(ce))===!1)continue;const N=y.indexOf(ce),A=E[N];if(!A)continue;const{direction:R,speed:M}=Dw(ce,A,re,e,S);for(const V of["x","y"])D[V][R[V]]||(M[V]=0,R[V]=0);if(M.x>0||M.y>0){K(),$.current=ce,F(le,d),O.current=M,Z.current=R;return}}O.current={x:0,y:0},Z.current={x:0,y:0},K()},[e,le,s,K,u,d,JSON.stringify(re),JSON.stringify(D),F,y,se,E,JSON.stringify(S)])}const Hw={x:{[$t.Backward]:!1,[$t.Forward]:!1},y:{[$t.Backward]:!1,[$t.Forward]:!1}};function Gw(r){let{delta:e,disabled:n}=r;const s=bm(e);return cu(o=>{if(n||!s||!o)return Hw;const u={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[$t.Backward]:o.x[$t.Backward]||u.x===-1,[$t.Forward]:o.x[$t.Forward]||u.x===1},y:{[$t.Backward]:o.y[$t.Backward]||u.y===-1,[$t.Forward]:o.y[$t.Forward]||u.y===1}}},[n,e,s])}function Kw(r,e){const n=e!=null?r.get(e):void 0,s=n?n.node.current:null;return cu(o=>{var u;return e==null?null:(u=s??o)!=null?u:null},[s,e])}function Yw(r,e){return q.useMemo(()=>r.reduce((n,s)=>{const{sensor:o}=s,u=o.activators.map(d=>({eventName:d.eventName,handler:e(d.handler,s)}));return[...n,...u]},[]),[r,e])}var Jl;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Jl||(Jl={}));var wm;(function(r){r.Optimized="optimized"})(wm||(wm={}));const k0=new Map;function Qw(r,e){let{dragging:n,dependencies:s,config:o}=e;const[u,d]=q.useState(null),{frequency:m,measure:g,strategy:y}=o,E=q.useRef(r),_=O(),S=$l(_),D=q.useCallback(function(Z){Z===void 0&&(Z=[]),!S.current&&d(re=>re===null?Z:re.concat(Z.filter($=>!re.includes($))))},[S]),F=q.useRef(null),K=cu(Z=>{if(_&&!n)return k0;if(!Z||Z===k0||E.current!==r||u!=null){const re=new Map;for(let $ of r){if(!$)continue;if(u&&u.length>0&&!u.includes($.id)&&$.rect.current){re.set($.id,$.rect.current);continue}const le=$.node.current,se=le?new rg(g(le),le):null;$.rect.current=se,se&&re.set($.id,se)}return re}return Z},[r,u,n,_,g]);return q.useEffect(()=>{E.current=r},[r]),q.useEffect(()=>{_||D()},[n,_]),q.useEffect(()=>{u&&u.length>0&&d(null)},[JSON.stringify(u)]),q.useEffect(()=>{_||typeof m!="number"||F.current!==null||(F.current=setTimeout(()=>{D(),F.current=null},m))},[m,_,D,...s]),{droppableRects:K,measureDroppableContainers:D,measuringScheduled:u!=null};function O(){switch(y){case Jl.Always:return!1;case Jl.BeforeDragging:return n;default:return!n}}}function Db(r,e){return cu(n=>r?n||(typeof e=="function"?e(r):r):null,[e,r])}function Xw(r,e){return Db(r,e)}function $w(r){let{callback:e,disabled:n}=r;const s=eg(e),o=q.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(s)},[s,n]);return q.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Ph(r){let{callback:e,disabled:n}=r;const s=eg(e),o=q.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(s)},[n]);return q.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Zw(r){return new rg(xo(r),r)}function M0(r,e,n){e===void 0&&(e=Zw);const[s,o]=q.useState(null);function u(){o(g=>{if(!r)return null;if(r.isConnected===!1){var y;return(y=g??n)!=null?y:null}const E=e(r);return JSON.stringify(g)===JSON.stringify(E)?g:E})}const d=$w({callback(g){if(r)for(const y of g){const{type:E,target:_}=y;if(E==="childList"&&_ instanceof HTMLElement&&_.contains(r)){u();break}}}}),m=Ph({callback:u});return Fr(()=>{u(),r?(m==null||m.observe(r),d==null||d.observe(document.body,{childList:!0,subtree:!0})):(m==null||m.disconnect(),d==null||d.disconnect())},[r]),s}function Jw(r){const e=Db(r);return Eb(r,e)}const V0=[];function Ww(r){const e=q.useRef(r),n=cu(s=>r?s&&s!==V0&&r&&e.current&&r.parentNode===e.current.parentNode?s:ng(r):V0,[r]);return q.useEffect(()=>{e.current=r},[r]),n}function eA(r){const[e,n]=q.useState(null),s=q.useRef(r),o=q.useCallback(u=>{const d=am(u.target);d&&n(m=>m?(m.set(d,Tm(d)),new Map(m)):null)},[]);return q.useEffect(()=>{const u=s.current;if(r!==u){d(u);const m=r.map(g=>{const y=am(g);return y?(y.addEventListener("scroll",o,{passive:!0}),[y,Tm(y)]):null}).filter(g=>g!=null);n(m.length?new Map(m):null),s.current=r}return()=>{d(r),d(u)};function d(m){m.forEach(g=>{const y=am(g);y==null||y.removeEventListener("scroll",o)})}},[o,r]),q.useMemo(()=>r.length?e?Array.from(e.values()).reduce((u,d)=>co(u,d),pr):xb(r):pr,[r,e])}function P0(r,e){e===void 0&&(e=[]);const n=q.useRef(null);return q.useEffect(()=>{n.current=null},e),q.useEffect(()=>{const s=r!==pr;s&&!n.current&&(n.current=r),!s&&n.current&&(n.current=null)},[r]),n.current?dh(r,n.current):pr}function tA(r){q.useEffect(()=>{if(!Vh)return;const e=r.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n==null||n()}},r.map(e=>{let{sensor:n}=e;return n}))}function nA(r,e){return q.useMemo(()=>r.reduce((n,s)=>{let{eventName:o,handler:u}=s;return n[o]=d=>{u(d,e)},n},{}),[r,e])}function Nb(r){return q.useMemo(()=>r?Rw(r):null,[r])}const L0=[];function rA(r,e){e===void 0&&(e=xo);const[n]=r,s=Nb(n?Nn(n):null),[o,u]=q.useState(L0);function d(){u(()=>r.length?r.map(g=>Ab(g)?s:new rg(e(g),g)):L0)}const m=Ph({callback:d});return Fr(()=>{m==null||m.disconnect(),d(),r.forEach(g=>m==null?void 0:m.observe(g))},[r]),o}function iA(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return uu(e)?e:r}function sA(r){let{measure:e}=r;const[n,s]=q.useState(null),o=q.useCallback(y=>{for(const{target:E}of y)if(uu(E)){s(_=>{const S=e(E);return _?{..._,width:S.width,height:S.height}:S});break}},[e]),u=Ph({callback:o}),d=q.useCallback(y=>{const E=iA(y);u==null||u.disconnect(),E&&(u==null||u.observe(E)),s(E?e(E):null)},[e,u]),[m,g]=hh(d);return q.useMemo(()=>({nodeRef:m,rect:n,setRef:g}),[n,m,g])}const aA=[{sensor:sg,options:{}},{sensor:Cb,options:{}}],oA={current:{}},eh={draggable:{measure:C0},droppable:{measure:C0,strategy:Jl.WhileDragging,frequency:wm.Optimized},dragOverlay:{measure:xo}};class ql extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const lA={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ql,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:fh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:eh,measureDroppableContainers:fh,windowRect:null,measuringScheduled:!1},uA={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:fh,draggableNodes:new Map,over:null,measureDroppableContainers:fh},Lh=q.createContext(uA),Ob=q.createContext(lA);function cA(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ql}}}function hA(r,e){switch(e.type){case zt.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case zt.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}};case zt.DragEnd:case zt.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case zt.RegisterDroppable:{const{element:n}=e,{id:s}=n,o=new ql(r.droppable.containers);return o.set(s,n),{...r,droppable:{...r.droppable,containers:o}}}case zt.SetDroppableDisabled:{const{id:n,key:s,disabled:o}=e,u=r.droppable.containers.get(n);if(!u||s!==u.key)return r;const d=new ql(r.droppable.containers);return d.set(n,{...u,disabled:o}),{...r,droppable:{...r.droppable,containers:d}}}case zt.UnregisterDroppable:{const{id:n,key:s}=e,o=r.droppable.containers.get(n);if(!o||s!==o.key)return r;const u=new ql(r.droppable.containers);return u.delete(n),{...r,droppable:{...r.droppable,containers:u}}}default:return r}}function dA(r){let{disabled:e}=r;const{active:n,activatorEvent:s,draggableNodes:o}=q.useContext(Lh),u=bm(s),d=bm(n==null?void 0:n.id);return q.useEffect(()=>{if(!e&&!s&&u&&d!=null){if(!tg(u)||document.activeElement===u.target)return;const m=o.get(d);if(!m)return;const{activatorNode:g,node:y}=m;if(!g.current&&!y.current)return;requestAnimationFrame(()=>{for(const E of[g.current,y.current]){if(!E)continue;const _=tw(E);if(_){_.focus();break}}})}},[s,e,o,d,u]),null}function fA(r,e){let{transform:n,...s}=e;return r!=null&&r.length?r.reduce((o,u)=>u({transform:o,...s}),n):n}function mA(r){return q.useMemo(()=>({draggable:{...eh.draggable,...r==null?void 0:r.draggable},droppable:{...eh.droppable,...r==null?void 0:r.droppable},dragOverlay:{...eh.dragOverlay,...r==null?void 0:r.dragOverlay}}),[r==null?void 0:r.draggable,r==null?void 0:r.droppable,r==null?void 0:r.dragOverlay])}function gA(r){let{activeNode:e,measure:n,initialRect:s,config:o=!0}=r;const u=q.useRef(!1),{x:d,y:m}=typeof o=="boolean"?{x:o,y:o}:o;Fr(()=>{if(!d&&!m||!e){u.current=!1;return}if(u.current||!s)return;const y=e==null?void 0:e.node.current;if(!y||y.isConnected===!1)return;const E=n(y),_=Eb(E,s);if(d||(_.x=0),m||(_.y=0),u.current=!0,Math.abs(_.x)>0||Math.abs(_.y)>0){const S=Tb(y);S&&S.scrollBy({top:_.y,left:_.x})}},[e,d,m,s,n])}const kb=q.createContext({...pr,scaleX:1,scaleY:1});var ss;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(ss||(ss={}));const pA=q.memo(function(e){var n,s,o,u;let{id:d,accessibility:m,autoScroll:g=!0,children:y,sensors:E=aA,collisionDetection:_=_w,measuring:S,modifiers:D,...F}=e;const K=q.useReducer(hA,void 0,cA),[O,Z]=K,[re,$]=ow(),[le,se]=q.useState(ss.Uninitialized),ce=le===ss.Initialized,{draggable:{active:N,nodes:A,translate:R},droppable:{containers:M}}=O,V=N!=null?A.get(N):null,L=q.useRef({initial:null,translated:null}),I=q.useMemo(()=>{var ot;return N!=null?{id:N,data:(ot=V==null?void 0:V.data)!=null?ot:oA,rect:L}:null},[N,V]),We=q.useRef(null),[et,Q]=q.useState(null),[ae,ge]=q.useState(null),Ie=$l(F,Object.values(F)),k=hu("DndDescribedBy",d),te=q.useMemo(()=>M.getEnabled(),[M]),oe=mA(S),{droppableRects:ie,measureDroppableContainers:me,measuringScheduled:Ae}=Qw(te,{dragging:ce,dependencies:[R.x,R.y],config:oe.droppable}),pe=Kw(A,N),mt=q.useMemo(()=>ae?Em(ae):null,[ae]),je=ir(),Rt=Xw(pe,oe.draggable.measure);gA({activeNode:N!=null?A.get(N):null,config:je.layoutShiftCompensation,initialRect:Rt,measure:oe.draggable.measure});const ke=M0(pe,oe.draggable.measure,Rt),gn=M0(pe?pe.parentElement:null),qt=q.useRef({activatorEvent:null,active:null,activeNode:pe,collisionRect:null,collisions:null,droppableRects:ie,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),wn=M.getNodeFor((n=qt.current.over)==null?void 0:n.id),Zt=sA({measure:oe.dragOverlay.measure}),zn=(s=Zt.nodeRef.current)!=null?s:pe,rr=ce?(o=Zt.rect)!=null?o:ke:null,pn=!!(Zt.nodeRef.current&&Zt.rect),ga=Jw(pn?null:ke),Hr=Nb(zn?Nn(zn):null),yn=Ww(ce?wn??pe:null),Bn=rA(yn),Di=fA(D,{transform:{x:R.x-ga.x,y:R.y-ga.y,scaleX:1,scaleY:1},activatorEvent:ae,active:I,activeNodeRect:ke,containerNodeRect:gn,draggingNodeRect:rr,over:qt.current.over,overlayNodeRect:Zt.rect,scrollableAncestors:yn,scrollableAncestorRects:Bn,windowRect:Hr}),Gr=mt?co(mt,R):null,Ni=eA(yn),pa=P0(Ni),ct=P0(Ni,[ke]),Pe=co(Di,pa),xt=rr?Tw(rr,Di):null,yt=I&&xt?_({active:I,collisionRect:xt,droppableRects:ie,droppableContainers:te,pointerCoordinates:Gr}):null,As=pw(yt,"id"),[Fn,vr]=q.useState(null),Kr=pn?Di:co(Di,ct),Yr=bw(Kr,(u=Fn==null?void 0:Fn.rect)!=null?u:null,ke),vn=q.useRef(null),Qr=q.useCallback((ot,Mt)=>{let{sensor:ht,options:An}=Mt;if(We.current==null)return;const Et=A.get(We.current);if(!Et)return;const It=ot.nativeEvent,Vt=new ht({active:We.current,activeNode:Et,event:It,options:An,context:qt,onAbort(xe){if(!A.get(xe))return;const{onDragAbort:Ge}=Ie.current,vt={id:xe};Ge==null||Ge(vt),re({type:"onDragAbort",event:vt})},onPending(xe,tt,Ge,vt){if(!A.get(xe))return;const{onDragPending:$r}=Ie.current,Jt={id:xe,constraint:tt,initialCoordinates:Ge,offset:vt};$r==null||$r(Jt),re({type:"onDragPending",event:Jt})},onStart(xe){const tt=We.current;if(tt==null)return;const Ge=A.get(tt);if(!Ge)return;const{onDragStart:vt}=Ie.current,ar={activatorEvent:It,active:{id:tt,data:Ge.data,rect:L}};Pl.unstable_batchedUpdates(()=>{vt==null||vt(ar),se(ss.Initializing),Z({type:zt.DragStart,initialCoordinates:xe,active:tt}),re({type:"onDragStart",event:ar}),Q(vn.current),ge(It)})},onMove(xe){Z({type:zt.DragMove,coordinates:xe})},onEnd:sr(zt.DragEnd),onCancel:sr(zt.DragCancel)});vn.current=Vt;function sr(xe){return async function(){const{active:Ge,collisions:vt,over:ar,scrollAdjustedTranslate:$r}=qt.current;let Jt=null;if(Ge&&$r){const{cancelDrop:_r}=Ie.current;Jt={activatorEvent:It,active:Ge,collisions:vt,delta:$r,over:ar},xe===zt.DragEnd&&typeof _r=="function"&&await Promise.resolve(_r(Jt))&&(xe=zt.DragCancel)}We.current=null,Pl.unstable_batchedUpdates(()=>{Z({type:xe}),se(ss.Uninitialized),vr(null),Q(null),ge(null),vn.current=null;const _r=xe===zt.DragEnd?"onDragEnd":"onDragCancel";if(Jt){const or=Ie.current[_r];or==null||or(Jt),re({type:_r,event:Jt})}})}}},[A]),Xr=q.useCallback((ot,Mt)=>(ht,An)=>{const Et=ht.nativeEvent,It=A.get(An);if(We.current!==null||!It||Et.dndKit||Et.defaultPrevented)return;const Vt={active:It};ot(ht,Mt.options,Vt)===!0&&(Et.dndKit={capturedBy:Mt.sensor},We.current=An,Qr(ht,Mt))},[A,Qr]),Oi=Yw(E,Xr);tA(E),Fr(()=>{ke&&le===ss.Initializing&&se(ss.Initialized)},[ke,le]),q.useEffect(()=>{const{onDragMove:ot}=Ie.current,{active:Mt,activatorEvent:ht,collisions:An,over:Et}=qt.current;if(!Mt||!ht)return;const It={active:Mt,activatorEvent:ht,collisions:An,delta:{x:Pe.x,y:Pe.y},over:Et};Pl.unstable_batchedUpdates(()=>{ot==null||ot(It),re({type:"onDragMove",event:It})})},[Pe.x,Pe.y]),q.useEffect(()=>{const{active:ot,activatorEvent:Mt,collisions:ht,droppableContainers:An,scrollAdjustedTranslate:Et}=qt.current;if(!ot||We.current==null||!Mt||!Et)return;const{onDragOver:It}=Ie.current,Vt=An.get(As),sr=Vt&&Vt.rect.current?{id:Vt.id,rect:Vt.rect.current,data:Vt.data,disabled:Vt.disabled}:null,xe={active:ot,activatorEvent:Mt,collisions:ht,delta:{x:Et.x,y:Et.y},over:sr};Pl.unstable_batchedUpdates(()=>{vr(sr),It==null||It(xe),re({type:"onDragOver",event:xe})})},[As]),Fr(()=>{qt.current={activatorEvent:ae,active:I,activeNode:pe,collisionRect:xt,collisions:yt,droppableRects:ie,draggableNodes:A,draggingNode:zn,draggingNodeRect:rr,droppableContainers:M,over:Fn,scrollableAncestors:yn,scrollAdjustedTranslate:Pe},L.current={initial:rr,translated:xt}},[I,pe,yt,xt,A,zn,rr,ie,M,Fn,yn,Pe]),qw({...je,delta:R,draggingRect:xt,pointerCoordinates:Gr,scrollableAncestors:yn,scrollableAncestorRects:Bn});const Rs=q.useMemo(()=>({active:I,activeNode:pe,activeNodeRect:ke,activatorEvent:ae,collisions:yt,containerNodeRect:gn,dragOverlay:Zt,draggableNodes:A,droppableContainers:M,droppableRects:ie,over:Fn,measureDroppableContainers:me,scrollableAncestors:yn,scrollableAncestorRects:Bn,measuringConfiguration:oe,measuringScheduled:Ae,windowRect:Hr}),[I,pe,ke,ae,yt,gn,Zt,A,M,ie,Fn,me,yn,Bn,oe,Ae,Hr]),xs=q.useMemo(()=>({activatorEvent:ae,activators:Oi,active:I,activeNodeRect:ke,ariaDescribedById:{draggable:k},dispatch:Z,draggableNodes:A,over:Fn,measureDroppableContainers:me}),[ae,Oi,I,ke,Z,k,A,Fn,me]);return dn.createElement(bb.Provider,{value:$},dn.createElement(Lh.Provider,{value:xs},dn.createElement(Ob.Provider,{value:Rs},dn.createElement(kb.Provider,{value:Yr},y)),dn.createElement(dA,{disabled:(m==null?void 0:m.restoreFocus)===!1})),dn.createElement(cw,{...m,hiddenTextDescribedById:k}));function ir(){const ot=(et==null?void 0:et.autoScrollEnabled)===!1,Mt=typeof g=="object"?g.enabled===!1:g===!1,ht=ce&&!ot&&!Mt;return typeof g=="object"?{...g,enabled:ht}:{enabled:ht}}}),yA=q.createContext(null),U0="button",vA="Draggable";function _A(r){let{id:e,data:n,disabled:s=!1,attributes:o}=r;const u=hu(vA),{activators:d,activatorEvent:m,active:g,activeNodeRect:y,ariaDescribedById:E,draggableNodes:_,over:S}=q.useContext(Lh),{role:D=U0,roleDescription:F="draggable",tabIndex:K=0}=o??{},O=(g==null?void 0:g.id)===e,Z=q.useContext(O?kb:yA),[re,$]=hh(),[le,se]=hh(),ce=nA(d,e),N=$l(n);Fr(()=>(_.set(e,{id:e,key:u,node:re,activatorNode:le,data:N}),()=>{const R=_.get(e);R&&R.key===u&&_.delete(e)}),[_,e]);const A=q.useMemo(()=>({role:D,tabIndex:K,"aria-disabled":s,"aria-pressed":O&&D===U0?!0:void 0,"aria-roledescription":F,"aria-describedby":E.draggable}),[s,D,K,O,F,E.draggable]);return{active:g,activatorEvent:m,activeNodeRect:y,attributes:A,isDragging:O,listeners:s?void 0:ce,node:re,over:S,setNodeRef:$,setActivatorNodeRef:se,transform:Z}}function bA(){return q.useContext(Ob)}const EA="Droppable",TA={timeout:25};function SA(r){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:o}=r;const u=hu(EA),{active:d,dispatch:m,over:g,measureDroppableContainers:y}=q.useContext(Lh),E=q.useRef({disabled:n}),_=q.useRef(!1),S=q.useRef(null),D=q.useRef(null),{disabled:F,updateMeasurementsFor:K,timeout:O}={...TA,...o},Z=$l(K??s),re=q.useCallback(()=>{if(!_.current){_.current=!0;return}D.current!=null&&clearTimeout(D.current),D.current=setTimeout(()=>{y(Array.isArray(Z.current)?Z.current:[Z.current]),D.current=null},O)},[O]),$=Ph({callback:re,disabled:F||!d}),le=q.useCallback((A,R)=>{$&&(R&&($.unobserve(R),_.current=!1),A&&$.observe(A))},[$]),[se,ce]=hh(le),N=$l(e);return q.useEffect(()=>{!$||!se.current||($.disconnect(),_.current=!1,$.observe(se.current))},[se,$]),q.useEffect(()=>(m({type:zt.RegisterDroppable,element:{id:s,key:u,disabled:n,node:se,rect:S,data:N}}),()=>m({type:zt.UnregisterDroppable,key:u,id:s})),[s]),q.useEffect(()=>{n!==E.current.disabled&&(m({type:zt.SetDroppableDisabled,id:s,key:u,disabled:n}),E.current.disabled=n)},[s,u,n,m]),{active:d,rect:S,isOver:(g==null?void 0:g.id)===s,node:se,over:g,setNodeRef:ce}}function ag(r,e,n){const s=r.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function wA(r,e){return r.reduce((n,s,o)=>{const u=e.get(s);return u&&(n[o]=u),n},Array(r.length))}function Gc(r){return r!==null&&r>=0}function AA(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!==e[n])return!1;return!0}function RA(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const Mb=r=>{let{rects:e,activeIndex:n,overIndex:s,index:o}=r;const u=ag(e,s,n),d=e[o],m=u[o];return!m||!d?null:{x:m.left-d.left,y:m.top-d.top,scaleX:m.width/d.width,scaleY:m.height/d.height}},Kc={scaleX:1,scaleY:1},xA=r=>{var e;let{activeIndex:n,activeNodeRect:s,index:o,rects:u,overIndex:d}=r;const m=(e=u[n])!=null?e:s;if(!m)return null;if(o===n){const y=u[d];return y?{x:0,y:n<d?y.top+y.height-(m.top+m.height):y.top-m.top,...Kc}:null}const g=IA(u,o,n);return o>n&&o<=d?{x:0,y:-m.height-g,...Kc}:o<n&&o>=d?{x:0,y:m.height+g,...Kc}:{x:0,y:0,...Kc}};function IA(r,e,n){const s=r[e],o=r[e-1],u=r[e+1];return s?n<e?o?s.top-(o.top+o.height):u?u.top-(s.top+s.height):0:u?u.top-(s.top+s.height):o?s.top-(o.top+o.height):0:0}const Vb="Sortable",Pb=dn.createContext({activeIndex:-1,containerId:Vb,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Mb,disabled:{draggable:!1,droppable:!1}});function CA(r){let{children:e,id:n,items:s,strategy:o=Mb,disabled:u=!1}=r;const{active:d,dragOverlay:m,droppableRects:g,over:y,measureDroppableContainers:E}=bA(),_=hu(Vb,n),S=m.rect!==null,D=q.useMemo(()=>s.map(ce=>typeof ce=="object"&&"id"in ce?ce.id:ce),[s]),F=d!=null,K=d?D.indexOf(d.id):-1,O=y?D.indexOf(y.id):-1,Z=q.useRef(D),re=!AA(D,Z.current),$=O!==-1&&K===-1||re,le=RA(u);Fr(()=>{re&&F&&E(D)},[re,D,F,E]),q.useEffect(()=>{Z.current=D},[D]);const se=q.useMemo(()=>({activeIndex:K,containerId:_,disabled:le,disableTransforms:$,items:D,overIndex:O,useDragOverlay:S,sortedRects:wA(D,g),strategy:o}),[K,_,le.draggable,le.droppable,$,D,O,g,S,o]);return dn.createElement(Pb.Provider,{value:se},e)}const DA=r=>{let{id:e,items:n,activeIndex:s,overIndex:o}=r;return ag(n,s,o).indexOf(e)},NA=r=>{let{containerId:e,isSorting:n,wasDragging:s,index:o,items:u,newIndex:d,previousItems:m,previousContainerId:g,transition:y}=r;return!y||!s||m!==u&&o===d?!1:n?!0:d!==o&&e===g},OA={duration:200,easing:"ease"},Lb="transform",kA=Zl.Transition.toString({property:Lb,duration:0,easing:"linear"}),MA={roleDescription:"sortable"};function VA(r){let{disabled:e,index:n,node:s,rect:o}=r;const[u,d]=q.useState(null),m=q.useRef(n);return Fr(()=>{if(!e&&n!==m.current&&s.current){const g=o.current;if(g){const y=xo(s.current,{ignoreTransform:!0}),E={x:g.left-y.left,y:g.top-y.top,scaleX:g.width/y.width,scaleY:g.height/y.height};(E.x||E.y)&&d(E)}}n!==m.current&&(m.current=n)},[e,n,s,o]),q.useEffect(()=>{u&&d(null)},[u]),u}function PA(r){let{animateLayoutChanges:e=NA,attributes:n,disabled:s,data:o,getNewIndex:u=DA,id:d,strategy:m,resizeObserverConfig:g,transition:y=OA}=r;const{items:E,containerId:_,activeIndex:S,disabled:D,disableTransforms:F,sortedRects:K,overIndex:O,useDragOverlay:Z,strategy:re}=q.useContext(Pb),$=LA(s,D),le=E.indexOf(d),se=q.useMemo(()=>({sortable:{containerId:_,index:le,items:E},...o}),[_,o,le,E]),ce=q.useMemo(()=>E.slice(E.indexOf(d)),[E,d]),{rect:N,node:A,isOver:R,setNodeRef:M}=SA({id:d,data:se,disabled:$.droppable,resizeObserverConfig:{updateMeasurementsFor:ce,...g}}),{active:V,activatorEvent:L,activeNodeRect:I,attributes:We,setNodeRef:et,listeners:Q,isDragging:ae,over:ge,setActivatorNodeRef:Ie,transform:k}=_A({id:d,data:se,attributes:{...MA,...n},disabled:$.draggable}),te=ZS(M,et),oe=!!V,ie=oe&&!F&&Gc(S)&&Gc(O),me=!Z&&ae,Ae=me&&ie?k:null,mt=ie?Ae??(m??re)({rects:K,activeNodeRect:I,activeIndex:S,overIndex:O,index:le}):null,je=Gc(S)&&Gc(O)?u({id:d,items:E,activeIndex:S,overIndex:O}):le,Rt=V==null?void 0:V.id,ke=q.useRef({activeId:Rt,items:E,newIndex:je,containerId:_}),gn=E!==ke.current.items,qt=e({active:V,containerId:_,isDragging:ae,isSorting:oe,id:d,index:le,items:E,newIndex:ke.current.newIndex,previousItems:ke.current.items,previousContainerId:ke.current.containerId,transition:y,wasDragging:ke.current.activeId!=null}),wn=VA({disabled:!qt,index:le,node:A,rect:N});return q.useEffect(()=>{oe&&ke.current.newIndex!==je&&(ke.current.newIndex=je),_!==ke.current.containerId&&(ke.current.containerId=_),E!==ke.current.items&&(ke.current.items=E)},[oe,je,_,E]),q.useEffect(()=>{if(Rt===ke.current.activeId)return;if(Rt!=null&&ke.current.activeId==null){ke.current.activeId=Rt;return}const zn=setTimeout(()=>{ke.current.activeId=Rt},50);return()=>clearTimeout(zn)},[Rt]),{active:V,activeIndex:S,attributes:We,data:se,rect:N,index:le,newIndex:je,items:E,isOver:R,isSorting:oe,isDragging:ae,listeners:Q,node:A,overIndex:O,over:ge,setNodeRef:te,setActivatorNodeRef:Ie,setDroppableNodeRef:M,setDraggableNodeRef:et,transform:wn??mt,transition:Zt()};function Zt(){if(wn||gn&&ke.current.newIndex===le)return kA;if(!(me&&!tg(L)||!y)&&(oe||qt))return Zl.Transition.toString({...y,property:Lb})}}function LA(r,e){var n,s;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(n=r==null?void 0:r.draggable)!=null?n:e.draggable,droppable:(s=r==null?void 0:r.droppable)!=null?s:e.droppable}}Ye.Down,Ye.Right,Ye.Up,Ye.Left;/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jA=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),j0=r=>{const e=jA(r);return e.charAt(0).toUpperCase()+e.slice(1)},Ub=(...r)=>r.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),zA=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=q.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:d,...m},g)=>q.createElement("svg",{ref:g,...BA,width:e,height:e,stroke:r,strokeWidth:s?Number(n)*24/Number(e):n,className:Ub("lucide",o),...!u&&!zA(m)&&{"aria-hidden":"true"},...m},[...d.map(([y,E])=>q.createElement(y,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=(r,e)=>{const n=q.forwardRef(({className:s,...o},u)=>q.createElement(FA,{ref:u,iconNode:e,className:Ub(`lucide-${UA(j0(r))}`,`lucide-${r}`,s),...o}));return n.displayName=j0(r),n};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],HA=ft("calendar-days",qA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],gh=ft("circle-plus",GA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],YA=ft("columns-2",KA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],XA=ft("copy",QA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ZA=ft("external-link",$A);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],WA=ft("eye",JA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jb=ft("file-text",eR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],nR=ft("grip-vertical",tR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],iR=ft("list",rR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],aR=ft("monitor",sR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],lR=ft("moon",oR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],cR=ft("palette",uR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"M13 4v16",key:"8vvj80"}],["path",{d:"M17 4v16",key:"7dpous"}],["path",{d:"M19 4H9.5a4.5 4.5 0 0 0 0 9H13",key:"sh4n9v"}]],dR=ft("pilcrow",hR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],mR=ft("redo",fR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],pR=ft("save",gR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vR=ft("settings",yR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],bR=ft("share-2",_R);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],TR=ft("smartphone",ER);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zb=ft("square-check-big",SR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],AR=ft("sun",wR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],xR=ft("tablet",RR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Uh=ft("trash-2",IR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],DR=ft("type",CR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],OR=ft("undo",NR),kR=()=>{};var z0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},MR=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],d=r[n++],m=r[n++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],d=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Fb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],d=o+1<r.length,m=d?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,E=u>>2,_=(u&3)<<4|m>>4;let S=(m&15)<<2|y>>6,D=y&63;g||(D=64,d||(S=64)),s.push(n[E],n[_],n[S],n[D])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Bb(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):MR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const _=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||y==null||_==null)throw new VR;const S=u<<2|m>>4;if(s.push(S),y!==64){const D=m<<4&240|y>>2;if(s.push(D),_!==64){const F=y<<6&192|_;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class VR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PR=function(r){const e=Bb(r);return Fb.encodeByteArray(e,!0)},ph=function(r){return PR(r).replace(/\./g,"")},qb=function(r){try{return Fb.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=()=>LR().__FIREBASE_DEFAULTS__,jR=()=>{if(typeof process>"u"||typeof z0>"u")return;const r=z0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},zR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&qb(r[1]);return e&&JSON.parse(e)},jh=()=>{try{return kR()||UR()||jR()||zR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Hb=r=>{var e,n;return(n=(e=jh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},BR=r=>{const e=Hb(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Gb=()=>{var r;return(r=jh())===null||r===void 0?void 0:r.config},Kb=r=>{var e;return(e=jh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(r){return r.endsWith(".cloudworkstations.dev")}async function Yb(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[ph(JSON.stringify(n)),ph(JSON.stringify(d)),""].join(".")}const Hl={};function HR(){const r={prod:[],emulator:[]};for(const e of Object.keys(Hl))Hl[e]?r.emulator.push(e):r.prod.push(e);return r}function GR(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let B0=!1;function Qb(r,e){if(typeof window>"u"||typeof document>"u"||!du(window.location.host)||Hl[r]===e||Hl[r]||B0)return;Hl[r]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=HR().prod.length>0;function d(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,D){S.setAttribute("width","24"),S.setAttribute("id",D),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{B0=!0,d()},S}function E(S,D){S.setAttribute("id",D),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function _(){const S=GR(s),D=n("text"),F=document.getElementById(D)||document.createElement("span"),K=n("learnmore"),O=document.getElementById(K)||document.createElement("a"),Z=n("preprendIcon"),re=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const $=S.element;m($),E(O,K);const le=y();g(re,Z),$.append(re,F,O,le),document.body.appendChild($)}u?(F.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function YR(){var r;const e=(r=jh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function $R(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZR(){const r=mn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function JR(){return!YR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WR(){try{return typeof indexedDB=="object"}catch{return!1}}function e2(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="FirebaseError";class Ci extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=t2,Object.setPrototypeOf(this,Ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fu.prototype.create)}}class fu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?n2(u,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Ci(o,m,s)}}function n2(r,e){return r.replace(r2,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const r2=/\{\$([^}]+)}/g;function i2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ia(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],d=e[o];if(F0(u)&&F0(d)){if(!ia(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function F0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function s2(r,e){const n=new a2(r,e);return n.subscribe.bind(n)}class a2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");o2(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=um),o.error===void 0&&(o.error=um),o.complete===void 0&&(o.complete=um);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function o2(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function um(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(r){return r&&r._delegate?r._delegate:r}class sa{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new FR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(c2(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&d.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:u2(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function u2(r){return r===na?void 0:r}function c2(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new l2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Le||(Le={}));const d2={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},f2=Le.INFO,m2={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},g2=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=m2[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class og{constructor(e){this.name=e,this._logLevel=f2,this._logHandler=g2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?d2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const p2=(r,e)=>e.some(n=>r instanceof n);let q0,H0;function y2(){return q0||(q0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v2(){return H0||(H0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xb=new WeakMap,Am=new WeakMap,$b=new WeakMap,cm=new WeakMap,lg=new WeakMap;function _2(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",d)},u=()=>{n(hs(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Xb.set(n,r)}).catch(()=>{}),lg.set(e,r),e}function b2(r){if(Am.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",d),r.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",d),r.addEventListener("abort",d)});Am.set(r,e)}let Rm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Am.get(r);if(e==="objectStoreNames")return r.objectStoreNames||$b.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hs(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function E2(r){Rm=r(Rm)}function T2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(hm(this),e,...n);return $b.set(s,e.sort?e.sort():[e]),hs(s)}:v2().includes(r)?function(...e){return r.apply(hm(this),e),hs(Xb.get(this))}:function(...e){return hs(r.apply(hm(this),e))}}function S2(r){return typeof r=="function"?T2(r):(r instanceof IDBTransaction&&b2(r),p2(r,y2())?new Proxy(r,Rm):r)}function hs(r){if(r instanceof IDBRequest)return _2(r);if(cm.has(r))return cm.get(r);const e=S2(r);return e!==r&&(cm.set(r,e),lg.set(e,r)),e}const hm=r=>lg.get(r);function w2(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(r,e),m=hs(d);return s&&d.addEventListener("upgradeneeded",g=>{s(hs(d.result),g.oldVersion,g.newVersion,hs(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const A2=["get","getKey","getAll","getAllKeys","count"],R2=["put","add","delete","clear"],dm=new Map;function G0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=R2.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||A2.includes(n)))return;const u=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&g.done]))[0]};return dm.set(e,u),u}E2(r=>({...r,get:(e,n,s)=>G0(e,n)||r.get(e,n,s),has:(e,n)=>!!G0(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(I2(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function I2(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xm="@firebase/app",K0="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new og("@firebase/app"),C2="@firebase/app-compat",D2="@firebase/analytics-compat",N2="@firebase/analytics",O2="@firebase/app-check-compat",k2="@firebase/app-check",M2="@firebase/auth",V2="@firebase/auth-compat",P2="@firebase/database",L2="@firebase/data-connect",U2="@firebase/database-compat",j2="@firebase/functions",z2="@firebase/functions-compat",B2="@firebase/installations",F2="@firebase/installations-compat",q2="@firebase/messaging",H2="@firebase/messaging-compat",G2="@firebase/performance",K2="@firebase/performance-compat",Y2="@firebase/remote-config",Q2="@firebase/remote-config-compat",X2="@firebase/storage",$2="@firebase/storage-compat",Z2="@firebase/firestore",J2="@firebase/ai",W2="@firebase/firestore-compat",ex="firebase",tx="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="[DEFAULT]",nx={[xm]:"fire-core",[C2]:"fire-core-compat",[N2]:"fire-analytics",[D2]:"fire-analytics-compat",[k2]:"fire-app-check",[O2]:"fire-app-check-compat",[M2]:"fire-auth",[V2]:"fire-auth-compat",[P2]:"fire-rtdb",[L2]:"fire-data-connect",[U2]:"fire-rtdb-compat",[j2]:"fire-fn",[z2]:"fire-fn-compat",[B2]:"fire-iid",[F2]:"fire-iid-compat",[q2]:"fire-fcm",[H2]:"fire-fcm-compat",[G2]:"fire-perf",[K2]:"fire-perf-compat",[Y2]:"fire-rc",[Q2]:"fire-rc-compat",[X2]:"fire-gcs",[$2]:"fire-gcs-compat",[Z2]:"fire-fst",[W2]:"fire-fst-compat",[J2]:"fire-vertex","fire-js":"fire-js",[ex]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new Map,rx=new Map,Cm=new Map;function Y0(r,e){try{r.container.addComponent(e)}catch(n){Si.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function yo(r){const e=r.name;if(Cm.has(e))return Si.debug(`There were multiple attempts to register component ${e}.`),!1;Cm.set(e,r);for(const n of Wl.values())Y0(n,r);for(const n of rx.values())Y0(n,r);return!0}function ug(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function tr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new fu("app","Firebase",ix);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=tx;function Zb(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Im,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw ds.create("bad-app-name",{appName:String(o)});if(n||(n=Gb()),!n)throw ds.create("no-options");const u=Wl.get(o);if(u){if(ia(n,u.options)&&ia(s,u.config))return u;throw ds.create("duplicate-app",{appName:o})}const d=new h2(o);for(const g of Cm.values())d.addComponent(g);const m=new sx(n,s,d);return Wl.set(o,m),m}function cg(r=Im){const e=Wl.get(r);if(!e&&r===Im&&Gb())return Zb();if(!e)throw ds.create("no-app",{appName:r});return e}function ax(){return Array.from(Wl.values())}function fs(r,e,n){var s;let o=(s=nx[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Si.warn(m.join(" "));return}yo(new sa(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="firebase-heartbeat-database",lx=1,eu="firebase-heartbeat-store";let fm=null;function Jb(){return fm||(fm=w2(ox,lx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(eu)}catch(n){console.warn(n)}}}}).catch(r=>{throw ds.create("idb-open",{originalErrorMessage:r.message})})),fm}async function ux(r){try{const n=(await Jb()).transaction(eu),s=await n.objectStore(eu).get(Wb(r));return await n.done,s}catch(e){if(e instanceof Ci)Si.warn(e.message);else{const n=ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Si.warn(n.message)}}}async function Q0(r,e){try{const s=(await Jb()).transaction(eu,"readwrite");await s.objectStore(eu).put(e,Wb(r)),await s.done}catch(n){if(n instanceof Ci)Si.warn(n.message);else{const s=ds.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Si.warn(s.message)}}}function Wb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=1024,hx=30;class dx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mx(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=X0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>hx){const d=gx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Si.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=X0(),{heartbeatsToSend:s,unsentEntries:o}=fx(this._heartbeatsCache.heartbeats),u=ph(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Si.warn(n),""}}}function X0(){return new Date().toISOString().substring(0,10)}function fx(r,e=cx){const n=[];let s=r.slice();for(const o of r){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),$0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),$0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class mx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WR()?e2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ux(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Q0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Q0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function $0(r){return ph(JSON.stringify({version:2,heartbeats:r})).length}function gx(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(r){yo(new sa("platform-logger",e=>new x2(e),"PRIVATE")),yo(new sa("heartbeat",e=>new dx(e),"PRIVATE")),fs(xm,K0,r),fs(xm,K0,"esm2017"),fs("fire-js","")}px("");var yx="firebase",vx="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs(yx,vx,"app");function hg(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function eE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _x=eE,tE=new fu("auth","Firebase",eE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new og("@firebase/auth");function bx(r,...e){yh.logLevel<=Le.WARN&&yh.warn(`Auth (${Io}): ${r}`,...e)}function th(r,...e){yh.logLevel<=Le.ERROR&&yh.error(`Auth (${Io}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(r,...e){throw dg(r,...e)}function Lr(r,...e){return dg(r,...e)}function nE(r,e,n){const s=Object.assign(Object.assign({},_x()),{[e]:n});return new fu("auth","Firebase",s).create(e,{appName:r.name})}function Ti(r){return nE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dg(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return tE.create(r,...e)}function Se(r,e,...n){if(!r)throw dg(e,...n)}function bi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw th(e),new Error(e)}function Ai(r,e){r||bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function Ex(){return Z0()==="http:"||Z0()==="https:"}function Z0(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ex()||XR()||"connection"in navigator)?navigator.onLine:!0}function Sx(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ai(n>e,"Short delay should be less than long delay!"),this.isMobile=KR()||$R()}get(){return Tx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(r,e){Ai(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Rx=new gu(3e4,6e4);function pu(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Co(r,e,n,s,o={}){return iE(r,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const m=mu(Object.assign({key:r.config.apiKey},d)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:g},u);return QR()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&du(r.emulatorConfig.host)&&(y.credentials="include"),rE.fetch()(await sE(r,r.config.apiHost,n,m),y)})}async function iE(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},wx),e);try{const o=new xx(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Yc(r,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yc(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Yc(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Yc(r,"user-disabled",d);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw nE(r,E,y);wi(r,E)}}catch(o){if(o instanceof Ci)throw o;wi(r,"network-request-failed",{message:String(o)})}}async function mg(r,e,n,s,o={}){const u=await Co(r,e,n,s,o);return"mfaPendingCredential"in u&&wi(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function sE(r,e,n,s){const o=`${e}${n}?${s}`,u=r,d=u.config.emulator?fg(r.config,o):`${r.config.apiScheme}://${o}`;return Ax.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}class xx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Lr(this.auth,"network-request-failed")),Rx.get())})}}function Yc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Lr(r,e,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ix(r,e){return Co(r,"POST","/v1/accounts:delete",e)}async function vh(r,e){return Co(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Cx(r,e=!1){const n=Dn(r),s=await n.getIdToken(e),o=gg(s);Se(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Gl(mm(o.auth_time)),issuedAtTime:Gl(mm(o.iat)),expirationTime:Gl(mm(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function mm(r){return Number(r)*1e3}function gg(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return th("JWT malformed, contained fewer than 3 sections"),null;try{const o=qb(n);return o?JSON.parse(o):(th("Failed to decode base64 JWT payload"),null)}catch(o){return th("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function J0(r){const e=gg(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ci&&Dx(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Dx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gl(this.lastLoginAt),this.creationTime=Gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(r){var e;const n=r.auth,s=await r.getIdToken(),o=await tu(r,vh(n,{idToken:s}));Se(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?aE(u.providerUserInfo):[],m=kx(r.providerData,d),g=r.isAnonymous,y=!(r.email&&u.passwordHash)&&!(m!=null&&m.length),E=g?y:!1,_={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Nm(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(r,_)}async function Ox(r){const e=Dn(r);await _h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kx(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function aE(r){return r.map(e=>{var{providerId:n}=e,s=hg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(r,e){const n=await iE(r,{},async()=>{const s=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,d=await sE(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",rE.fetch()(d,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Vx(r,e){return Co(r,"POST","/v2/accounts:revokeToken",pu(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const n=J0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await Mx(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new ho;return s&&(Se(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Se(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ho,this.toJSON())}_performRefresh(){return bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class fr{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Nm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await tu(this,this.stsTokenManager.getToken(this.auth,e));return Se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Cx(this,e)}reload(){return Ox(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await _h(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(Ti(this.auth));const e=await this.getIdToken();return await tu(this,Ix(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,d,m,g,y,E;const _=(s=n.displayName)!==null&&s!==void 0?s:void 0,S=(o=n.email)!==null&&o!==void 0?o:void 0,D=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,F=(d=n.photoURL)!==null&&d!==void 0?d:void 0,K=(m=n.tenantId)!==null&&m!==void 0?m:void 0,O=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,Z=(y=n.createdAt)!==null&&y!==void 0?y:void 0,re=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:$,emailVerified:le,isAnonymous:se,providerData:ce,stsTokenManager:N}=n;Se($&&N,e,"internal-error");const A=ho.fromJSON(this.name,N);Se(typeof $=="string",e,"internal-error"),is(_,e.name),is(S,e.name),Se(typeof le=="boolean",e,"internal-error"),Se(typeof se=="boolean",e,"internal-error"),is(D,e.name),is(F,e.name),is(K,e.name),is(O,e.name),is(Z,e.name),is(re,e.name);const R=new fr({uid:$,auth:e,email:S,emailVerified:le,displayName:_,isAnonymous:se,photoURL:F,phoneNumber:D,tenantId:K,stsTokenManager:A,createdAt:Z,lastLoginAt:re});return ce&&Array.isArray(ce)&&(R.providerData=ce.map(M=>Object.assign({},M))),O&&(R._redirectEventId=O),R}static async _fromIdTokenResponse(e,n,s=!1){const o=new ho;o.updateFromServerResponse(n);const u=new fr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await _h(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Se(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?aE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new ho;m.updateFromIdToken(s);const g=new fr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Nm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new Map;function Ei(r){Ai(r instanceof Function,"Expected a class definition");let e=W0.get(r);return e?(Ai(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,W0.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oE.type="NONE";const e_=oE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(r,e,n){return`firebase:${r}:${e}:${n}`}class fo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=nh(this.userKey,o.apiKey,u),this.fullPersistenceKey=nh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await vh(this.auth,{idToken:e}).catch(()=>{});return n?fr._fromGetAccountInfoResponse(this.auth,n,e):null}return fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new fo(Ei(e_),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Ei(e_);const d=nh(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const E=await y._get(d);if(E){let _;if(typeof E=="string"){const S=await vh(e,{idToken:E}).catch(()=>{});if(!S)break;_=await fr._fromGetAccountInfoResponse(e,S,E)}else _=fr._fromJSON(e,E);y!==u&&(m=_),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new fo(u,e,s):(u=g[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new fo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fE(e))return"Blackberry";if(mE(e))return"Webos";if(uE(e))return"Safari";if((e.includes("chrome/")||cE(e))&&!e.includes("edge/"))return"Chrome";if(dE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function lE(r=mn()){return/firefox\//i.test(r)}function uE(r=mn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cE(r=mn()){return/crios\//i.test(r)}function hE(r=mn()){return/iemobile/i.test(r)}function dE(r=mn()){return/android/i.test(r)}function fE(r=mn()){return/blackberry/i.test(r)}function mE(r=mn()){return/webos/i.test(r)}function pg(r=mn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Px(r=mn()){var e;return pg(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Lx(){return ZR()&&document.documentMode===10}function gE(r=mn()){return pg(r)||dE(r)||mE(r)||fE(r)||/windows phone/i.test(r)||hE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(r,e=[]){let n;switch(r){case"Browser":n=t_(mn());break;case"Worker":n=`${t_(mn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Io}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,m)=>{try{const g=e(u);d(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(r,e={}){return Co(r,"GET","/v2/passwordPolicy",pu(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=6;class Bx{constructor(e){var n,s,o,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:zx,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,d,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new n_(this),this.idTokenSubscription=new n_(this),this.beforeStateQueue=new Ux(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ei(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await fo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await vh(this,{idToken:e}),s=await fr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(tr(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&(g!=null&&g.user)&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _h(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Sx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(Ti(this));const n=e?Dn(e):null;return n&&Se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(Ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(Ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jx(this),n=new Bx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Vx(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ei(e)||this._popupRedirectResolver;Se(n,this,"argument-error"),this.redirectPersistenceManager=await fo.create(this,[Ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function yu(r){return Dn(r)}class n_{constructor(e){this.auth=e,this.observer=null,this.addObserver=s2(n=>this.observer=n)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qx(r){yg=r}function Hx(r){return yg.loadJS(r)}function Gx(){return yg.gapiScript}function Kx(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(r,e){const n=ug(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ia(u,e??{}))return o;wi(o,"already-initialized")}return n.initialize({options:e})}function Qx(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Ei);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Xx(r,e,n){const s=yu(r);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=yE(e),{host:d,port:m}=$x(e),g=m===null?"":`:${m}`,y={url:`${u}//${d}${g}/`},E=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(ia(y,s.config.emulator)&&ia(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,du(d)?(Yb(`${u}//${d}${g}`),Qb("Auth",!0)):Zx()}function yE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function $x(r){const e=yE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:r_(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:r_(d)}}}function r_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Zx(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bi("not implemented")}_getIdTokenResponse(e){return bi("not implemented")}_linkToIdToken(e,n){return bi("not implemented")}_getReauthenticationResolver(e){return bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(r,e){return mg(r,"POST","/v1/accounts:signInWithIdp",pu(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="http://localhost";class aa extends vE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=hg(n,["providerId","signInMethod"]);if(!s||!o)return null;const d=new aa(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return mo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,mo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mo(e,n)}buildRequest(){const e={requestUri:Jx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends _E{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends vu{constructor(){super("facebook.com")}static credential(e){return aa._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return aa._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return os.credential(n,s)}catch{return null}}}os.GOOGLE_SIGN_IN_METHOD="google.com";os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends vu{constructor(){super("github.com")}static credential(e){return aa._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.GITHUB_SIGN_IN_METHOD="github.com";ls.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends vu{constructor(){super("twitter.com")}static credential(e,n){return aa._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return us.credential(n,s)}catch{return null}}}us.TWITTER_SIGN_IN_METHOD="twitter.com";us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wx(r,e){return mg(r,"POST","/v1/accounts:signUp",pu(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await fr._fromIdTokenResponse(e,s,o),d=i_(s);return new Ri({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=i_(s);return new Ri({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function i_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s_(r){var e;if(tr(r.app))return Promise.reject(Ti(r));const n=yu(r);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ri({user:n.currentUser,providerId:null,operationType:"signIn"});const s=await Wx(n,{returnSecureToken:!0}),o=await Ri._fromIdTokenResponse(n,"signIn",s,!0);return await n._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends Ci{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,bh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new bh(e,n,s,o)}}function bE(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?bh._fromErrorAndOperation(r,u,e,s):u})}async function eI(r,e,n=!1){const s=await tu(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Ri._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(r,e,n=!1){const{auth:s}=r;if(tr(s.app))return Promise.reject(Ti(s));const o="reauthenticate";try{const u=await tu(r,bE(s,o,e,r),n);Se(u.idToken,s,"internal-error");const d=gg(u.idToken);Se(d,s,"internal-error");const{sub:m}=d;return Se(r.uid===m,s,"user-mismatch"),Ri._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&wi(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(r,e,n=!1){if(tr(r.app))return Promise.reject(Ti(r));const s="signIn",o=await bE(r,s,e),u=await Ri._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rI(r,e){return mg(r,"POST","/v1/accounts:signInWithCustomToken",pu(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iI(r,e){if(tr(r.app))return Promise.reject(Ti(r));const n=yu(r),s=await rI(n,{token:e,returnSecureToken:!0}),o=await Ri._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(o.user),o}function sI(r,e,n,s){return Dn(r).onIdTokenChanged(e,n,s)}function aI(r,e,n){return Dn(r).beforeAuthStateChanged(e,n)}function oI(r,e,n,s){return Dn(r).onAuthStateChanged(e,n,s)}const Eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Eh,"1"),this.storage.removeItem(Eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=1e3,uI=10;class TE extends EE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);Lx()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,uI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},lI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}TE.type="LOCAL";const cI=TE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE extends EE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SE.type="SESSION";const wE=SE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new zh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async y=>y(n.origin,u)),g=await hI(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,g)=>{const y=vg("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(_){const S=_;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return window}function fI(r){Ur().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function mI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gI(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function pI(){return AE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="firebaseLocalStorageDb",yI=1,Th="firebaseLocalStorage",xE="fbase_key";class _u{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bh(r,e){return r.transaction([Th],e?"readwrite":"readonly").objectStore(Th)}function vI(){const r=indexedDB.deleteDatabase(RE);return new _u(r).toPromise()}function Om(){const r=indexedDB.open(RE,yI);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Th,{keyPath:xE})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Th)?e(s):(s.close(),await vI(),e(await Om()))})})}async function a_(r,e,n){const s=Bh(r,!0).put({[xE]:e,value:n});return new _u(s).toPromise()}async function _I(r,e){const n=Bh(r,!1).get(e),s=await new _u(n).toPromise();return s===void 0?null:s.value}function o_(r,e){const n=Bh(r,!0).delete(e);return new _u(n).toPromise()}const bI=800,EI=3;class IE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Om(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>EI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zh._getInstance(pI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await mI(),!this.activeServiceWorker)return;this.sender=new dI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Om();return await a_(e,Eh,"1"),await o_(e,Eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>a_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>_I(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>o_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Bh(o,!1).getAll();return new _u(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IE.type="LOCAL";const TI=IE;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(r,e){return e?Ei(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g extends vE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wI(r){return nI(r.auth,new _g(r),r.bypassAuthState)}function AI(r){const{auth:e,user:n}=r;return Se(n,e,"internal-error"),tI(n,new _g(r),r.bypassAuthState)}async function RI(r){const{auth:e,user:n}=r;return Se(n,e,"internal-error"),eI(n,new _g(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wI;case"linkViaPopup":case"linkViaRedirect":return RI;case"reauthViaPopup":case"reauthViaRedirect":return AI;default:wi(this.auth,"internal-error")}}resolve(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=new gu(2e3,1e4);class uo extends CE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,uo.currentPopupAction&&uo.currentPopupAction.cancel(),uo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Ai(this.filter.length===1,"Popup operations only handle one event");const e=vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xI.get())};e()}}uo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="pendingRedirect",rh=new Map;class CI extends CE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=rh.get(this.auth._key());if(!e){try{const s=await DI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}rh.set(this.auth._key(),e)}return this.bypassAuthState||rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DI(r,e){const n=kI(e),s=OI(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function NI(r,e){rh.set(r._key(),e)}function OI(r){return Ei(r._redirectPersistence)}function kI(r){return nh(II,r.config.apiKey,r.name)}async function MI(r,e,n=!1){if(tr(r.app))return Promise.reject(Ti(r));const s=yu(r),o=SI(s,e),d=await new CI(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=10*60*1e3;class PI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!DE(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Lr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VI&&this.cachedEventUids.clear(),this.cachedEventUids.has(l_(e))}saveEventToCache(e){this.cachedEventUids.add(l_(e)),this.lastProcessedEventTime=Date.now()}}function l_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function DE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UI(r,e={}){return Co(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zI=/^https?/;async function BI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await UI(r);for(const n of e)try{if(FI(n))return}catch{}wi(r,"unauthorized-domain")}function FI(r){const e=Dm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!zI.test(n))return!1;if(jI.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=new gu(3e4,6e4);function u_(){const r=Ur().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function HI(r){return new Promise((e,n)=>{var s,o,u;function d(){u_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{u_(),n(Lr(r,"network-request-failed"))},timeout:qI.get()})}if(!((o=(s=Ur().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Ur().gapi)===null||u===void 0)&&u.load)d();else{const m=Kx("iframefcb");return Ur()[m]=()=>{gapi.load?d():n(Lr(r,"network-request-failed"))},Hx(`${Gx()}?onload=${m}`).catch(g=>n(g))}}).catch(e=>{throw ih=null,e})}let ih=null;function GI(r){return ih=ih||HI(r),ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=new gu(5e3,15e3),YI="__/auth/iframe",QI="emulator/auth/iframe",XI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$I=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZI(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?fg(e,QI):`https://${r.config.authDomain}/${YI}`,s={apiKey:e.apiKey,appName:r.name,v:Io},o=$I.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${mu(s).slice(1)}`}async function JI(r){const e=await GI(r),n=Ur().gapi;return Se(n,r,"internal-error"),e.open({where:document.body,url:ZI(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=Lr(r,"network-request-failed"),m=Ur().setTimeout(()=>{u(d)},KI.get());function g(){Ur().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eC=500,tC=600,nC="_blank",rC="http://localhost";class c_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iC(r,e,n,s=eC,o=tC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g=Object.assign(Object.assign({},WI),{width:s.toString(),height:o.toString(),top:u,left:d}),y=mn().toLowerCase();n&&(m=cE(y)?nC:n),lE(y)&&(e=e||rC,g.scrollbars="yes");const E=Object.entries(g).reduce((S,[D,F])=>`${S}${D}=${F},`,"");if(Px(y)&&m!=="_self")return sC(e||"",m),new c_(null);const _=window.open(e||"",m,E);Se(_,r,"popup-blocked");try{_.focus()}catch{}return new c_(_)}function sC(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="__/auth/handler",oC="emulator/auth/handler",lC=encodeURIComponent("fac");async function h_(r,e,n,s,o,u){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Io,eventId:o};if(e instanceof _E){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",i2(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,_]of Object.entries({}))d[E]=_}if(e instanceof vu){const E=e.getScopes().filter(_=>_!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const m=d;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),y=g?`#${lC}=${encodeURIComponent(g)}`:"";return`${uC(r)}?${mu(m).slice(1)}${y}`}function uC({config:r}){return r.emulator?fg(r,oC):`https://${r.authDomain}/${aC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="webStorageSupport";class cC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wE,this._completeRedirectFn=MI,this._overrideRedirectResult=NI}async _openPopup(e,n,s,o){var u;Ai((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await h_(e,n,s,Dm(),o);return iC(e,d,vg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await h_(e,n,s,Dm(),o);return fI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Ai(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await JI(e),s=new PI(e);return n.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gm,{type:gm},o=>{var u;const d=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[gm];d!==void 0&&n(!!d),wi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=BI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gE()||uE()||pg()}}const hC=cC;var d_="@firebase/auth",f_="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mC(r){yo(new sa("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Se(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pE(r)},y=new Fx(s,o,u,g);return Qx(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),yo(new sa("auth-internal",e=>{const n=yu(e.getProvider("auth").getImmediate());return(s=>new dC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fs(d_,f_,fC(r)),fs(d_,f_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=5*60,pC=Kb("authIdTokenMaxAge")||gC;let m_=null;const yC=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>pC)return;const o=n==null?void 0:n.token;m_!==o&&(m_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function vC(r=cg()){const e=ug(r,"auth");if(e.isInitialized())return e.getImmediate();const n=Yx(r,{popupRedirectResolver:hC,persistence:[TI,cI,wE]}),s=Kb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=yC(u.toString());aI(n,d,()=>d(n.currentUser)),sI(n,m=>d(m))}}const o=Hb("auth");return o&&Xx(n,`http://${o}`),n}function _C(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}qx({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Lr("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",_C().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mC("Browser");var g_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ms,NE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function R(){}R.prototype=A.prototype,N.D=A.prototype,N.prototype=new R,N.prototype.constructor=N,N.C=function(M,V,L){for(var I=Array(arguments.length-2),We=2;We<arguments.length;We++)I[We-2]=arguments[We];return A.prototype[V].apply(M,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,A,R){R||(R=0);var M=Array(16);if(typeof A=="string")for(var V=0;16>V;++V)M[V]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(V=0;16>V;++V)M[V]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=N.g[0],R=N.g[1],V=N.g[2];var L=N.g[3],I=A+(L^R&(V^L))+M[0]+3614090360&4294967295;A=R+(I<<7&4294967295|I>>>25),I=L+(V^A&(R^V))+M[1]+3905402710&4294967295,L=A+(I<<12&4294967295|I>>>20),I=V+(R^L&(A^R))+M[2]+606105819&4294967295,V=L+(I<<17&4294967295|I>>>15),I=R+(A^V&(L^A))+M[3]+3250441966&4294967295,R=V+(I<<22&4294967295|I>>>10),I=A+(L^R&(V^L))+M[4]+4118548399&4294967295,A=R+(I<<7&4294967295|I>>>25),I=L+(V^A&(R^V))+M[5]+1200080426&4294967295,L=A+(I<<12&4294967295|I>>>20),I=V+(R^L&(A^R))+M[6]+2821735955&4294967295,V=L+(I<<17&4294967295|I>>>15),I=R+(A^V&(L^A))+M[7]+4249261313&4294967295,R=V+(I<<22&4294967295|I>>>10),I=A+(L^R&(V^L))+M[8]+1770035416&4294967295,A=R+(I<<7&4294967295|I>>>25),I=L+(V^A&(R^V))+M[9]+2336552879&4294967295,L=A+(I<<12&4294967295|I>>>20),I=V+(R^L&(A^R))+M[10]+4294925233&4294967295,V=L+(I<<17&4294967295|I>>>15),I=R+(A^V&(L^A))+M[11]+2304563134&4294967295,R=V+(I<<22&4294967295|I>>>10),I=A+(L^R&(V^L))+M[12]+1804603682&4294967295,A=R+(I<<7&4294967295|I>>>25),I=L+(V^A&(R^V))+M[13]+4254626195&4294967295,L=A+(I<<12&4294967295|I>>>20),I=V+(R^L&(A^R))+M[14]+2792965006&4294967295,V=L+(I<<17&4294967295|I>>>15),I=R+(A^V&(L^A))+M[15]+1236535329&4294967295,R=V+(I<<22&4294967295|I>>>10),I=A+(V^L&(R^V))+M[1]+4129170786&4294967295,A=R+(I<<5&4294967295|I>>>27),I=L+(R^V&(A^R))+M[6]+3225465664&4294967295,L=A+(I<<9&4294967295|I>>>23),I=V+(A^R&(L^A))+M[11]+643717713&4294967295,V=L+(I<<14&4294967295|I>>>18),I=R+(L^A&(V^L))+M[0]+3921069994&4294967295,R=V+(I<<20&4294967295|I>>>12),I=A+(V^L&(R^V))+M[5]+3593408605&4294967295,A=R+(I<<5&4294967295|I>>>27),I=L+(R^V&(A^R))+M[10]+38016083&4294967295,L=A+(I<<9&4294967295|I>>>23),I=V+(A^R&(L^A))+M[15]+3634488961&4294967295,V=L+(I<<14&4294967295|I>>>18),I=R+(L^A&(V^L))+M[4]+3889429448&4294967295,R=V+(I<<20&4294967295|I>>>12),I=A+(V^L&(R^V))+M[9]+568446438&4294967295,A=R+(I<<5&4294967295|I>>>27),I=L+(R^V&(A^R))+M[14]+3275163606&4294967295,L=A+(I<<9&4294967295|I>>>23),I=V+(A^R&(L^A))+M[3]+4107603335&4294967295,V=L+(I<<14&4294967295|I>>>18),I=R+(L^A&(V^L))+M[8]+1163531501&4294967295,R=V+(I<<20&4294967295|I>>>12),I=A+(V^L&(R^V))+M[13]+2850285829&4294967295,A=R+(I<<5&4294967295|I>>>27),I=L+(R^V&(A^R))+M[2]+4243563512&4294967295,L=A+(I<<9&4294967295|I>>>23),I=V+(A^R&(L^A))+M[7]+1735328473&4294967295,V=L+(I<<14&4294967295|I>>>18),I=R+(L^A&(V^L))+M[12]+2368359562&4294967295,R=V+(I<<20&4294967295|I>>>12),I=A+(R^V^L)+M[5]+4294588738&4294967295,A=R+(I<<4&4294967295|I>>>28),I=L+(A^R^V)+M[8]+2272392833&4294967295,L=A+(I<<11&4294967295|I>>>21),I=V+(L^A^R)+M[11]+1839030562&4294967295,V=L+(I<<16&4294967295|I>>>16),I=R+(V^L^A)+M[14]+4259657740&4294967295,R=V+(I<<23&4294967295|I>>>9),I=A+(R^V^L)+M[1]+2763975236&4294967295,A=R+(I<<4&4294967295|I>>>28),I=L+(A^R^V)+M[4]+1272893353&4294967295,L=A+(I<<11&4294967295|I>>>21),I=V+(L^A^R)+M[7]+4139469664&4294967295,V=L+(I<<16&4294967295|I>>>16),I=R+(V^L^A)+M[10]+3200236656&4294967295,R=V+(I<<23&4294967295|I>>>9),I=A+(R^V^L)+M[13]+681279174&4294967295,A=R+(I<<4&4294967295|I>>>28),I=L+(A^R^V)+M[0]+3936430074&4294967295,L=A+(I<<11&4294967295|I>>>21),I=V+(L^A^R)+M[3]+3572445317&4294967295,V=L+(I<<16&4294967295|I>>>16),I=R+(V^L^A)+M[6]+76029189&4294967295,R=V+(I<<23&4294967295|I>>>9),I=A+(R^V^L)+M[9]+3654602809&4294967295,A=R+(I<<4&4294967295|I>>>28),I=L+(A^R^V)+M[12]+3873151461&4294967295,L=A+(I<<11&4294967295|I>>>21),I=V+(L^A^R)+M[15]+530742520&4294967295,V=L+(I<<16&4294967295|I>>>16),I=R+(V^L^A)+M[2]+3299628645&4294967295,R=V+(I<<23&4294967295|I>>>9),I=A+(V^(R|~L))+M[0]+4096336452&4294967295,A=R+(I<<6&4294967295|I>>>26),I=L+(R^(A|~V))+M[7]+1126891415&4294967295,L=A+(I<<10&4294967295|I>>>22),I=V+(A^(L|~R))+M[14]+2878612391&4294967295,V=L+(I<<15&4294967295|I>>>17),I=R+(L^(V|~A))+M[5]+4237533241&4294967295,R=V+(I<<21&4294967295|I>>>11),I=A+(V^(R|~L))+M[12]+1700485571&4294967295,A=R+(I<<6&4294967295|I>>>26),I=L+(R^(A|~V))+M[3]+2399980690&4294967295,L=A+(I<<10&4294967295|I>>>22),I=V+(A^(L|~R))+M[10]+4293915773&4294967295,V=L+(I<<15&4294967295|I>>>17),I=R+(L^(V|~A))+M[1]+2240044497&4294967295,R=V+(I<<21&4294967295|I>>>11),I=A+(V^(R|~L))+M[8]+1873313359&4294967295,A=R+(I<<6&4294967295|I>>>26),I=L+(R^(A|~V))+M[15]+4264355552&4294967295,L=A+(I<<10&4294967295|I>>>22),I=V+(A^(L|~R))+M[6]+2734768916&4294967295,V=L+(I<<15&4294967295|I>>>17),I=R+(L^(V|~A))+M[13]+1309151649&4294967295,R=V+(I<<21&4294967295|I>>>11),I=A+(V^(R|~L))+M[4]+4149444226&4294967295,A=R+(I<<6&4294967295|I>>>26),I=L+(R^(A|~V))+M[11]+3174756917&4294967295,L=A+(I<<10&4294967295|I>>>22),I=V+(A^(L|~R))+M[2]+718787259&4294967295,V=L+(I<<15&4294967295|I>>>17),I=R+(L^(V|~A))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(V+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+L&4294967295}s.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var R=A-this.blockSize,M=this.B,V=this.h,L=0;L<A;){if(V==0)for(;L<=R;)o(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<A;)if(M[V++]=N.charCodeAt(L++),V==this.blockSize){o(this,M),V=0;break}}else for(;L<A;)if(M[V++]=N[L++],V==this.blockSize){o(this,M),V=0;break}}this.h=V,this.o+=A},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var R=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=R&255,R/=256;for(this.u(N),N=Array(16),A=R=0;4>A;++A)for(var M=0;32>M;M+=8)N[R++]=this.g[A]>>>M&255;return N};function u(N,A){var R=m;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=A(N)}function d(N,A){this.h=A;for(var R=[],M=!0,V=N.length-1;0<=V;V--){var L=N[V]|0;M&&L==A||(R[V]=L,M=!1)}this.g=R}var m={};function g(N){return-128<=N&&128>N?u(N,function(A){return new d([A|0],0>A?-1:0)}):new d([N|0],0>N?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return _;if(0>N)return O(y(-N));for(var A=[],R=1,M=0;N>=R;M++)A[M]=N/R|0,R*=4294967296;return new d(A,0)}function E(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return O(E(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(A,8)),M=_,V=0;V<N.length;V+=8){var L=Math.min(8,N.length-V),I=parseInt(N.substring(V,V+L),A);8>L?(L=y(Math.pow(A,L)),M=M.j(L).add(y(I))):(M=M.j(R),M=M.add(y(I)))}return M}var _=g(0),S=g(1),D=g(16777216);r=d.prototype,r.m=function(){if(K(this))return-O(this).m();for(var N=0,A=1,R=0;R<this.g.length;R++){var M=this.i(R);N+=(0<=M?M:4294967296+M)*A,A*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(F(this))return"0";if(K(this))return"-"+O(this).toString(N);for(var A=y(Math.pow(N,6)),R=this,M="";;){var V=le(R,A).g;R=Z(R,V.j(A));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(N);if(R=V,F(R))return L+M;for(;6>L.length;)L="0"+L;M=L+M}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function F(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function K(N){return N.h==-1}r.l=function(N){return N=Z(this,N),K(N)?-1:F(N)?0:1};function O(N){for(var A=N.g.length,R=[],M=0;M<A;M++)R[M]=~N.g[M];return new d(R,~N.h).add(S)}r.abs=function(){return K(this)?O(this):this},r.add=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],M=0,V=0;V<=A;V++){var L=M+(this.i(V)&65535)+(N.i(V)&65535),I=(L>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);M=I>>>16,L&=65535,I&=65535,R[V]=I<<16|L}return new d(R,R[R.length-1]&-2147483648?-1:0)};function Z(N,A){return N.add(O(A))}r.j=function(N){if(F(this)||F(N))return _;if(K(this))return K(N)?O(this).j(O(N)):O(O(this).j(N));if(K(N))return O(this.j(O(N)));if(0>this.l(D)&&0>N.l(D))return y(this.m()*N.m());for(var A=this.g.length+N.g.length,R=[],M=0;M<2*A;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(var V=0;V<N.g.length;V++){var L=this.i(M)>>>16,I=this.i(M)&65535,We=N.i(V)>>>16,et=N.i(V)&65535;R[2*M+2*V]+=I*et,re(R,2*M+2*V),R[2*M+2*V+1]+=L*et,re(R,2*M+2*V+1),R[2*M+2*V+1]+=I*We,re(R,2*M+2*V+1),R[2*M+2*V+2]+=L*We,re(R,2*M+2*V+2)}for(M=0;M<A;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=A;M<2*A;M++)R[M]=0;return new d(R,0)};function re(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function $(N,A){this.g=N,this.h=A}function le(N,A){if(F(A))throw Error("division by zero");if(F(N))return new $(_,_);if(K(N))return A=le(O(N),A),new $(O(A.g),O(A.h));if(K(A))return A=le(N,O(A)),new $(O(A.g),A.h);if(30<N.g.length){if(K(N)||K(A))throw Error("slowDivide_ only works with positive integers.");for(var R=S,M=A;0>=M.l(N);)R=se(R),M=se(M);var V=ce(R,1),L=ce(M,1);for(M=ce(M,2),R=ce(R,2);!F(M);){var I=L.add(M);0>=I.l(N)&&(V=V.add(R),L=I),M=ce(M,1),R=ce(R,1)}return A=Z(N,V.j(A)),new $(V,A)}for(V=_;0<=N.l(A);){for(R=Math.max(1,Math.floor(N.m()/A.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),L=y(R),I=L.j(A);K(I)||0<I.l(N);)R-=M,L=y(R),I=L.j(A);F(L)&&(L=S),V=V.add(L),N=Z(N,I)}return new $(V,N)}r.A=function(N){return le(this,N).h},r.and=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],M=0;M<A;M++)R[M]=this.i(M)&N.i(M);return new d(R,this.h&N.h)},r.or=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],M=0;M<A;M++)R[M]=this.i(M)|N.i(M);return new d(R,this.h|N.h)},r.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],M=0;M<A;M++)R[M]=this.i(M)^N.i(M);return new d(R,this.h^N.h)};function se(N){for(var A=N.g.length+1,R=[],M=0;M<A;M++)R[M]=N.i(M)<<1|N.i(M-1)>>>31;return new d(R,N.h)}function ce(N,A){var R=A>>5;A%=32;for(var M=N.g.length-R,V=[],L=0;L<M;L++)V[L]=0<A?N.i(L+R)>>>A|N.i(L+R+1)<<32-A:N.i(L+R);return new d(V,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,NE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=E,ms=d}).apply(typeof g_<"u"?g_:typeof self<"u"?self:typeof window<"u"?window:{});var Qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OE,Ll,kE,sh,km,ME,VE,PE;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,v){return c==Array.prototype||c==Object.prototype||(c[p]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qc=="object"&&Qc];for(var p=0;p<c.length;++p){var v=c[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,p){if(p)e:{var v=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var j=c[w];if(!(j in v))break e;v=v[j]}c=c[c.length-1],w=v[c],p=p(w),p!=w&&p!=null&&e(v,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var v=0,w=!1,j={next:function(){if(!w&&v<c.length){var Y=v++;return{value:p(Y,c[Y]),done:!1}}return w=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function g(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function y(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function E(c,p,v){return c.call.apply(c.bind,arguments)}function _(c,p,v){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,w),c.apply(p,j)}}return function(){return c.apply(p,arguments)}}function S(c,p,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:_,S.apply(null,arguments)}function D(c,p){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function F(c,p){function v(){}v.prototype=p.prototype,c.aa=p.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(w,j,Y){for(var ue=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ue[ze-2]=arguments[ze];return p.prototype[j].apply(w,ue)}}function K(c){const p=c.length;if(0<p){const v=Array(p);for(let w=0;w<p;w++)v[w]=c[w];return v}return[]}function O(c,p){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(g(w)){const j=c.length||0,Y=w.length||0;c.length=j+Y;for(let ue=0;ue<Y;ue++)c[j+ue]=w[ue]}else c.push(w)}}class Z{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function re(c){return/^[\s\xa0]*$/.test(c)}function $(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function le(c){return le[" "](c),c}le[" "]=function(){};var se=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function ce(c,p,v){for(const w in c)p.call(v,c[w],w,c)}function N(c,p){for(const v in c)p.call(void 0,c[v],v,c)}function A(c){const p={};for(const v in c)p[v]=c[v];return p}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(c,p){let v,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(v in w)c[v]=w[v];for(let Y=0;Y<R.length;Y++)v=R[Y],Object.prototype.hasOwnProperty.call(w,v)&&(c[v]=w[v])}}function V(c){var p=1;c=c.split(":");const v=[];for(;0<p&&c.length;)v.push(c.shift()),p--;return c.length&&v.push(c.join(":")),v}function L(c){m.setTimeout(()=>{throw c},0)}function I(){var c=Ie;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class We{constructor(){this.h=this.g=null}add(p,v){const w=et.get();w.set(p,v),this.h?this.h.next=w:this.g=w,this.h=w}}var et=new Z(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ge=!1,Ie=new We,k=()=>{const c=m.Promise.resolve(void 0);ae=()=>{c.then(te)}};var te=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(v){L(v)}var p=et;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}ge=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,p),m.removeEventListener("test",v,p)}catch{}return c}();function Ae(c,p){if(ie.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(se){e:{try{le(p.nodeName);var j=!0;break e}catch{}j=!1}j||(p=null)}}else v=="mouseover"?p=c.fromElement:v=="mouseout"&&(p=c.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:pe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ae.aa.h.call(this)}}F(Ae,ie);var pe={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var mt="closure_listenable_"+(1e6*Math.random()|0),je=0;function Rt(c,p,v,w,j){this.listener=c,this.proxy=null,this.src=p,this.type=v,this.capture=!!w,this.ha=j,this.key=++je,this.da=this.fa=!1}function ke(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function gn(c){this.src=c,this.g={},this.h=0}gn.prototype.add=function(c,p,v,w,j){var Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);var ue=wn(c,p,w,j);return-1<ue?(p=c[ue],v||(p.fa=!1)):(p=new Rt(p,this.src,Y,!!w,j),p.fa=v,c.push(p)),p};function qt(c,p){var v=p.type;if(v in c.g){var w=c.g[v],j=Array.prototype.indexOf.call(w,p,void 0),Y;(Y=0<=j)&&Array.prototype.splice.call(w,j,1),Y&&(ke(p),c.g[v].length==0&&(delete c.g[v],c.h--))}}function wn(c,p,v,w){for(var j=0;j<c.length;++j){var Y=c[j];if(!Y.da&&Y.listener==p&&Y.capture==!!v&&Y.ha==w)return j}return-1}var Zt="closure_lm_"+(1e6*Math.random()|0),zn={};function rr(c,p,v,w,j){if(Array.isArray(p)){for(var Y=0;Y<p.length;Y++)rr(c,p[Y],v,w,j);return null}return v=pa(v),c&&c[mt]?c.K(p,v,y(w)?!!w.capture:!1,j):pn(c,p,v,!1,w,j)}function pn(c,p,v,w,j,Y){if(!p)throw Error("Invalid event type");var ue=y(j)?!!j.capture:!!j,ze=Gr(c);if(ze||(c[Zt]=ze=new gn(c)),v=ze.add(p,v,w,ue,Y),v.proxy)return v;if(w=ga(),v.proxy=w,w.src=c,w.listener=v,c.addEventListener)me||(j=ue),j===void 0&&(j=!1),c.addEventListener(p.toString(),w,j);else if(c.attachEvent)c.attachEvent(Bn(p.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ga(){function c(v){return p.call(c.src,c.listener,v)}const p=Di;return c}function Hr(c,p,v,w,j){if(Array.isArray(p))for(var Y=0;Y<p.length;Y++)Hr(c,p[Y],v,w,j);else w=y(w)?!!w.capture:!!w,v=pa(v),c&&c[mt]?(c=c.i,p=String(p).toString(),p in c.g&&(Y=c.g[p],v=wn(Y,v,w,j),-1<v&&(ke(Y[v]),Array.prototype.splice.call(Y,v,1),Y.length==0&&(delete c.g[p],c.h--)))):c&&(c=Gr(c))&&(p=c.g[p.toString()],c=-1,p&&(c=wn(p,v,w,j)),(v=-1<c?p[c]:null)&&yn(v))}function yn(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[mt])qt(p.i,c);else{var v=c.type,w=c.proxy;p.removeEventListener?p.removeEventListener(v,w,c.capture):p.detachEvent?p.detachEvent(Bn(v),w):p.addListener&&p.removeListener&&p.removeListener(w),(v=Gr(p))?(qt(v,c),v.h==0&&(v.src=null,p[Zt]=null)):ke(c)}}}function Bn(c){return c in zn?zn[c]:zn[c]="on"+c}function Di(c,p){if(c.da)c=!0;else{p=new Ae(p,this);var v=c.listener,w=c.ha||c.src;c.fa&&yn(c),c=v.call(w,p)}return c}function Gr(c){return c=c[Zt],c instanceof gn?c:null}var Ni="__closure_events_fn_"+(1e9*Math.random()>>>0);function pa(c){return typeof c=="function"?c:(c[Ni]||(c[Ni]=function(p){return c.handleEvent(p)}),c[Ni])}function ct(){oe.call(this),this.i=new gn(this),this.M=this,this.F=null}F(ct,oe),ct.prototype[mt]=!0,ct.prototype.removeEventListener=function(c,p,v,w){Hr(this,c,p,v,w)};function Pe(c,p){var v,w=c.F;if(w)for(v=[];w;w=w.F)v.push(w);if(c=c.M,w=p.type||p,typeof p=="string")p=new ie(p,c);else if(p instanceof ie)p.target=p.target||c;else{var j=p;p=new ie(w,c),M(p,j)}if(j=!0,v)for(var Y=v.length-1;0<=Y;Y--){var ue=p.g=v[Y];j=xt(ue,w,!0,p)&&j}if(ue=p.g=c,j=xt(ue,w,!0,p)&&j,j=xt(ue,w,!1,p)&&j,v)for(Y=0;Y<v.length;Y++)ue=p.g=v[Y],j=xt(ue,w,!1,p)&&j}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var v=c.g[p],w=0;w<v.length;w++)ke(v[w]);delete c.g[p],c.h--}}this.F=null},ct.prototype.K=function(c,p,v,w){return this.i.add(String(c),p,!1,v,w)},ct.prototype.L=function(c,p,v,w){return this.i.add(String(c),p,!0,v,w)};function xt(c,p,v,w){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var j=!0,Y=0;Y<p.length;++Y){var ue=p[Y];if(ue&&!ue.da&&ue.capture==v){var ze=ue.listener,Pt=ue.ha||ue.src;ue.fa&&qt(c.i,ue),j=ze.call(Pt,w)!==!1&&j}}return j&&!w.defaultPrevented}function yt(c,p,v){if(typeof c=="function")v&&(c=S(c,v));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function As(c){c.g=yt(()=>{c.g=null,c.i&&(c.i=!1,As(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Fn extends oe{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:As(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vr(c){oe.call(this),this.h=c,this.g={}}F(vr,oe);var Kr=[];function Yr(c){ce(c.g,function(p,v){this.g.hasOwnProperty(v)&&yn(p)},c),c.g={}}vr.prototype.N=function(){vr.aa.N.call(this),Yr(this)},vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vn=m.JSON.stringify,Qr=m.JSON.parse,Xr=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Oi(){}Oi.prototype.h=null;function Rs(c){return c.h||(c.h=c.i())}function xs(){}var ir={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ot(){ie.call(this,"d")}F(ot,ie);function Mt(){ie.call(this,"c")}F(Mt,ie);var ht={},An=null;function Et(){return An=An||new ct}ht.La="serverreachability";function It(c){ie.call(this,ht.La,c)}F(It,ie);function Vt(c){const p=Et();Pe(p,new It(p))}ht.STAT_EVENT="statevent";function sr(c,p){ie.call(this,ht.STAT_EVENT,c),this.stat=p}F(sr,ie);function xe(c){const p=Et();Pe(p,new sr(p,c))}ht.Ma="timingevent";function tt(c,p){ie.call(this,ht.Ma,c),this.size=p}F(tt,ie);function Ge(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function vt(){this.g=!0}vt.prototype.xa=function(){this.g=!1};function ar(c,p,v,w,j,Y){c.info(function(){if(c.g)if(Y)for(var ue="",ze=Y.split("&"),Pt=0;Pt<ze.length;Pt++){var Be=ze[Pt].split("=");if(1<Be.length){var Gt=Be[0];Be=Be[1];var Lt=Gt.split("_");ue=2<=Lt.length&&Lt[1]=="type"?ue+(Gt+"="+Be+"&"):ue+(Gt+"=redacted&")}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+p+`
`+v+`
`+ue})}function $r(c,p,v,w,j,Y,ue){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+p+`
`+v+`
`+Y+" "+ue})}function Jt(c,p,v,w){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+or(c,v)+(w?" "+w:"")})}function _r(c,p){c.info(function(){return"TIMEOUT: "+p})}vt.prototype.info=function(){};function or(c,p){if(!c.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var w=v[c];if(!(2>w.length)){var j=w[1];if(Array.isArray(j)&&!(1>j.length)){var Y=j[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ue=1;ue<j.length;ue++)j[ue]=""}}}}return vn(v)}catch{return p}}var ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},br;function Er(){}F(Er,Oi),Er.prototype.g=function(){return new XMLHttpRequest},Er.prototype.i=function(){return{}},br=new Er;function _n(c,p,v,w){this.j=c,this.i=p,this.l=v,this.R=w||1,this.U=new vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tt}function Tt(){this.i=null,this.g="",this.h=!1}var Vo={},ya={};function lr(c,p,v){c.L=1,c.v=Os(On(p)),c.m=v,c.P=!0,Jr(c,null)}function Jr(c,p){c.F=Date.now(),Is(c),c.A=On(c.v);var v=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Bo(v.i,"t",w),c.C=0,v=c.j.J,c.h=new Tt,c.g=Bu(c.j,v?p:null,!c.m),0<c.O&&(c.M=new Fn(S(c.Y,c,c.g),c.O)),p=c.U,v=c.g,w=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(Kr[0]=j.toString()),j=Kr);for(var Y=0;Y<j.length;Y++){var ue=rr(v,j[Y],w||p.handleEvent,!1,p.h||p);if(!ue)break;p.g[ue.key]=ue}p=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Vt(),ar(c.i,c.u,c.A,c.l,c.R,c.m)}_n.prototype.ca=function(c){c=c.target;const p=this.M;p&&Kn(c)==3?p.j():this.Y(c)},_n.prototype.Y=function(c){try{if(c==this.g)e:{const Lt=Kn(this.g);var p=this.g.Ba();const ai=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||ku(this.g)))){this.J||Lt!=4||p==7||(p==8||0>=ai?Vt(3):Vt(2)),Mi(this);var v=this.g.Z();this.X=v;t:if(Ru(this)){var w=ku(this.g);c="";var j=w.length,Y=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wt(this),Tr(this);var ue="";break t}this.h.i=new m.TextDecoder}for(p=0;p<j;p++)this.h.h=!0,c+=this.h.i.decode(w[p],{stream:!(Y&&p==j-1)});w.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=v==200,$r(this.i,this.u,this.A,this.l,this.R,Lt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Pt=this.g;if((ze=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(ze)){var Be=ze;break t}}Be=null}if(v=Be)Jt(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cs(this,v);else{this.o=!1,this.s=3,xe(12),Wt(this),Tr(this);break e}}if(this.P){v=!0;let en;for(;!this.J&&this.C<ue.length;)if(en=xu(this,ue),en==ya){Lt==4&&(this.s=4,xe(14),v=!1),Jt(this.i,this.l,null,"[Incomplete Response]");break}else if(en==Vo){this.s=4,xe(15),Jt(this.i,this.l,ue,"[Invalid Chunk]"),v=!1;break}else Jt(this.i,this.l,en,null),Cs(this,en);if(Ru(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||ue.length!=0||this.h.h||(this.s=1,xe(16),v=!1),this.o=this.o&&v,!v)Jt(this.i,this.l,ue,"[Invalid Chunked Response]"),Wt(this),Tr(this);else if(0<ue.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),zs(Gt),Gt.M=!0,xe(11))}}else Jt(this.i,this.l,ue,null),Cs(this,ue);Lt==4&&Wt(this),this.o&&!this.J&&(Lt==4?Uu(this.j,this):(this.o=!1,Is(this)))}else ad(this.g),v==400&&0<ue.indexOf("Unknown SID")?(this.s=3,xe(12)):(this.s=0,xe(13)),Wt(this),Tr(this)}}}catch{}finally{}};function Ru(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function xu(c,p){var v=c.C,w=p.indexOf(`
`,v);return w==-1?ya:(v=Number(p.substring(v,w)),isNaN(v)?Vo:(w+=1,w+v>p.length?ya:(p=p.slice(w,w+v),c.C=w+v,p)))}_n.prototype.cancel=function(){this.J=!0,Wt(this)};function Is(c){c.S=Date.now()+c.I,Iu(c,c.I)}function Iu(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ge(S(c.ba,c),p)}function Mi(c){c.B&&(m.clearTimeout(c.B),c.B=null)}_n.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(_r(this.i,this.A),this.L!=2&&(Vt(),xe(17)),Wt(this),this.s=2,Tr(this)):Iu(this,this.S-c)};function Tr(c){c.j.G==0||c.J||Uu(c.j,c)}function Wt(c){Mi(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,Yr(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function Cs(c,p){try{var v=c.j;if(v.G!=0&&(v.g==c||Po(v.h,c))){if(!c.K&&Po(v.h,c)&&v.G==3){try{var w=v.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Ca(v),xa(v);else break e;Ko(v),xe(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ge(S(v.Za,v),6e3));if(1>=_a(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else si(v,11)}else if((c.K||v.g==c)&&Ca(v),!re(p))for(j=v.Da.g.parse(p),p=0;p<j.length;p++){let Be=j[p];if(v.T=Be[0],Be=Be[1],v.G==2)if(Be[0]=="c"){v.K=Be[1],v.ia=Be[2];const Gt=Be[3];Gt!=null&&(v.la=Gt,v.j.info("VER="+v.la));const Lt=Be[4];Lt!=null&&(v.Aa=Lt,v.j.info("SVER="+v.Aa));const ai=Be[5];ai!=null&&typeof ai=="number"&&0<ai&&(w=1.5*ai,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const en=c.g;if(en){const Cr=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cr){var Y=w.h;Y.g||Cr.indexOf("spdy")==-1&&Cr.indexOf("quic")==-1&&Cr.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(ba(Y,Y.h),Y.h=null))}if(w.D){const Qo=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;Qo&&(w.ya=Qo,nt(w.I,w.D,Qo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var ue=c;if(w.qa=zu(w,w.J?w.ia:null,w.W),ue.K){bn(w.h,ue);var ze=ue,Pt=w.L;Pt&&(ze.I=Pt),ze.B&&(Mi(ze),Is(ze)),w.g=ue}else Pu(w);0<v.i.length&&Ia(v)}else Be[0]!="stop"&&Be[0]!="close"||si(v,7);else v.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?si(v,7):Ho(v):Be[0]!="noop"&&v.l&&v.l.ta(Be),v.v=0)}}Vt(4)}catch{}}var Cu=class{constructor(c,p){this.g=c,this.map=p}};function Wr(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function va(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _a(c){return c.h?1:c.g?c.g.size:0}function Po(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function ba(c,p){c.g?c.g.add(p):c.h=p}function bn(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Wr.prototype.cancel=function(){if(this.i=Lo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Lo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const v of c.g.values())p=p.concat(v.D);return p}return K(c.i)}function nd(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var p=[],v=c.length,w=0;w<v;w++)p.push(c[w]);return p}p=[],v=0;for(w in c)p[v++]=c[w];return p}function Ea(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var p=[];c=c.length;for(var v=0;v<c;v++)p.push(v);return p}p=[],v=0;for(const w in c)p[v++]=w;return p}}}function Uo(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var v=Ea(c),w=nd(c),j=w.length,Y=0;Y<j;Y++)p.call(void 0,w[Y],v&&v[Y],c)}var Ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rd(c,p){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var w=c[v].indexOf("="),j=null;if(0<=w){var Y=c[v].substring(0,w);j=c[v].substring(w+1)}else Y=c[v];p(Y,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Ct(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ct){this.h=c.h,Ns(this,c.j),this.o=c.o,this.g=c.g,Vi(this,c.s),this.l=c.l;var p=c.i,v=new ti;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),ei(this,v),this.m=c.m}else c&&(p=String(c).match(Ds))?(this.h=!1,Ns(this,p[1]||"",!0),this.o=qn(p[2]||""),this.g=qn(p[3]||"",!0),Vi(this,p[4]),this.l=qn(p[5]||"",!0),ei(this,p[6]||"",!0),this.m=qn(p[7]||"")):(this.h=!1,this.i=new ti(null,this.h))}Ct.prototype.toString=function(){var c=[],p=this.j;p&&c.push(ks(p,jo,!0),":");var v=this.g;return(v||p=="file")&&(c.push("//"),(p=this.o)&&c.push(ks(p,jo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ks(v,v.charAt(0)=="/"?id:zo,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ks(v,Ta)),c.join("")};function On(c){return new Ct(c)}function Ns(c,p,v){c.j=v?qn(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Vi(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function ei(c,p,v){p instanceof ti?(c.i=p,Nu(c.i,c.h)):(v||(p=ks(p,sd)),c.i=new ti(p,c.h))}function nt(c,p,v){c.i.set(p,v)}function Os(c){return nt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function qn(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ks(c,p,v){return typeof c=="string"?(c=encodeURI(c).replace(p,Du),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Du(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var jo=/[#\/\?@]/g,zo=/[#\?:]/g,id=/[#\?]/g,sd=/[#\?@]/g,Ta=/#/g;function ti(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Hn(c){c.g||(c.g=new Map,c.h=0,c.i&&rd(c.i,function(p,v){c.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}r=ti.prototype,r.add=function(c,p){Hn(this),this.i=null,c=Sr(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(p),this.h+=1,this};function ni(c,p){Hn(c),p=Sr(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function ri(c,p){return Hn(c),p=Sr(c,p),c.g.has(p)}r.forEach=function(c,p){Hn(this),this.g.forEach(function(v,w){v.forEach(function(j){c.call(p,j,w,this)},this)},this)},r.na=function(){Hn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let w=0;w<p.length;w++){const j=c[w];for(let Y=0;Y<j.length;Y++)v.push(p[w])}return v},r.V=function(c){Hn(this);let p=[];if(typeof c=="string")ri(this,c)&&(p=p.concat(this.g.get(Sr(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)p=p.concat(c[v])}return p},r.set=function(c,p){return Hn(this),this.i=null,c=Sr(this,c),ri(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},r.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Bo(c,p,v){ni(c,p),0<v.length&&(c.i=null,c.g.set(Sr(c,p),K(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var w=p[v];const Y=encodeURIComponent(String(w)),ue=this.V(w);for(w=0;w<ue.length;w++){var j=Y;ue[w]!==""&&(j+="="+encodeURIComponent(String(ue[w]))),c.push(j)}}return this.i=c.join("&")};function Sr(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Nu(c,p){p&&!c.j&&(Hn(c),c.i=null,c.g.forEach(function(v,w){var j=w.toLowerCase();w!=j&&(ni(this,w),Bo(this,j,v))},c)),c.j=p}function Ms(c,p){const v=new vt;if(m.Image){const w=new Image;w.onload=D(Gn,v,"TestLoadImage: loaded",!0,p,w),w.onerror=D(Gn,v,"TestLoadImage: error",!1,p,w),w.onabort=D(Gn,v,"TestLoadImage: abort",!1,p,w),w.ontimeout=D(Gn,v,"TestLoadImage: timeout",!1,p,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else p(!1)}function ur(c,p){const v=new vt,w=new AbortController,j=setTimeout(()=>{w.abort(),Gn(v,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:w.signal}).then(Y=>{clearTimeout(j),Y.ok?Gn(v,"TestPingServer: ok",!0,p):Gn(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(j),Gn(v,"TestPingServer: error",!1,p)})}function Gn(c,p,v,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(v)}catch{}}function Vs(){this.g=new Xr}function wr(c,p,v){const w=v||"";try{Uo(c,function(j,Y){let ue=j;y(j)&&(ue=vn(j)),p.push(w+Y+"="+encodeURIComponent(ue))})}catch(j){throw p.push(w+"type="+encodeURIComponent("_badmap")),j}}function Pi(c){this.l=c.Ub||null,this.j=c.eb||!1}F(Pi,Oi),Pi.prototype.g=function(){return new ii(this.l,this.j)},Pi.prototype.i=function(c){return function(){return c}}({});function ii(c,p){ct.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(ii,ct),r=ii.prototype,r.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Rr(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Rr(this)),this.g&&(this.readyState=3,Rr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ar(this):Rr(this),this.readyState==3&&Fo(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Ar(this))},r.Qa=function(c){this.g&&(this.response=c,Ar(this))},r.ga=function(){this.g&&Ar(this)};function Ar(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Rr(c)}r.setRequestHeader=function(c,p){this.u.append(c,p)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=p.next();return c.join(`\r
`)};function Rr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qo(c){let p="";return ce(c,function(v,w){p+=w,p+=":",p+=v,p+=`\r
`}),p}function Ht(c,p,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=qo(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):nt(c,p,v))}function Qe(c){ct.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(Qe,ct);var Sa=/^https?$/i,Ps=["POST","PUT"];r=Qe.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,p,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():br.g(),this.v=this.o?Rs(this.o):Rs(br),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(Y){Ou(this,Y);return}if(c=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)v.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Y of w.keys())v.set(Y,w.get(Y));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),j=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ps,p,void 0))||w||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of v)this.g.setRequestHeader(Y,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ls(this),this.u=!0,this.g.send(c),this.u=!1}catch(Y){Ou(this,Y)}};function Ou(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,wa(c),xr(c)}function wa(c){c.A||(c.A=!0,Pe(c,"complete"),Pe(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Pe(this,"complete"),Pe(this,"abort"),xr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xr(this,!0)),Qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Aa(this):this.bb())},r.bb=function(){Aa(this)};function Aa(c){if(c.h&&typeof d<"u"&&(!c.v[1]||Kn(c)!=4||c.Z()!=2)){if(c.u&&Kn(c)==4)yt(c.Ea,0,c);else if(Pe(c,"readystatechange"),Kn(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var w;if(w=ue===0){var j=String(c.D).match(Ds)[1]||null;!j&&m.self&&m.self.location&&(j=m.self.location.protocol.slice(0,-1)),w=!Sa.test(j?j.toLowerCase():"")}v=w}if(v)Pe(c,"complete"),Pe(c,"success");else{c.m=6;try{var Y=2<Kn(c)?c.g.statusText:""}catch{Y=""}c.l=Y+" ["+c.Z()+"]",wa(c)}}finally{xr(c)}}}}function xr(c,p){if(c.g){Ls(c);const v=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Pe(c,"ready");try{v.onreadystatechange=w}catch{}}}function Ls(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Kn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Qr(p)}};function ku(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ad(c){const p={};c=(c.g&&2<=Kn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(re(c[w]))continue;var v=V(c[w]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=p[j]||[];p[j]=Y,Y.push(v)}N(p,function(w){return w.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Us(c,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||p}function Ra(c){this.Aa=0,this.i=[],this.j=new vt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Us("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Us("baseRetryDelayMs",5e3,c),this.cb=Us("retryDelaySeedMs",1e4,c),this.Wa=Us("forwardChannelMaxRetries",2,c),this.wa=Us("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Wr(c&&c.concurrentRequestLimit),this.Da=new Vs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ra.prototype,r.la=8,r.G=1,r.connect=function(c,p,v,w){xe(0),this.W=c,this.H=p||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=zu(this,null,this.W),Ia(this)};function Ho(c){if(Mu(c),c.G==3){var p=c.U++,v=On(c.I);if(nt(v,"SID",c.K),nt(v,"RID",p),nt(v,"TYPE","terminate"),js(c,v),p=new _n(c,c.j,p),p.L=2,p.v=Os(On(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=p.v,v=!0),v||(p.g=Bu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Is(p)}ju(c)}function xa(c){c.g&&(zs(c),c.g.cancel(),c.g=null)}function Mu(c){xa(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ca(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Ia(c){if(!va(c.h)&&!c.s){c.s=!0;var p=c.Ga;ae||k(),ge||(ae(),ge=!0),Ie.add(p,c),c.B=0}}function od(c,p){return _a(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ge(S(c.Ga,c,p),Yo(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new _n(this,this.j,c);let Y=this.o;if(this.S&&(Y?(Y=A(Y),M(Y,this.S)):Y=this.S),this.m!==null||this.O||(j.H=Y,Y=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=Vu(this,j,p),v=On(this.I),nt(v,"RID",c),nt(v,"CVER",22),this.D&&nt(v,"X-HTTP-Session-Id",this.D),js(this,v),Y&&(this.O?p="headers="+encodeURIComponent(String(qo(Y)))+"&"+p:this.m&&Ht(v,this.m,Y)),ba(this.h,j),this.Ua&&nt(v,"TYPE","init"),this.P?(nt(v,"$req",p),nt(v,"SID","null"),j.T=!0,lr(j,v,null)):lr(j,v,p),this.G=2}}else this.G==3&&(c?Go(this,c):this.i.length==0||va(this.h)||Go(this))};function Go(c,p){var v;p?v=p.l:v=c.U++;const w=On(c.I);nt(w,"SID",c.K),nt(w,"RID",v),nt(w,"AID",c.T),js(c,w),c.m&&c.o&&Ht(w,c.m,c.o),v=new _n(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Vu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ba(c.h,v),lr(v,w,p)}function js(c,p){c.H&&ce(c.H,function(v,w){nt(p,w,v)}),c.l&&Uo({},function(v,w){nt(p,w,v)})}function Vu(c,p,v){v=Math.min(c.i.length,v);var w=c.l?S(c.l.Na,c.l,c):null;e:{var j=c.i;let Y=-1;for(;;){const ue=["count="+v];Y==-1?0<v?(Y=j[0].g,ue.push("ofs="+Y)):Y=0:ue.push("ofs="+Y);let ze=!0;for(let Pt=0;Pt<v;Pt++){let Be=j[Pt].g;const Gt=j[Pt].map;if(Be-=Y,0>Be)Y=Math.max(0,j[Pt].g-100),ze=!1;else try{wr(Gt,ue,"req"+Be+"_")}catch{w&&w(Gt)}}if(ze){w=ue.join("&");break e}}}return c=c.i.splice(0,v),p.D=c,w}function Pu(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;ae||k(),ge||(ae(),ge=!0),Ie.add(p,c),c.v=0}}function Ko(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ge(S(c.Fa,c),Yo(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Lu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ge(S(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xe(10),xa(this),Lu(this))};function zs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Lu(c){c.g=new _n(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=On(c.qa);nt(p,"RID","rpc"),nt(p,"SID",c.K),nt(p,"AID",c.T),nt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&nt(p,"TO",c.ja),nt(p,"TYPE","xmlhttp"),js(c,p),c.m&&c.o&&Ht(p,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Os(On(p)),v.m=null,v.P=!0,Jr(v,c)}r.Za=function(){this.C!=null&&(this.C=null,xa(this),Ko(this),xe(19))};function Ca(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Uu(c,p){var v=null;if(c.g==p){Ca(c),zs(c),c.g=null;var w=2}else if(Po(c.h,p))v=p.D,bn(c.h,p),w=1;else return;if(c.G!=0){if(p.o)if(w==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var j=c.B;w=Et(),Pe(w,new tt(w,v)),Ia(c)}else Pu(c);else if(j=p.s,j==3||j==0&&0<p.X||!(w==1&&od(c,p)||w==2&&Ko(c)))switch(v&&0<v.length&&(p=c.h,p.i=p.i.concat(v)),j){case 1:si(c,5);break;case 4:si(c,10);break;case 3:si(c,6);break;default:si(c,2)}}}function Yo(c,p){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*p}function si(c,p){if(c.j.info("Error code "+p),p==2){var v=S(c.fb,c),w=c.Xa;const j=!w;w=new Ct(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ns(w,"https"),Os(w),j?Ms(w.toString(),v):ur(w.toString(),v)}else xe(2);c.G=0,c.l&&c.l.sa(p),ju(c),Mu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function ju(c){if(c.G=0,c.ka=[],c.l){const p=Lo(c.h);(p.length!=0||c.i.length!=0)&&(O(c.ka,p),O(c.ka,c.i),c.h.i.length=0,K(c.i),c.i.length=0),c.l.ra()}}function zu(c,p,v){var w=v instanceof Ct?On(v):new Ct(v);if(w.g!="")p&&(w.g=p+"."+w.g),Vi(w,w.s);else{var j=m.location;w=j.protocol,p=p?p+"."+j.hostname:j.hostname,j=+j.port;var Y=new Ct(null);w&&Ns(Y,w),p&&(Y.g=p),j&&Vi(Y,j),v&&(Y.l=v),w=Y}return v=c.D,p=c.ya,v&&p&&nt(w,v,p),nt(w,"VER",c.la),js(c,w),w}function Bu(c,p,v){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Qe(new Pi({eb:v})):new Qe(c.pa),p.Ha(c.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}r=Fu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Da(){}Da.prototype.g=function(c,p){return new En(c,p)};function En(c,p){ct.call(this),this.g=new Ra(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!re(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!re(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Ir(this)}F(En,ct),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Ho(this.g)},En.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=vn(c),c=v);p.i.push(new Cu(p.Ya++,c)),p.G==3&&Ia(p)},En.prototype.N=function(){this.g.l=null,delete this.j,Ho(this.g),delete this.g,En.aa.N.call(this)};function qu(c){ot.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const v in p){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}F(qu,ot);function Hu(){Mt.call(this),this.status=1}F(Hu,Mt);function Ir(c){this.g=c}F(Ir,Fu),Ir.prototype.ua=function(){Pe(this.g,"a")},Ir.prototype.ta=function(c){Pe(this.g,new qu(c))},Ir.prototype.sa=function(c){Pe(this.g,new Hu)},Ir.prototype.ra=function(){Pe(this.g,"b")},Da.prototype.createWebChannel=Da.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,PE=function(){return new Da},VE=function(){return Et()},ME=ht,km={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ki.NO_ERROR=0,ki.TIMEOUT=8,ki.HTTP_ERROR=6,sh=ki,Zr.COMPLETE="complete",kE=Zr,xs.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",ct.prototype.listen=ct.prototype.K,Ll=xs,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,OE=Qe}).apply(typeof Qc<"u"?Qc:typeof self<"u"?self:typeof window<"u"?window:{});const p_="@firebase/firestore",y_="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new og("@firebase/firestore");function so(){return vs.logLevel}function bC(r){vs.setLogLevel(r)}function he(r,...e){if(vs.logLevel<=Le.DEBUG){const n=e.map(bg);vs.debug(`Firestore (${Do}): ${r}`,...n)}}function xi(r,...e){if(vs.logLevel<=Le.ERROR){const n=e.map(bg);vs.error(`Firestore (${Do}): ${r}`,...n)}}function vo(r,...e){if(vs.logLevel<=Le.WARN){const n=e.map(bg);vs.warn(`Firestore (${Do}): ${r}`,...n)}}function bg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,LE(r,s,n)}function LE(r,e,n){let s=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw xi(s),new Error(s)}function $e(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||LE(e,o,s)}function Re(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class TC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class SC{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new gs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new gs,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const g=u;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new gs)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new UE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class wC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new wC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0,3512);const s=u=>{u.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,he("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new v_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new v_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=xC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Ne(r,e){return r<e?-1:r>e?1:0}function Mm(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return Ne(s,o);{const u=jE(),d=IC(u.encode(__(r,n)),u.encode(__(e,n)));return d!==0?d:Ne(s,o)}}n+=s>65535?2:1}return Ne(r.length,e.length)}function __(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function IC(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return Ne(r[n],e[n]);return Ne(r.length,e.length)}function _o(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=-62135596800,E_=1e6;class Bt{static now(){return Bt.fromMillis(Date.now())}static fromDate(e){return Bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*E_);return new Bt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<b_)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/E_}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-b_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Bt(0,0))}static max(){return new we(new Bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="__name__";class Vr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ee(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Vr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vr?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Vr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ne(e.length,n.length)}static compareSegments(e,n){const s=Vr.isNumericId(e),o=Vr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Vr.extractNumericId(e).compare(Vr.extractNumericId(n)):Mm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ms.fromString(e.substring(4,e.length-2))}}class ut extends Vr{construct(e,n,s){return new ut(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ut(n)}static emptyPath(){return new ut([])}}const CC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Vr{construct(e,n,s){return new an(e,n,s)}static isValidIdentifier(e){return CC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===T_}static keyField(){return new an([T_])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new fe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new fe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(u(),o++)}if(u(),d)throw new fe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(n)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(ut.fromString(e))}static fromName(e){return new ve(ut.fromString(e).popFirst(5))}static empty(){return new ve(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new ut(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=-1;function DC(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=we.fromTimestamp(s===1e9?new Bt(n+1,0):new Bt(n,s));return new _s(o,ve.empty(),e)}function NC(r){return new _s(r.readTime,r.key,nu)}class _s{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new _s(we.min(),ve.empty(),nu)}static max(){return new _s(we.max(),ve.empty(),nu)}}function OC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(r.documentKey,e.documentKey),n!==0?n:Ne(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(r){if(r.code!==ne.FAILED_PRECONDITION||r.message!==kC)throw r;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,s)=>{n(e)})}static reject(e){return new ee((n,s)=>{s(e)})}static waitFor(e){return new ee((n,s)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&n()},g=>s(g))}),d=!0,u===o&&n()})}static or(e){let n=ee.resolve(!1);for(const s of e)n=n.next(o=>o?ee.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new ee((s,o)=>{const u=e.length,d=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next(E=>{d[y]=E,++m,m===u&&s(d)},E=>o(E))}})}static doWhile(e,n){return new ee((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function VC(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Oo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Fh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg=-1;function qh(r){return r==null}function Sh(r){return r===0&&1/r==-1/0}function PC(r){return typeof r=="number"&&Number.isInteger(r)&&!Sh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="";function LC(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=S_(e)),e=UC(r.get(n),e);return S_(e)}function UC(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case BE:n+="";break;default:n+=u}}return n}function S_(r){return r+BE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ha(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function FE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||sn.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xc(this.root,e,this.comparator,!0)}}class Xc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??sn.RED,this.left=o??sn.EMPTY,this.right=u??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new sn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new A_(this.data.getIterator())}getIteratorFrom(e){return new A_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class A_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new mr([])}unionWith(e){let n=new Ft(an.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new mr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _o(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new qE("Invalid base64 string: "+u):u}}(e);return new on(n)}static fromUint8Array(e){const n=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new on(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const jC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(r){if($e(!!r,39018),typeof r=="string"){let e=0;const n=jC.exec(r);if($e(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(r.seconds),nanos:At(r.nanos)}}function At(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Es(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="server_timestamp",GE="__type__",KE="__previous_value__",YE="__local_write_time__";function Tg(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[GE])===null||n===void 0?void 0:n.stringValue)===HE}function Hh(r){const e=r.mapValue.fields[KE];return Tg(e)?Hh(e):e}function ru(r){const e=bs(r.mapValue.fields[YE].timestampValue);return new Bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,s,o,u,d,m,g,y,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=E}}const wh="(default)";class iu{constructor(e,n){this.projectId=e,this.database=n||wh}static empty(){return new iu("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="__type__",BC="__max__",$c={mapValue:{}},XE="__vector__",Ah="value";function Ts(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Tg(r)?4:qC(r)?9007199254740991:FC(r)?10:11:Ee(28295,{value:r})}function qr(r,e){if(r===e)return!0;const n=Ts(r);if(n!==Ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ru(r).isEqual(ru(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=bs(o.timestampValue),m=bs(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return Es(o.bytesValue).isEqual(Es(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return At(o.geoPointValue.latitude)===At(u.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return At(o.integerValue)===At(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=At(o.doubleValue),m=At(u.doubleValue);return d===m?Sh(d)===Sh(m):isNaN(d)&&isNaN(m)}return!1}(r,e);case 9:return _o(r.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(w_(d)!==w_(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!qr(d[g],m[g])))return!1;return!0}(r,e);default:return Ee(52216,{left:r})}}function su(r,e){return(r.values||[]).find(n=>qr(n,e))!==void 0}function bo(r,e){if(r===e)return 0;const n=Ts(r),s=Ts(e);if(n!==s)return Ne(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(r.booleanValue,e.booleanValue);case 2:return function(u,d){const m=At(u.integerValue||u.doubleValue),g=At(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(r,e);case 3:return R_(r.timestampValue,e.timestampValue);case 4:return R_(ru(r),ru(e));case 5:return Mm(r.stringValue,e.stringValue);case 6:return function(u,d){const m=Es(u),g=Es(d);return m.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),g=d.split("/");for(let y=0;y<m.length&&y<g.length;y++){const E=Ne(m[y],g[y]);if(E!==0)return E}return Ne(m.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,d){const m=Ne(At(u.latitude),At(d.latitude));return m!==0?m:Ne(At(u.longitude),At(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return x_(r.arrayValue,e.arrayValue);case 10:return function(u,d){var m,g,y,E;const _=u.fields||{},S=d.fields||{},D=(m=_[Ah])===null||m===void 0?void 0:m.arrayValue,F=(g=S[Ah])===null||g===void 0?void 0:g.arrayValue,K=Ne(((y=D==null?void 0:D.values)===null||y===void 0?void 0:y.length)||0,((E=F==null?void 0:F.values)===null||E===void 0?void 0:E.length)||0);return K!==0?K:x_(D,F)}(r.mapValue,e.mapValue);case 11:return function(u,d){if(u===$c.mapValue&&d===$c.mapValue)return 0;if(u===$c.mapValue)return 1;if(d===$c.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=d.fields||{},E=Object.keys(y);g.sort(),E.sort();for(let _=0;_<g.length&&_<E.length;++_){const S=Mm(g[_],E[_]);if(S!==0)return S;const D=bo(m[g[_]],y[E[_]]);if(D!==0)return D}return Ne(g.length,E.length)}(r.mapValue,e.mapValue);default:throw Ee(23264,{Pe:n})}}function R_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ne(r,e);const n=bs(r),s=bs(e),o=Ne(n.seconds,s.seconds);return o!==0?o:Ne(n.nanos,s.nanos)}function x_(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=bo(n[o],s[o]);if(u)return u}return Ne(n.length,s.length)}function Eo(r){return Vm(r)}function Vm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=bs(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Es(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return ve.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Vm(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${Vm(n.fields[d])}`;return o+"}"}(r.mapValue):Ee(61005,{value:r})}function ah(r){switch(Ts(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hh(r);return e?16+ah(e):16;case 5:return 2*r.stringValue.length;case 6:return Es(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+ah(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return ha(s.fields,(u,d)=>{o+=u.length+ah(d)}),o}(r.mapValue);default:throw Ee(13486,{value:r})}}function I_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Pm(r){return!!r&&"integerValue"in r}function Sg(r){return!!r&&"arrayValue"in r}function C_(r){return!!r&&"nullValue"in r}function D_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function oh(r){return!!r&&"mapValue"in r}function FC(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[QE])===null||n===void 0?void 0:n.stringValue)===XE}function Kl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ha(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Kl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kl(r.arrayValue.values[n]);return e}return Object.assign({},r)}function qC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===BC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(n)}setAll(e){let n=an.emptyPath(),s={},o=[];e.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=Kl(d):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];oh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){ha(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new nr(Kl(this.value))}}function $E(r){const e=[];return ha(r.fields,(n,s)=>{const o=new an([n]);if(oh(s)){const u=$E(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,s,o,u,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new fn(e,0,we.min(),we.min(),we.min(),nr.empty(),0)}static newFoundDocument(e,n,s,o){return new fn(e,1,n,we.min(),s,o,0)}static newNoDocument(e,n){return new fn(e,2,n,we.min(),we.min(),nr.empty(),0)}static newUnknownDocument(e,n){return new fn(e,3,n,we.min(),we.min(),nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.position=e,this.inclusive=n}}function N_(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],d=r.position[o];if(u.field.isKeyField()?s=ve.comparator(ve.fromName(d.referenceValue),n.key):s=bo(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function O_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!qr(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n="asc"){this.field=e,this.dir=n}}function HC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{}class kt extends ZE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new KC(e,n,s):n==="array-contains"?new XC(e,s):n==="in"?new $C(e,s):n==="not-in"?new ZC(e,s):n==="array-contains-any"?new JC(e,s):new kt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new YC(e,s):new QC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bo(n,this.value)):n!==null&&Ts(this.value)===Ts(n)&&this.matchesComparison(bo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends ZE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new yr(e,n)}matches(e){return JE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function JE(r){return r.op==="and"}function WE(r){return GC(r)&&JE(r)}function GC(r){for(const e of r.filters)if(e instanceof yr)return!1;return!0}function Lm(r){if(r instanceof kt)return r.field.canonicalString()+r.op.toString()+Eo(r.value);if(WE(r))return r.filters.map(e=>Lm(e)).join(",");{const e=r.filters.map(n=>Lm(n)).join(",");return`${r.op}(${e})`}}function eT(r,e){return r instanceof kt?function(s,o){return o instanceof kt&&s.op===o.op&&s.field.isEqual(o.field)&&qr(s.value,o.value)}(r,e):r instanceof yr?function(s,o){return o instanceof yr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,d,m)=>u&&eT(d,o.filters[m]),!0):!1}(r,e):void Ee(19439)}function tT(r){return r instanceof kt?function(n){return`${n.field.canonicalString()} ${n.op} ${Eo(n.value)}`}(r):r instanceof yr?function(n){return n.op.toString()+" {"+n.getFilters().map(tT).join(" ,")+"}"}(r):"Filter"}class KC extends kt{constructor(e,n,s){super(e,n,s),this.key=ve.fromName(s.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class YC extends kt{constructor(e,n){super(e,"in",n),this.keys=nT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QC extends kt{constructor(e,n){super(e,"not-in",n),this.keys=nT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nT(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ve.fromName(s.referenceValue))}class XC extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sg(n)&&su(n.arrayValue,this.value)}}class $C extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&su(this.value.arrayValue,n)}}class ZC extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!su(this.value.arrayValue,n)}}class JC extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>su(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n=null,s=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.Ie=null}}function k_(r,e=null,n=[],s=[],o=null,u=null,d=null){return new WC(r,e,n,s,o,u,d)}function wg(r){const e=Re(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Lm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Eo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Eo(s)).join(",")),e.Ie=n}return e.Ie}function Ag(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!HC(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!eT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!O_(r.startAt,e.startAt)&&O_(r.endAt,e.endAt)}function Um(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n=null,s=[],o=[],u=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function eD(r,e,n,s,o,u,d,m){return new bu(r,e,n,s,o,u,d,m)}function Gh(r){return new bu(r)}function M_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function rT(r){return r.collectionGroup!==null}function Yl(r){const e=Re(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Ft(an.comparator);return d.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new xh(u,s))}),n.has(an.keyField().canonicalString())||e.Ee.push(new xh(an.keyField(),s))}return e.Ee}function jr(r){const e=Re(r);return e.de||(e.de=tD(e,Yl(r))),e.de}function tD(r,e){if(r.limitType==="F")return k_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new xh(o.field,u)});const n=r.endAt?new Rh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Rh(r.startAt.position,r.startAt.inclusive):null;return k_(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function jm(r,e){const n=r.filters.concat([e]);return new bu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function zm(r,e,n){return new bu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Kh(r,e){return Ag(jr(r),jr(e))&&r.limitType===e.limitType}function iT(r){return`${wg(jr(r))}|lt:${r.limitType}`}function ao(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>tT(o)).join(", ")}]`),qh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Eo(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Eo(o)).join(",")),`Target(${s})`}(jr(r))}; limitType=${r.limitType})`}function Yh(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ve.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of Yl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(d,m,g){const y=N_(d,m,g);return d.inclusive?y<=0:y<0}(s.startAt,Yl(s),o)||s.endAt&&!function(d,m,g){const y=N_(d,m,g);return d.inclusive?y>=0:y>0}(s.endAt,Yl(s),o))}(r,e)}function nD(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function sT(r){return(e,n)=>{let s=!1;for(const o of Yl(r)){const u=rD(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function rD(r,e,n){const s=r.field.isKeyField()?ve.comparator(e.key,n.key):function(u,d,m){const g=d.data.field(u),y=m.data.field(u);return g!==null&&y!==null?bo(g,y):Ee(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return FE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=new pt(ve.comparator);function Ii(){return iD}const aT=new pt(ve.comparator);function Ul(...r){let e=aT;for(const n of r)e=e.insert(n.key,n);return e}function oT(r){let e=aT;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ra(){return Ql()}function lT(){return Ql()}function Ql(){return new da(r=>r.toString(),(r,e)=>r.isEqual(e))}const sD=new pt(ve.comparator),aD=new Ft(ve.comparator);function Ue(...r){let e=aD;for(const n of r)e=e.add(n);return e}const oD=new Ft(Ne);function lD(){return oD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function uT(r){return{integerValue:""+r}}function uD(r,e){return PC(e)?uT(e):Rg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(){this._=void 0}}function cD(r,e,n){return r instanceof au?function(o,u){const d={fields:{[GE]:{stringValue:HE},[YE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Tg(u)&&(u=Hh(u)),u&&(d.fields[KE]=u),{mapValue:d}}(n,e):r instanceof ou?hT(r,e):r instanceof lu?dT(r,e):function(o,u){const d=cT(o,u),m=V_(d)+V_(o.Re);return Pm(d)&&Pm(o.Re)?uT(m):Rg(o.serializer,m)}(r,e)}function hD(r,e,n){return r instanceof ou?hT(r,e):r instanceof lu?dT(r,e):n}function cT(r,e){return r instanceof Ih?function(s){return Pm(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class au extends Qh{}class ou extends Qh{constructor(e){super(),this.elements=e}}function hT(r,e){const n=fT(e);for(const s of r.elements)n.some(o=>qr(o,s))||n.push(s);return{arrayValue:{values:n}}}class lu extends Qh{constructor(e){super(),this.elements=e}}function dT(r,e){let n=fT(e);for(const s of r.elements)n=n.filter(o=>!qr(o,s));return{arrayValue:{values:n}}}class Ih extends Qh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function V_(r){return At(r.integerValue||r.doubleValue)}function fT(r){return Sg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n){this.field=e,this.transform=n}}function fD(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof ou&&o instanceof ou||s instanceof lu&&o instanceof lu?_o(s.elements,o.elements,qr):s instanceof Ih&&o instanceof Ih?qr(s.Re,o.Re):s instanceof au&&o instanceof au}(r.transform,e.transform)}class mD{constructor(e,n){this.version=e,this.transformResults=n}}class gr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Xh{}function mT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new xg(r.key,gr.none()):new Eu(r.key,r.data,gr.none());{const n=r.data,s=nr.empty();let o=new Ft(an.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new fa(r.key,s,new mr(o.toArray()),gr.none())}}function gD(r,e,n){r instanceof Eu?function(o,u,d){const m=o.value.clone(),g=L_(o.fieldTransforms,u,d.transformResults);m.setAll(g),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(r,e,n):r instanceof fa?function(o,u,d){if(!lh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=L_(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(gT(o)),g.setAll(m),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,e,n):function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function Xl(r,e,n,s){return r instanceof Eu?function(u,d,m,g){if(!lh(u.precondition,d))return m;const y=u.value.clone(),E=U_(u.fieldTransforms,g,d);return y.setAll(E),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null}(r,e,n,s):r instanceof fa?function(u,d,m,g){if(!lh(u.precondition,d))return m;const y=U_(u.fieldTransforms,g,d),E=d.data;return E.setAll(gT(u)),E.setAll(y),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(_=>_.field))}(r,e,n,s):function(u,d,m){return lh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(r,e,n)}function pD(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=cT(s.transform,o||null);u!=null&&(n===null&&(n=nr.empty()),n.set(s.field,u))}return n||null}function P_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&_o(s,o,(u,d)=>fD(u,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Eu extends Xh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fa extends Xh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function gT(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function L_(r,e,n){const s=new Map;$e(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let o=0;o<n.length;o++){const u=r[o],d=u.transform,m=e.data.field(u.field);s.set(u.field,hD(d,m,n[o]))}return s}function U_(r,e,n){const s=new Map;for(const o of r){const u=o.transform,d=n.data.field(o.field);s.set(o.field,cD(u,d,e))}return s}class xg extends Xh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yD extends Xh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&gD(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Xl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Xl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=lT();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const g=mT(d,m);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(we.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ue())}isEqual(e){return this.batchId===e.batchId&&_o(this.mutations,e.mutations,(n,s)=>P_(n,s))&&_o(this.baseMutations,e.baseMutations,(n,s)=>P_(n,s))}}class Ig{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){$e(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return sD}();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new Ig(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,qe;function ED(r){switch(r){case ne.OK:return Ee(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ee(15467,{code:r})}}function pT(r){if(r===void 0)return xi("GRPC error has no .code"),ne.UNKNOWN;switch(r){case Ot.OK:return ne.OK;case Ot.CANCELLED:return ne.CANCELLED;case Ot.UNKNOWN:return ne.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return ne.INTERNAL;case Ot.UNAVAILABLE:return ne.UNAVAILABLE;case Ot.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Ot.NOT_FOUND:return ne.NOT_FOUND;case Ot.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Ot.ABORTED:return ne.ABORTED;case Ot.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Ot.DATA_LOSS:return ne.DATA_LOSS;default:return Ee(39323,{code:r})}}(qe=Ot||(Ot={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=new ms([4294967295,4294967295],0);function j_(r){const e=jE().encode(r),n=new NE;return n.update(e),new Uint8Array(n.digest())}function z_(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ms([n,s],0),new ms([o,u],0)]}class Cg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new jl(`Invalid padding: ${n}`);if(s<0)throw new jl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new jl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new jl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ms.fromNumber(this.pe)}we(e,n,s){let o=e.add(n.multiply(ms.fromNumber(s)));return o.compare(TD)===1&&(o=new ms([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=j_(e),[s,o]=z_(n);for(let u=0;u<this.hashCount;u++){const d=this.we(s,o,u);if(!this.Se(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Cg(u,o,n);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.pe===0)return;const n=j_(e),[s,o]=z_(n);for(let u=0;u<this.hashCount;u++){const d=this.we(s,o,u);this.be(d)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new $h(we.min(),o,new pt(Ne),Ii(),Ue())}}class Tu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Tu(s,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,s,o){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=o}}class yT{constructor(e,n){this.targetId=e,this.Ce=n}}class vT{constructor(e,n,s=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class B_{constructor(){this.Fe=0,this.Me=F_(),this.xe=on.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ue(),n=Ue(),s=Ue();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ee(38017,{changeType:u})}}),new Tu(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=F_()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,$e(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class SD{constructor(e){this.ze=e,this.je=new Map,this.He=Ii(),this.Je=Zc(),this.Ye=Zc(),this.Ze=new pt(Ne)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,s=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(Um(u))if(s===0){const d=new ve(u.path);this.tt(n,d,fn.newNoDocument(d,we.min()))}else $e(s===1,20013,{expectedCount:s});else{const d=this.ut(n);if(d!==s){const m=this.ct(e),g=m?this.lt(m,e,d):1;if(g!==0){this.st(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=Es(s).toUint8Array()}catch(g){if(g instanceof qE)return vo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Cg(d,o,u)}catch(g){return vo(g instanceof jl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.pe===0?null:m}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const d=this.ze.Pt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,d)=>{const m=this._t(d);if(m){if(u.current&&Um(m.target)){const g=new ve(m.target.path);this.Et(g).has(d)||this.dt(d,g)||this.tt(d,g,fn.newNoDocument(g,e))}u.Le&&(n.set(d,u.qe()),u.Qe())}});let s=Ue();this.Ye.forEach((u,d)=>{let m=!0;d.forEachWhile(g=>{const y=this._t(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.He.forEach((u,d)=>d.setReadTime(e));const o=new $h(e,n,this.Ze,this.He,s);return this.He=Ii(),this.Je=Zc(),this.Ye=Zc(),this.Ze=new pt(Ne),o}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new B_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ft(Ne),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ft(Ne),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new B_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Zc(){return new pt(ve.comparator)}function F_(){return new pt(ve.comparator)}const wD={asc:"ASCENDING",desc:"DESCENDING"},AD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RD={and:"AND",or:"OR"};class xD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bm(r,e){return r.useProto3Json||qh(e)?e:{value:e}}function Ch(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _T(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function ID(r,e){return Ch(r,e.toTimestamp())}function zr(r){return $e(!!r,49232),we.fromTimestamp(function(n){const s=bs(n);return new Bt(s.seconds,s.nanos)}(r))}function Dg(r,e){return Fm(r,e).canonicalString()}function Fm(r,e){const n=function(o){return new ut(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function bT(r){const e=ut.fromString(r);return $e(AT(e),10190,{key:e.toString()}),e}function qm(r,e){return Dg(r.databaseId,e.path)}function pm(r,e){const n=bT(e);if(n.get(1)!==r.databaseId.projectId)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ve(TT(n))}function ET(r,e){return Dg(r.databaseId,e)}function CD(r){const e=bT(r);return e.length===4?ut.emptyPath():TT(e)}function Hm(r){return new ut(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function TT(r){return $e(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function q_(r,e,n){return{name:qm(r,e),fields:n.value.mapValue.fields}}function DD(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ee(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(y,E){return y.useProto3Json?($e(E===void 0||typeof E=="string",58123),on.fromBase64String(E||"")):($e(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),on.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(y){const E=y.code===void 0?ne.UNKNOWN:pT(y.code);return new fe(E,y.message||"")}(d);n=new vT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=pm(r,s.document.name),u=zr(s.document.updateTime),d=s.document.createTime?zr(s.document.createTime):we.min(),m=new nr({mapValue:{fields:s.document.fields}}),g=fn.newFoundDocument(o,u,d,m),y=s.targetIds||[],E=s.removedTargetIds||[];n=new uh(y,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=pm(r,s.document),u=s.readTime?zr(s.readTime):we.min(),d=fn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new uh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=pm(r,s.document),u=s.removedTargetIds||[];n=new uh([],u,o,null)}else{if(!("filter"in e))return Ee(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new bD(o,u),m=s.targetId;n=new yT(m,d)}}return n}function ND(r,e){let n;if(e instanceof Eu)n={update:q_(r,e.key,e.value)};else if(e instanceof xg)n={delete:qm(r,e.key)};else if(e instanceof fa)n={update:q_(r,e.key,e.data),updateMask:zD(e.fieldMask)};else{if(!(e instanceof yD))return Ee(16599,{ft:e.type});n={verify:qm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,d){const m=d.transform;if(m instanceof au)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ou)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof lu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ih)return{fieldPath:d.field.canonicalString(),increment:m.Re};throw Ee(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:ID(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ee(27497)}(r,e.precondition)),n}function OD(r,e){return r&&r.length>0?($e(e!==void 0,14353),r.map(n=>function(o,u){let d=o.updateTime?zr(o.updateTime):zr(u);return d.isEqual(we.min())&&(d=zr(u)),new mD(d,o.transformResults||[])}(n,e))):[]}function kD(r,e){return{documents:[ET(r,e.path)]}}function MD(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ET(r,o);const u=function(y){if(y.length!==0)return wT(yr.create(y,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const d=function(y){if(y.length!==0)return y.map(E=>function(S){return{field:oo(S.field),direction:LD(S.dir)}}(E))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=Bm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:n,parent:o}}function VD(r){let e=CD(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){$e(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(_){const S=ST(_);return S instanceof yr&&WE(S)?S.getFilters():[S]}(n.where));let d=[];n.orderBy&&(d=function(_){return _.map(S=>function(F){return new xh(lo(F.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(S))}(n.orderBy));let m=null;n.limit&&(m=function(_){let S;return S=typeof _=="object"?_.value:_,qh(S)?null:S}(n.limit));let g=null;n.startAt&&(g=function(_){const S=!!_.before,D=_.values||[];return new Rh(D,S)}(n.startAt));let y=null;return n.endAt&&(y=function(_){const S=!_.before,D=_.values||[];return new Rh(D,S)}(n.endAt)),eD(e,o,d,u,m,"F",g,y)}function PD(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ST(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=lo(n.unaryFilter.field);return kt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=lo(n.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=lo(n.unaryFilter.field);return kt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=lo(n.unaryFilter.field);return kt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}}(r):r.fieldFilter!==void 0?function(n){return kt.create(lo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return yr.create(n.compositeFilter.filters.map(s=>ST(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}}(n.compositeFilter.op))}(r):Ee(30097,{filter:r})}function LD(r){return wD[r]}function UD(r){return AD[r]}function jD(r){return RD[r]}function oo(r){return{fieldPath:r.canonicalString()}}function lo(r){return an.fromServerFormat(r.fieldPath)}function wT(r){return r instanceof kt?function(n){if(n.op==="=="){if(D_(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NAN"}};if(C_(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D_(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NAN"}};if(C_(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(n.field),op:UD(n.op),value:n.value}}}(r):r instanceof yr?function(n){const s=n.getFilters().map(o=>wT(o));return s.length===1?s[0]:{compositeFilter:{op:jD(n.op),filters:s}}}(r):Ee(54877,{filter:r})}function zD(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function AT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,s,o,u=we.min(),d=we.min(),m=on.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.wt=e}}function FD(r){const e=VD({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?zm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.Cn=new HD}addToCollectionParentIndex(e,n){return this.Cn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(_s.min())}updateCollectionGroup(e,n,s){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class HD{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ft(ut.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ft(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RT=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(RT,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new To(0)}static lr(){return new To(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="LruGarbageCollector",GD=1048576;function K_([r,e],[n,s]){const o=Ne(r,n);return o===0?Ne(e,s):o}class KD{constructor(e){this.Er=e,this.buffer=new Ft(K_),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();K_(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YD{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){he(G_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Oo(n)?he(G_,"Ignoring IndexedDB error during garbage collection: ",n):await No(n)}await this.mr(3e5)})}}class QD{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(Fh.le);const s=new KD(n);return this.gr.forEachTarget(e,o=>s.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>s.Rr(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(H_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H_):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,o,u,d,m,g,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),o=this.params.maximumSequenceNumbersToCollect):o=_,d=Date.now(),this.nthSequenceNumber(e,o))).next(_=>(s=_,m=Date.now(),this.removeTargets(e,s,n))).next(_=>(u=_,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(_=>(y=Date.now(),so()<=Le.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${_} documents in `+(y-g)+`ms
Total Duration: ${y-E}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:_})))}}function XD(r,e){return new QD(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.changes=new da(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ee.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&Xl(s.mutation,o,mr.empty(),Bt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ue()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ue()){const o=ra();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let d=Ul();return u.forEach((m,g)=>{d=d.insert(m,g.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const s=ra();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ue()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{n.set(d,m)})})}computeViews(e,n,s,o){let u=Ii();const d=Ql(),m=function(){return Ql()}();return n.forEach((g,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof fa)?u=u.insert(y.key,y):E!==void 0?(d.set(y.key,E.mutation.getFieldMask()),Xl(E.mutation,y,E.mutation.getFieldMask(),Bt.now())):d.set(y.key,mr.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((y,E)=>d.set(y,E)),n.forEach((y,E)=>{var _;return m.set(y,new ZD(E,(_=d.get(y))!==null&&_!==void 0?_:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Ql();let o=new pt((d,m)=>d-m),u=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const m of d)m.keys().forEach(g=>{const y=n.get(g);if(y===null)return;let E=s.get(g)||mr.empty();E=m.applyToLocalView(y,E),s.set(g,E);const _=(o.get(m.batchId)||Ue()).add(g);o=o.insert(m.batchId,_)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,E=g.value,_=lT();E.forEach(S=>{if(!u.has(S)){const D=mT(n.get(S),s.get(S));D!==null&&_.set(S,D),u=u.add(S)}}),d.push(this.documentOverlayCache.saveOverlays(e,y,_))}return ee.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(d){return ve.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ee.resolve(ra());let m=nu,g=u;return d.next(y=>ee.forEach(y,(E,_)=>(m<_.largestBatchId&&(m=_.largestBatchId),u.get(E)?ee.resolve():this.remoteDocumentCache.getEntry(e,E).next(S=>{g=g.insert(E,S)}))).next(()=>this.populateOverlays(e,y,u)).next(()=>this.computeViews(e,g,y,Ue())).next(E=>({batchId:m,changes:oT(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next(s=>{let o=Ul();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=Ul();return this.indexManager.getCollectionParents(e,u).next(m=>ee.forEach(m,g=>{const y=function(_,S){return new bu(S,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(E=>{E.forEach((_,S)=>{d=d.insert(_,S)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(d=>{u.forEach((g,y)=>{const E=y.getKey();d.get(E)===null&&(d=d.insert(E,fn.newInvalidDocument(E)))});let m=Ul();return d.forEach((g,y)=>{const E=u.get(g);E!==void 0&&Xl(E.mutation,y,mr.empty(),Bt.now()),Yh(n,y)&&(m=m.insert(g,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ee.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:zr(o.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:FD(o.bundledQuery),readTime:zr(o.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.overlays=new pt(ve.comparator),this.Qr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ra();return ee.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.bt(e,n,u)}),ee.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(s)),ee.resolve()}getOverlaysForCollection(e,n,s){const o=ra(),u=n.length+1,d=new ve(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new pt((y,E)=>y-E);const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let E=u.get(y.largestBatchId);E===null&&(E=ra(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=ra(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,E)=>m.set(y,E)),!(m.size()>=o)););return ee.resolve(m)}bt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Qr.get(o.largestBatchId).delete(s.key);this.Qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new _D(n,s));let u=this.Qr.get(n);u===void 0&&(u=Ue(),this.Qr.set(n,u)),this.Qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(){this.$r=new Ft(Xt.Ur),this.Kr=new Ft(Xt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new Xt(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new Xt(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new ve(new ut([])),s=new Xt(n,e),o=new Xt(n,e+1),u=[];return this.Kr.forEachInRange([s,o],d=>{this.zr(d),u.push(d.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ve(new ut([])),s=new Xt(n,e),o=new Xt(n,e+1);let u=Ue();return this.Kr.forEachInRange([s,o],d=>{u=u.add(d.key)}),u}containsKey(e){const n=new Xt(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Xt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ve.comparator(e.key,n.key)||Ne(e.Zr,n.Zr)}static Wr(e,n){return Ne(e.Zr,n.Zr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ft(Xt.Ur)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new vD(u,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Xr=this.Xr.add(new Xt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(d)}lookupMutationBatch(e,n){return ee.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ti(s),u=o<0?0:o;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Eg:this.nr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Xt(n,0),o=new Xt(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([s,o],d=>{const m=this.ei(d.Zr);u.push(m)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ft(Ne);return n.forEach(o=>{const u=new Xt(o,0),d=new Xt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,d],m=>{s=s.add(m.Zr)})}),ee.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ve.isDocumentKey(u)||(u=u.child(""));const d=new Xt(new ve(u),0);let m=new Ft(Ne);return this.Xr.forEachWhile(g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Zr)),!0)},d),ee.resolve(this.ni(m))}ni(e){const n=[];return e.forEach(s=>{const o=this.ei(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){$e(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return ee.forEach(n.mutations,o=>{const u=new Xt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new Xt(n,0),o=this.Xr.firstAfterOrEqual(s);return ee.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.ii=e,this.docs=function(){return new pt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ee.resolve(s?s.document.mutableCopy():fn.newInvalidDocument(n))}getEntries(e,n){let s=Ii();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():fn.newInvalidDocument(o))}),ee.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Ii();const d=n.path,m=new ve(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||OC(NC(E),s)<=0||(o.has(E.key)||Yh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ee(9500)}si(e,n){return ee.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new iN(this)}getSize(e){return ee.resolve(this.size)}}class iN extends $D{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(s)}),ee.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.persistence=e,this.oi=new da(n=>wg(n),Ag),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this._i=0,this.ai=new Ng,this.targetCount=0,this.ui=To.cr()}forEachTarget(e,n){return this.oi.forEach((s,o)=>n(o)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),ee.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new To(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Tr(n),ee.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.oi.forEach((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.oi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ee.waitFor(u).next(()=>o)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return ee.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),ee.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return ee.resolve(s)}containsKey(e,n){return ee.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){this.ci={},this.overlays={},this.li=new Fh(0),this.hi=!1,this.hi=!0,this.Pi=new tN,this.referenceDelegate=e(this),this.Ti=new sN(this),this.indexManager=new qD,this.remoteDocumentCache=function(o){return new rN(o)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new BD(n),this.Ei=new WD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new nN(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){he("MemoryPersistence","Starting transaction:",e);const o=new aN(this.li.next());return this.referenceDelegate.di(),s(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return ee.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class aN extends MC{constructor(e){super(),this.currentSequenceNumber=e}}class Og{constructor(e){this.persistence=e,this.Vi=new Ng,this.mi=null}static fi(e){return new Og(e)}get gi(){if(this.mi)return this.mi;throw Ee(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),ee.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.gi,s=>{const o=ve.fromPath(s);return this.pi(e,o).next(u=>{u||n.removeEntry(o,we.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ee.or([()=>ee.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Dh{constructor(e,n){this.persistence=e,this.yi=new da(s=>LC(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=XD(this,n)}static fi(e,n){return new Dh(e,n)}di(){}Ai(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}Sr(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return ee.forEach(this.yi,(s,o)=>this.Dr(e,s,o).next(u=>u?ee.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,d=>this.Dr(e,d,n).next(m=>{m||(s++,u.removeEntry(d,we.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ee.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ah(e.data.value)),n}Dr(e,n,s){return ee.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return ee.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.ds=s,this.As=o}static Rs(e,n){let s=Ue(),o=Ue();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new kg(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return JR()?8:VC(mn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ws(e,n).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.Ss(e,n,o,s).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new oN;return this.bs(e,n,d).next(m=>{if(u.result=m,this.fs)return this.Ds(e,n,d,m.size)})}).next(()=>u.result)}Ds(e,n,s,o){return s.documentReadCount<this.gs?(so()<=Le.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ee.resolve()):(so()<=Le.DEBUG&&he("QueryEngine","Query:",ao(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ps*o?(so()<=Le.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(n))):ee.resolve())}ws(e,n){if(M_(n))return ee.resolve(null);let s=jr(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=zm(n,null,"F"),s=jr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const d=Ue(...u);return this.ys.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(g=>{const y=this.vs(n,m);return this.Cs(n,y,d,g.readTime)?this.ws(e,zm(n,null,"F")):this.Fs(e,y,n,g)}))})))}Ss(e,n,s,o){return M_(n)||o.isEqual(we.min())?ee.resolve(null):this.ys.getDocuments(e,s).next(u=>{const d=this.vs(n,u);return this.Cs(n,d,s,o)?ee.resolve(null):(so()<=Le.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ao(n)),this.Fs(e,d,n,DC(o,nu)).next(m=>m))})}vs(e,n){let s=new Ft(sT(e));return n.forEach((o,u)=>{Yh(e,u)&&(s=s.add(u))}),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}bs(e,n,s){return so()<=Le.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",ao(n)),this.ys.getDocumentsMatchingQuery(e,n,_s.min(),s)}Fs(e,n,s,o){return this.ys.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(d=>{u=u.insert(d.key,d)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="LocalStore",uN=3e8;class cN{constructor(e,n,s,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new pt(Ne),this.Os=new da(u=>wg(u),Ag),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JD(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function hN(r,e,n,s){return new cN(r,e,n,s)}async function IT(r,e){const n=Re(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const d=[],m=[];let g=Ue();for(const y of o){d.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(s,g).next(y=>({ks:y,removedBatchIds:d,addedBatchIds:m}))})})}function dN(r,e){const n=Re(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(m,g,y,E){const _=y.batch,S=_.keys();let D=ee.resolve();return S.forEach(F=>{D=D.next(()=>E.getEntry(g,F)).next(K=>{const O=y.docVersions.get(F);$e(O!==null,48541),K.version.compareTo(O)<0&&(_.applyToRemoteDocument(K,y),K.isValidDocument()&&(K.setReadTime(y.commitVersion),E.addEntry(K)))})}),D.next(()=>m.mutationQueue.removeMutationBatch(g,_))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let g=Ue();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function CT(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function fN(r,e){const n=Re(r),s=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const m=[];e.targetChanges.forEach((E,_)=>{const S=o.get(_);if(!S)return;m.push(n.Ti.removeMatchingKeys(u,E.removedDocuments,_).next(()=>n.Ti.addMatchingKeys(u,E.addedDocuments,_)));let D=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(_)!==null?D=D.withResumeToken(on.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):E.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(E.resumeToken,s)),o=o.insert(_,D),function(K,O,Z){return K.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=uN?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0}(S,D,E)&&m.push(n.Ti.updateTargetData(u,D))});let g=Ii(),y=Ue();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(mN(u,d,e.documentUpdates).next(E=>{g=E.qs,y=E.Qs})),!s.isEqual(we.min())){const E=n.Ti.getLastRemoteSnapshotVersion(u).next(_=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return ee.waitFor(m).next(()=>d.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,g,y)).next(()=>g)}).then(u=>(n.xs=o,u))}function mN(r,e,n){let s=Ue(),o=Ue();return n.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let d=Ii();return n.forEach((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(we.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):he(Mg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)}),{qs:d,Qs:o}})}function gN(r,e){const n=Re(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Eg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function pN(r,e){const n=Re(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Ti.getTargetData(s,e).next(u=>u?(o=u,ee.resolve(o)):n.Ti.allocateTargetId(s).next(d=>(o=new cs(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.xs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function Gm(r,e,n){const s=Re(r),o=s.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Oo(d))throw d;he(Mg,`Failed to update sequence numbers for target ${e}: ${d}`)}s.xs=s.xs.remove(e),s.Os.delete(o.target)}function Y_(r,e,n){const s=Re(r);let o=we.min(),u=Ue();return s.persistence.runTransaction("Execute query","readwrite",d=>function(g,y,E){const _=Re(g),S=_.Os.get(E);return S!==void 0?ee.resolve(_.xs.get(S)):_.Ti.getTargetData(y,E)}(s,d,jr(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(d,m.targetId).next(g=>{u=g})}).next(()=>s.Ms.getDocumentsMatchingQuery(d,e,n?o:we.min(),n?u:Ue())).next(m=>(yN(s,nD(e),m),{documents:m,$s:u})))}function yN(r,e,n){let s=r.Ns.get(e)||we.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Ns.set(e,s)}class Q_{constructor(){this.activeTargetIds=lD()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vN{constructor(){this.xo=new Q_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Q_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="ConnectivityMonitor";class $_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){he(X_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){he(X_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function Km(){return Jc===null?Jc=function(){return 268435456+Math.round(2147483648*Math.random())}():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="RestConnection",bN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EN{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${o}`,this.Go=this.databaseId.database===wh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}zo(e,n,s,o,u){const d=Km(),m=this.jo(e,n.toUriEncodedString());he(ym,`Sending RPC '${e}' ${d}:`,m,s);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,o,u);const{host:y}=new URL(m),E=du(y);return this.Jo(e,m,g,s,E).then(_=>(he(ym,`Received RPC '${e}' ${d}: `,_),_),_=>{throw vo(ym,`RPC '${e}' ${d} failed with error: `,_,"url: ",m,"request:",s),_})}Yo(e,n,s,o,u,d){return this.zo(e,n,s,o,u)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Do}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const s=bN[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class SN extends EN{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=Km();return new Promise((m,g)=>{const y=new OE;y.setWithCredentials(!0),y.listenOnce(kE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case sh.NO_ERROR:const _=y.getResponseJson();he(cn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(_)),m(_);break;case sh.TIMEOUT:he(cn,`RPC '${e}' ${d} timed out`),g(new fe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case sh.HTTP_ERROR:const S=y.getStatus();if(he(cn,`RPC '${e}' ${d} failed with status:`,S,"response text:",y.getResponseText()),S>0){let D=y.getResponseJson();Array.isArray(D)&&(D=D[0]);const F=D==null?void 0:D.error;if(F&&F.status&&F.message){const K=function(Z){const re=Z.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(re)>=0?re:ne.UNKNOWN}(F.status);g(new fe(K,F.message))}else g(new fe(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new fe(ne.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(cn,`RPC '${e}' ${d} completed.`)}});const E=JSON.stringify(o);he(cn,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",E,s,15)})}T_(e,n,s){const o=Km(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=PE(),m=VE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const E=u.join("");he(cn,`Creating RPC '${e}' stream ${o}: ${E}`,g);const _=d.createWebChannel(E,g);let S=!1,D=!1;const F=new TN({Zo:O=>{D?he(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,O):(S||(he(cn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),S=!0),he(cn,`RPC '${e}' stream ${o} sending:`,O),_.send(O))},Xo:()=>_.close()}),K=(O,Z,re)=>{O.listen(Z,$=>{try{re($)}catch(le){setTimeout(()=>{throw le},0)}})};return K(_,Ll.EventType.OPEN,()=>{D||(he(cn,`RPC '${e}' stream ${o} transport opened.`),F.__())}),K(_,Ll.EventType.CLOSE,()=>{D||(D=!0,he(cn,`RPC '${e}' stream ${o} transport closed`),F.u_())}),K(_,Ll.EventType.ERROR,O=>{D||(D=!0,vo(cn,`RPC '${e}' stream ${o} transport errored. Name:`,O.name,"Message:",O.message),F.u_(new fe(ne.UNAVAILABLE,"The operation could not be completed")))}),K(_,Ll.EventType.MESSAGE,O=>{var Z;if(!D){const re=O.data[0];$e(!!re,16349);const $=re,le=($==null?void 0:$.error)||((Z=$[0])===null||Z===void 0?void 0:Z.error);if(le){he(cn,`RPC '${e}' stream ${o} received error:`,le);const se=le.status;let ce=function(R){const M=Ot[R];if(M!==void 0)return pT(M)}(se),N=le.message;ce===void 0&&(ce=ne.INTERNAL,N="Unknown error status: "+se+" with message "+le.message),D=!0,F.u_(new fe(ce,N)),_.close()}else he(cn,`RPC '${e}' stream ${o} received:`,re),F.c_(re)}}),K(m,ME.STAT_EVENT,O=>{O.stat===km.PROXY?he(cn,`RPC '${e}' stream ${o} detected buffering proxy`):O.stat===km.NOPROXY&&he(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{F.a_()},0),F}}function vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(r){return new xD(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.I_=s,this.E_=o,this.d_=u,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),s=Math.max(0,Date.now()-this.V_),o=Math.max(0,n-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="PersistentStream";class NT{constructor(e,n,s,o,u,d,m,g){this.xi=e,this.y_=s,this.w_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new DT(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(xi(n.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.S_===n&&this.K_(s,o)},s=>{e(()=>{const o=new fe(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.W_(o)})})}K_(e,n){const s=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{s(()=>this.W_(o))}),this.stream.onMessage(o=>{s(()=>++this.v_==1?this.z_(o):this.onNext(o))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return he(Z_,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(he(Z_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wN extends NT{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=DD(this.serializer,e),s=function(u){if(!("targetChange"in u))return we.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?we.min():d.readTime?zr(d.readTime):we.min()}(e);return this.listener.j_(n,s)}H_(e){const n={};n.database=Hm(this.serializer),n.addTarget=function(u,d){let m;const g=d.target;if(m=Um(g)?{documents:kD(u,g)}:{query:MD(u,g).gt},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=_T(u,d.resumeToken);const y=Bm(u,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(we.min())>0){m.readTime=Ch(u,d.snapshotVersion.toTimestamp());const y=Bm(u,d.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const s=PD(this.serializer,e);s&&(n.labels=s),this.L_(n)}J_(e){const n={};n.database=Hm(this.serializer),n.removeTarget=e,this.L_(n)}}class AN extends NT{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=OD(e.writeResults,e.commitTime),s=zr(e.commitTime);return this.listener.ea(s,n)}ta(){const e={};e.database=Hm(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>ND(this.serializer,s))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{}class xN extends RN{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.na=!1}ra(){if(this.na)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,o){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.zo(e,Fm(n,s),o,u,d)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(ne.UNKNOWN,u.toString())})}Yo(e,n,s,o,u){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Yo(e,Fm(n,s),o,d,m,u)).catch(d=>{throw d.name==="FirebaseError"?(d.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new fe(ne.UNKNOWN,d.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class IN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(xi(n),this.oa=!1):he("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="RemoteStore";class CN{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=u,this.Ea.No(d=>{s.enqueueAndForget(async()=>{ma(this)&&(he(oa,"Restarting streams for network reachability change."),await async function(g){const y=Re(g);y.Ta.add(4),await Su(y),y.da.set("Unknown"),y.Ta.delete(4),await Jh(y)}(this))})}),this.da=new IN(s,o)}}async function Jh(r){if(ma(r))for(const e of r.Ia)await e(!0)}async function Su(r){for(const e of r.Ia)await e(!1)}function OT(r,e){const n=Re(r);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),Ug(n)?Lg(n):ko(n).M_()&&Pg(n,e))}function Vg(r,e){const n=Re(r),s=ko(n);n.Pa.delete(e),s.M_()&&kT(n,e),n.Pa.size===0&&(s.M_()?s.N_():ma(n)&&n.da.set("Unknown"))}function Pg(r,e){if(r.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ko(r).H_(e)}function kT(r,e){r.Aa.Ke(e),ko(r).J_(e)}function Lg(r){r.Aa=new SD({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Pa.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),ko(r).start(),r.da._a()}function Ug(r){return ma(r)&&!ko(r).F_()&&r.Pa.size>0}function ma(r){return Re(r).Ta.size===0}function MT(r){r.Aa=void 0}async function DN(r){r.da.set("Online")}async function NN(r){r.Pa.forEach((e,n)=>{Pg(r,e)})}async function ON(r,e){MT(r),Ug(r)?(r.da.ca(e),Lg(r)):r.da.set("Unknown")}async function kN(r,e,n){if(r.da.set("Online"),e instanceof vT&&e.state===2&&e.cause)try{await async function(o,u){const d=u.cause;for(const m of u.targetIds)o.Pa.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Pa.delete(m),o.Aa.removeTarget(m))}(r,e)}catch(s){he(oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Nh(r,s)}else if(e instanceof uh?r.Aa.Xe(e):e instanceof yT?r.Aa.ot(e):r.Aa.nt(e),!n.isEqual(we.min()))try{const s=await CT(r.localStore);n.compareTo(s)>=0&&await function(u,d){const m=u.Aa.It(d);return m.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Pa.get(y);E&&u.Pa.set(y,E.withResumeToken(g.resumeToken,d))}}),m.targetMismatches.forEach((g,y)=>{const E=u.Pa.get(g);if(!E)return;u.Pa.set(g,E.withResumeToken(on.EMPTY_BYTE_STRING,E.snapshotVersion)),kT(u,g);const _=new cs(E.target,g,y,E.sequenceNumber);Pg(u,_)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){he(oa,"Failed to raise snapshot:",s),await Nh(r,s)}}async function Nh(r,e,n){if(!Oo(e))throw e;r.Ta.add(1),await Su(r),r.da.set("Offline"),n||(n=()=>CT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{he(oa,"Retrying IndexedDB access"),await n(),r.Ta.delete(1),await Jh(r)})}function VT(r,e){return e().catch(n=>Nh(r,n,e))}async function Wh(r){const e=Re(r),n=Ss(e);let s=e.ha.length>0?e.ha[e.ha.length-1].batchId:Eg;for(;MN(e);)try{const o=await gN(e.localStore,s);if(o===null){e.ha.length===0&&n.N_();break}s=o.batchId,VN(e,o)}catch(o){await Nh(e,o)}PT(e)&&LT(e)}function MN(r){return ma(r)&&r.ha.length<10}function VN(r,e){r.ha.push(e);const n=Ss(r);n.M_()&&n.Y_&&n.Z_(e.mutations)}function PT(r){return ma(r)&&!Ss(r).F_()&&r.ha.length>0}function LT(r){Ss(r).start()}async function PN(r){Ss(r).ta()}async function LN(r){const e=Ss(r);for(const n of r.ha)e.Z_(n.mutations)}async function UN(r,e,n){const s=r.ha.shift(),o=Ig.from(s,e,n);await VT(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Wh(r)}async function jN(r,e){e&&Ss(r).Y_&&await async function(s,o){if(function(d){return ED(d)&&d!==ne.ABORTED}(o.code)){const u=s.ha.shift();Ss(s).O_(),await VT(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Wh(s)}}(r,e),PT(r)&&LT(r)}async function J_(r,e){const n=Re(r);n.asyncQueue.verifyOperationInProgress(),he(oa,"RemoteStore received new credentials");const s=ma(n);n.Ta.add(3),await Su(n),s&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await Jh(n)}async function zN(r,e){const n=Re(r);e?(n.Ta.delete(2),await Jh(n)):e||(n.Ta.add(2),await Su(n),n.da.set("Unknown"))}function ko(r){return r.Ra||(r.Ra=function(n,s,o){const u=Re(n);return u.ra(),new wN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:DN.bind(null,r),n_:NN.bind(null,r),i_:ON.bind(null,r),j_:kN.bind(null,r)}),r.Ia.push(async e=>{e?(r.Ra.O_(),Ug(r)?Lg(r):r.da.set("Unknown")):(await r.Ra.stop(),MT(r))})),r.Ra}function Ss(r){return r.Va||(r.Va=function(n,s,o){const u=Re(n);return u.ra(),new AN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:PN.bind(null,r),i_:jN.bind(null,r),X_:LN.bind(null,r),ea:UN.bind(null,r)}),r.Ia.push(async e=>{e?(r.Va.O_(),await Wh(r)):(await r.Va.stop(),r.ha.length>0&&(he(oa,`Stopping write stream with ${r.ha.length} pending writes`),r.ha=[]))})),r.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,m=new jg(e,n,d,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zg(r,e){if(xi("AsyncQueue",`${e}: ${r}`),Oo(r))return new fe(ne.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{static emptySet(e){return new go(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ve.comparator(n.key,s.key):(n,s)=>ve.comparator(n.key,s.key),this.keyedMap=Ul(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new go;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.ma=new pt(ve.comparator)}track(e){const n=e.doc.key,s=this.ma.get(n);s?e.type!==0&&s.type===3?this.ma=this.ma.insert(n,e):e.type===3&&s.type!==1?this.ma=this.ma.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ma=this.ma.remove(n):e.type===1&&s.type===2?this.ma=this.ma.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):Ee(63341,{Vt:e,fa:s}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,s)=>{e.push(s)}),e}}class So{constructor(e,n,s,o,u,d,m,g,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new So(e,n,go.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class FN{constructor(){this.queries=eb(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,s){const o=Re(n),u=o.queries;o.queries=eb(),u.forEach((d,m)=>{for(const g of m.ya)g.onError(s)})})(this,new fe(ne.ABORTED,"Firestore shutting down"))}}function eb(){return new da(r=>iT(r),Kh)}async function UT(r,e){const n=Re(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.wa()&&e.Sa()&&(s=2):(u=new BN,s=e.Sa()?0:1);try{switch(s){case 0:u.pa=await n.onListen(o,!0);break;case 1:u.pa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=zg(d,`Initialization of query '${ao(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ya.push(e),e.Da(n.onlineState),u.pa&&e.va(u.pa)&&Bg(n)}async function jT(r,e){const n=Re(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.ya.indexOf(e);d>=0&&(u.ya.splice(d,1),u.ya.length===0?o=e.Sa()?0:1:!u.wa()&&e.Sa()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function qN(r,e){const n=Re(r);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.ya)m.va(o)&&(s=!0);d.pa=o}}s&&Bg(n)}function HN(r,e,n){const s=Re(r),o=s.queries.get(e);if(o)for(const u of o.ya)u.onError(n);s.queries.delete(e)}function Bg(r){r.ba.forEach(e=>{e.next()})}var Ym,tb;(tb=Ym||(Ym={})).Ca="default",tb.Cache="cache";class zT{constructor(e,n,s){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=s||{}}va(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new So(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const s=n!=="Offline";return(!this.options.La||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=So.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.key=e}}class FT{constructor(e){this.key=e}}class GN{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Ue(),this.mutatedKeys=Ue(),this.Ha=sT(e),this.Ja=new go(this.Ha)}get Ya(){return this.Ga}Za(e,n){const s=n?n.Xa:new W_,o=n?n.Ja:this.Ja;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,_)=>{const S=o.get(E),D=Yh(this.query,_)?_:null,F=!!S&&this.mutatedKeys.has(S.key),K=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let O=!1;S&&D?S.data.isEqual(D.data)?F!==K&&(s.track({type:3,doc:D}),O=!0):this.eu(S,D)||(s.track({type:2,doc:D}),O=!0,(g&&this.Ha(D,g)>0||y&&this.Ha(D,y)<0)&&(m=!0)):!S&&D?(s.track({type:0,doc:D}),O=!0):S&&!D&&(s.track({type:1,doc:S}),O=!0,(g||y)&&(m=!0)),O&&(D?(d=d.add(D),u=K?u.add(E):u.delete(E)):(d=d.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{Ja:d,Xa:s,Cs:m,mutatedKeys:u}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const d=e.Xa.ga();d.sort((E,_)=>function(D,F){const K=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Vt:O})}};return K(D)-K(F)}(E.type,_.type)||this.Ha(E.doc,_.doc)),this.tu(s),o=o!=null&&o;const m=n&&!o?this.nu():[],g=this.ja.size===0&&this.current&&!o?1:0,y=g!==this.za;return this.za=g,d.length!==0||y?{snapshot:new So(this.query,e.Ja,u,d,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ru:m}:{ru:m}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new W_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Ue(),this.Ja.forEach(s=>{this.iu(s.key)&&(this.ja=this.ja.add(s.key))});const n=[];return e.forEach(s=>{this.ja.has(s)||n.push(new FT(s))}),this.ja.forEach(s=>{e.has(s)||n.push(new BT(s))}),n}su(e){this.Ga=e.$s,this.ja=Ue();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return So.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Fg="SyncEngine";class KN{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class YN{constructor(e){this.key=e,this._u=!1}}class QN{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.au={},this.uu=new da(m=>iT(m),Kh),this.cu=new Map,this.lu=new Set,this.hu=new pt(ve.comparator),this.Pu=new Map,this.Tu=new Ng,this.Iu={},this.Eu=new Map,this.du=To.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function XN(r,e,n=!0){const s=QT(r);let o;const u=s.uu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.ou()):o=await qT(s,e,n,!0),o}async function $N(r,e){const n=QT(r);await qT(n,e,!0,!1)}async function qT(r,e,n,s){const o=await pN(r.localStore,jr(e)),u=o.targetId,d=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await ZN(r,e,u,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&OT(r.remoteStore,o),m}async function ZN(r,e,n,s,o){r.Ru=(_,S,D)=>async function(K,O,Z,re){let $=O.view.Za(Z);$.Cs&&($=await Y_(K.localStore,O.query,!1).then(({documents:N})=>O.view.Za(N,$)));const le=re&&re.targetChanges.get(O.targetId),se=re&&re.targetMismatches.get(O.targetId)!=null,ce=O.view.applyChanges($,K.isPrimaryClient,le,se);return rb(K,O.targetId,ce.ru),ce.snapshot}(r,_,S,D);const u=await Y_(r.localStore,e,!0),d=new GN(e,u.$s),m=d.Za(u.documents),g=Tu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=d.applyChanges(m,r.isPrimaryClient,g);rb(r,n,y.ru);const E=new KN(e,n,d);return r.uu.set(e,E),r.cu.has(n)?r.cu.get(n).push(e):r.cu.set(n,[e]),y.snapshot}async function JN(r,e,n){const s=Re(r),o=s.uu.get(e),u=s.cu.get(o.targetId);if(u.length>1)return s.cu.set(o.targetId,u.filter(d=>!Kh(d,e))),void s.uu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Gm(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Vg(s.remoteStore,o.targetId),Qm(s,o.targetId)}).catch(No)):(Qm(s,o.targetId),await Gm(s.localStore,o.targetId,!0))}async function WN(r,e){const n=Re(r),s=n.uu.get(e),o=n.cu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Vg(n.remoteStore,s.targetId))}async function eO(r,e,n){const s=oO(r);try{const o=await function(d,m){const g=Re(d),y=Bt.now(),E=m.reduce((D,F)=>D.add(F.key),Ue());let _,S;return g.persistence.runTransaction("Locally write mutations","readwrite",D=>{let F=Ii(),K=Ue();return g.Bs.getEntries(D,E).next(O=>{F=O,F.forEach((Z,re)=>{re.isValidDocument()||(K=K.add(Z))})}).next(()=>g.localDocuments.getOverlayedDocuments(D,F)).next(O=>{_=O;const Z=[];for(const re of m){const $=pD(re,_.get(re.key).overlayedDocument);$!=null&&Z.push(new fa(re.key,$,$E($.value.mapValue),gr.exists(!0)))}return g.mutationQueue.addMutationBatch(D,y,Z,m)}).next(O=>{S=O;const Z=O.applyToLocalDocumentSet(_,K);return g.documentOverlayCache.saveOverlays(D,O.batchId,Z)})}).then(()=>({batchId:S.batchId,changes:oT(_)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,m,g){let y=d.Iu[d.currentUser.toKey()];y||(y=new pt(Ne)),y=y.insert(m,g),d.Iu[d.currentUser.toKey()]=y}(s,o.batchId,n),await wu(s,o.changes),await Wh(s.remoteStore)}catch(o){const u=zg(o,"Failed to persist write");n.reject(u)}}async function HT(r,e){const n=Re(r);try{const s=await fN(n.localStore,e);e.targetChanges.forEach((o,u)=>{const d=n.Pu.get(u);d&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d._u=!0:o.modifiedDocuments.size>0?$e(d._u,14607):o.removedDocuments.size>0&&($e(d._u,42227),d._u=!1))}),await wu(n,s,e)}catch(s){await No(s)}}function nb(r,e,n){const s=Re(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.uu.forEach((u,d)=>{const m=d.view.Da(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const g=Re(d);g.onlineState=m;let y=!1;g.queries.forEach((E,_)=>{for(const S of _.ya)S.Da(m)&&(y=!0)}),y&&Bg(g)}(s.eventManager,e),o.length&&s.au.j_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function tO(r,e,n){const s=Re(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Pu.get(e),u=o&&o.key;if(u){let d=new pt(ve.comparator);d=d.insert(u,fn.newNoDocument(u,we.min()));const m=Ue().add(u),g=new $h(we.min(),new Map,new pt(Ne),d,m);await HT(s,g),s.hu=s.hu.remove(u),s.Pu.delete(e),qg(s)}else await Gm(s.localStore,e,!1).then(()=>Qm(s,e,n)).catch(No)}async function nO(r,e){const n=Re(r),s=e.batch.batchId;try{const o=await dN(n.localStore,e);KT(n,s,null),GT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await wu(n,o)}catch(o){await No(o)}}async function rO(r,e,n){const s=Re(r);try{const o=await function(d,m){const g=Re(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return g.mutationQueue.lookupMutationBatch(y,m).next(_=>($e(_!==null,37113),E=_.keys(),g.mutationQueue.removeMutationBatch(y,_))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,E,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>g.localDocuments.getDocuments(y,E))})}(s.localStore,e);KT(s,e,n),GT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await wu(s,o)}catch(o){await No(o)}}function GT(r,e){(r.Eu.get(e)||[]).forEach(n=>{n.resolve()}),r.Eu.delete(e)}function KT(r,e,n){const s=Re(r);let o=s.Iu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Iu[s.currentUser.toKey()]=o}}function Qm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.cu.get(e))r.uu.delete(s),n&&r.au.Vu(s,n);r.cu.delete(e),r.isPrimaryClient&&r.Tu.Hr(e).forEach(s=>{r.Tu.containsKey(s)||YT(r,s)})}function YT(r,e){r.lu.delete(e.path.canonicalString());const n=r.hu.get(e);n!==null&&(Vg(r.remoteStore,n),r.hu=r.hu.remove(e),r.Pu.delete(n),qg(r))}function rb(r,e,n){for(const s of n)s instanceof BT?(r.Tu.addReference(s.key,e),iO(r,s)):s instanceof FT?(he(Fg,"Document no longer in limbo: "+s.key),r.Tu.removeReference(s.key,e),r.Tu.containsKey(s.key)||YT(r,s.key)):Ee(19791,{mu:s})}function iO(r,e){const n=e.key,s=n.path.canonicalString();r.hu.get(n)||r.lu.has(s)||(he(Fg,"New document in limbo: "+n),r.lu.add(s),qg(r))}function qg(r){for(;r.lu.size>0&&r.hu.size<r.maxConcurrentLimboResolutions;){const e=r.lu.values().next().value;r.lu.delete(e);const n=new ve(ut.fromString(e)),s=r.du.next();r.Pu.set(s,new YN(n)),r.hu=r.hu.insert(n,s),OT(r.remoteStore,new cs(jr(Gh(n.path)),s,"TargetPurposeLimboResolution",Fh.le))}}async function wu(r,e,n){const s=Re(r),o=[],u=[],d=[];s.uu.isEmpty()||(s.uu.forEach((m,g)=>{d.push(s.Ru(g,e,n).then(y=>{var E;if((y||n)&&s.isPrimaryClient){const _=y?!y.fromCache:(E=n==null?void 0:n.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(y){o.push(y);const _=kg.Rs(g.targetId,y);u.push(_)}}))}),await Promise.all(d),s.au.j_(o),await async function(g,y){const E=Re(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>ee.forEach(y,S=>ee.forEach(S.ds,D=>E.persistence.referenceDelegate.addReference(_,S.targetId,D)).next(()=>ee.forEach(S.As,D=>E.persistence.referenceDelegate.removeReference(_,S.targetId,D)))))}catch(_){if(!Oo(_))throw _;he(Mg,"Failed to update sequence numbers: "+_)}for(const _ of y){const S=_.targetId;if(!_.fromCache){const D=E.xs.get(S),F=D.snapshotVersion,K=D.withLastLimboFreeSnapshotVersion(F);E.xs=E.xs.insert(S,K)}}}(s.localStore,u))}async function sO(r,e){const n=Re(r);if(!n.currentUser.isEqual(e)){he(Fg,"User change. New user:",e.toKey());const s=await IT(n.localStore,e);n.currentUser=e,function(u,d){u.Eu.forEach(m=>{m.forEach(g=>{g.reject(new fe(ne.CANCELLED,d))})}),u.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await wu(n,s.ks)}}function aO(r,e){const n=Re(r),s=n.Pu.get(e);if(s&&s._u)return Ue().add(s.key);{let o=Ue();const u=n.cu.get(e);if(!u)return o;for(const d of u){const m=n.uu.get(d);o=o.unionWith(m.view.Ya)}return o}}function QT(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=HT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tO.bind(null,e),e.au.j_=qN.bind(null,e.eventManager),e.au.Vu=HN.bind(null,e.eventManager),e}function oO(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rO.bind(null,e),e}class Oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zh(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return hN(this.persistence,new lN,e.initialUser,this.serializer)}yu(e){return new xT(Og.fi,this.serializer)}pu(e){return new vN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oh.provider={build:()=>new Oh};class lO extends Oh{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){$e(this.persistence.referenceDelegate instanceof Dh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new YD(s,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new xT(s=>Dh.fi(s,n),this.serializer)}}class Xm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>nb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sO.bind(null,this.syncEngine),await zN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FN}()}createDatastore(e){const n=Zh(e.databaseInfo.databaseId),s=function(u){return new SN(u)}(e.databaseInfo);return function(u,d,m,g){return new xN(u,d,m,g)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,d,m){return new CN(s,o,u,d,m)}(this.localStore,this.datastore,e.asyncQueue,n=>nb(this.syncEngine,n,0),function(){return $_.C()?new $_:new _N}())}createSyncEngine(e,n){return function(o,u,d,m,g,y,E){const _=new QN(o,u,d,m,g,y);return E&&(_.Au=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Re(o);he(oa,"RemoteStore shutting down."),u.Ta.add(5),await Su(u),u.Ea.shutdown(),u.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Xm.provider={build:()=>new Xm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="FirestoreClient";class uO{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=zE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async d=>{he(ws,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(he(ws,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=zg(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function _m(r,e){r.asyncQueue.verifyOperationInProgress(),he(ws,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await IT(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function ib(r,e){r.asyncQueue.verifyOperationInProgress();const n=await cO(r);he(ws,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>J_(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>J_(e.remoteStore,o)),r._onlineComponents=e}async function cO(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he(ws,"Using user provided OfflineComponentProvider");try{await _m(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;vo("Error using user provided cache. Falling back to memory cache: "+n),await _m(r,new Oh)}}else he(ws,"Using default OfflineComponentProvider"),await _m(r,new lO(void 0));return r._offlineComponents}async function $T(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he(ws,"Using user provided OnlineComponentProvider"),await ib(r,r._uninitializedComponentsProvider._online)):(he(ws,"Using default OnlineComponentProvider"),await ib(r,new Xm))),r._onlineComponents}function hO(r){return $T(r).then(e=>e.syncEngine)}async function $m(r){const e=await $T(r),n=e.eventManager;return n.onListen=XN.bind(null,e.syncEngine),n.onUnlisten=JN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$N.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WN.bind(null,e.syncEngine),n}function dO(r,e,n={}){const s=new gs;return r.asyncQueue.enqueueAndForget(async()=>function(u,d,m,g,y){const E=new XT({next:S=>{E.Cu(),d.enqueueAndForget(()=>jT(u,_));const D=S.docs.has(m);!D&&S.fromCache?y.reject(new fe(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&S.fromCache&&g&&g.source==="server"?y.reject(new fe(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),_=new zT(Gh(m.path),E,{includeMetadataChanges:!0,La:!0});return UT(u,_)}(await $m(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(r,e,n){if(!n)throw new fe(ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function fO(r,e,n,s){if(e===!0&&s===!0)throw new fe(ne.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function ab(r){if(!ve.isDocumentKey(r))throw new fe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ob(r){if(ve.isDocumentKey(r))throw new fe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ed(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ee(12329,{type:typeof r})}function Br(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new fe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ed(r);throw new fe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="firestore.googleapis.com",lb=!0;class ub{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WT,this.ssl=lb}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:lb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GD)throw new fe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZT((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class td{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ub({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ub(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new EC;switch(s.type){case"firstParty":return new AC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=sb.get(n);s&&(he("ComponentProvider","Removing Datastore"),sb.delete(n),s.terminate())}(this),Promise.resolve()}}function mO(r,e,n,s={}){var o;r=Br(r,td);const u=du(e),d=r._getSettings(),m=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${n}`;u&&(Yb(`https://${g}`),Qb("Firestore",!0)),d.host!==WT&&d.host!==g&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},d),{host:g,ssl:u,emulatorOptions:s});if(!ia(y,m)&&(r._setSettings(y),s.mockUserToken)){let E,_;if(typeof s.mockUserToken=="string")E=s.mockUserToken,_=hn.MOCK_USER;else{E=qR(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new fe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new hn(S)}r._authCredentials=new TC(new UE(E,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Mo(this.firestore,e,this._query)}}class Sn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class ps extends Mo{constructor(e,n,s){super(e,n,Gh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new ve(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function Hg(r,e,...n){if(r=Dn(r),JT("collection","path",e),r instanceof td){const s=ut.fromString(e,...n);return ob(s),new ps(r,null,s)}{if(!(r instanceof Sn||r instanceof ps))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ut.fromString(e,...n));return ob(s),new ps(r.firestore,null,s)}}function Au(r,e,...n){if(r=Dn(r),arguments.length===1&&(e=zE.newId()),JT("doc","path",e),r instanceof td){const s=ut.fromString(e,...n);return ab(s),new Sn(r,null,new ve(s))}{if(!(r instanceof Sn||r instanceof ps))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ut.fromString(e,...n));return ab(s),new Sn(r.firestore,r instanceof ps?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="AsyncQueue";class hb{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new DT(this,"async_queue_retry"),this.ec=()=>{const s=vm();s&&he(cb,"Visibility state changed to "+s.visibilityState),this.C_.p_()},this.tc=e;const n=vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new gs;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Oo(e))throw e;he(cb,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(s=>{throw this.Ju=s,this.Yu=!1,xi("INTERNAL UNHANDLED ERROR: ",db(s)),s}).then(s=>(this.Yu=!1,s))));return this.tc=n,n}enqueueAfterDelay(e,n,s){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const o=jg.createAndSchedule(this,e,n,s,u=>this.oc(u));return this.Hu.push(o),o}nc(){this.Ju&&Ee(47125,{_c:db(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function db(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(r){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(r,["next","error","complete"])}class la extends td{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new hb,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hb(e),this._firestoreClient=void 0,await e}}}function gO(r,e){const n=typeof r=="object"?r:cg(),s=typeof r=="string"?r:wh,o=ug(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=BR("firestore");u&&mO(o,...u)}return o}function Gg(r){if(r._terminated)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||pO(r),r._firestoreClient}function pO(r){var e,n,s;const o=r._freezeSettings(),u=function(m,g,y,E){return new zC(m,g,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,ZT(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new uO(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wo(on.fromBase64String(e))}catch(n){throw new fe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wo(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=/^__.*__$/;class vO{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new fa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eu(e,this.data,n,this.fieldTransforms)}}function e1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{hc:r})}}class $g{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Pc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new $g(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Tc({path:s,Ec:!1});return o.dc(e),o}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Tc({path:s,Ec:!1});return o.Pc(),o}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return kh(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(e1(this.hc)&&yO.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class _O{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Zh(e)}gc(e,n,s,o=!1){return new $g({hc:e,methodName:n,fc:s,path:an.emptyPath(),Ec:!1,mc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zg(r){const e=r._freezeSettings(),n=Zh(r._databaseId);return new _O(r._databaseId,!!e.ignoreUndefinedProperties,n)}function t1(r,e,n,s,o,u={}){const d=r.gc(u.merge||u.mergeFields?2:0,e,n,o);i1("Data must be an object, but it was:",d,s);const m=n1(s,d);let g,y;if(u.merge)g=new mr(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const E=[];for(const _ of u.mergeFields){const S=EO(e,_,n);if(!d.contains(S))throw new fe(ne.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);SO(E,S)||E.push(S)}g=new mr(E),y=d.fieldTransforms.filter(_=>g.covers(_.field))}else g=null,y=d.fieldTransforms;return new vO(new nr(m),g,y)}class Jg extends Yg{_toFieldTransform(e){return new dD(e.path,new au)}isEqual(e){return e instanceof Jg}}function bO(r,e,n,s=!1){return Wg(n,r.gc(s?4:3,e))}function Wg(r,e){if(r1(r=Dn(r)))return i1("Unsupported field value:",e,r),n1(r,e);if(r instanceof Yg)return function(s,o){if(!e1(o.hc))throw o.Vc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Vc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(s,o){const u=[];let d=0;for(const m of s){let g=Wg(m,o.Rc(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=Dn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return uD(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Bt.fromDate(s);return{timestampValue:Ch(o.serializer,u)}}if(s instanceof Bt){const u=new Bt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ch(o.serializer,u)}}if(s instanceof Qg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof wo)return{bytesValue:_T(o.serializer,s._byteString)};if(s instanceof Sn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Vc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Dg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Xg)return function(d,m){return{mapValue:{fields:{[QE]:{stringValue:XE},[Ah]:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw m.Vc("VectorValues must only contain numeric values.");return Rg(m.serializer,y)})}}}}}}(s,o);throw o.Vc(`Unsupported field value: ${ed(s)}`)}(r,e)}function n1(r,e){const n={};return FE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(r,(s,o)=>{const u=Wg(o,e.Ic(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function r1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Bt||r instanceof Qg||r instanceof wo||r instanceof Sn||r instanceof Yg||r instanceof Xg)}function i1(r,e,n){if(!r1(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=ed(n);throw s==="an object"?e.Vc(r+" a custom object"):e.Vc(r+" "+s)}}function EO(r,e,n){if((e=Dn(e))instanceof Kg)return e._internalPath;if(typeof e=="string")return s1(r,e);throw kh("Field path arguments must be of type string or ",r,!1,void 0,n)}const TO=new RegExp("[~\\*/\\[\\]]");function s1(r,e,n){if(e.search(TO)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Kg(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function kh(r,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new fe(ne.INVALID_ARGUMENT,m+r+g)}function SO(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(o1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wO extends a1{data(){return super.data()}}function o1(r,e){return typeof e=="string"?s1(r,e):e instanceof Kg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new fe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ep{}class RO extends ep{}function l1(r,e,...n){let s=[];e instanceof ep&&s.push(e),s=s.concat(n),function(u){const d=u.filter(g=>g instanceof np).length,m=u.filter(g=>g instanceof tp).length;if(d>1||d>0&&m>0)throw new fe(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class tp extends RO{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new tp(e,n,s)}_apply(e){const n=this._parse(e);return u1(e._query,n),new Mo(e.firestore,e.converter,jm(e._query,n))}_parse(e){const n=Zg(e.firestore);return function(u,d,m,g,y,E,_){let S;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){gb(_,E);const F=[];for(const K of _)F.push(mb(g,u,K));S={arrayValue:{values:F}}}else S=mb(g,u,_)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||gb(_,E),S=bO(m,d,_,E==="in"||E==="not-in");return kt.create(y,E,S)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class np extends ep{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new np(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:yr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let d=o;const m=u.getFlattenedFilters();for(const g of m)u1(d,g),d=jm(d,g)}(e._query,n),new Mo(e.firestore,e.converter,jm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function mb(r,e,n){if(typeof(n=Dn(n))=="string"){if(n==="")throw new fe(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rT(e)&&n.indexOf("/")!==-1)throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ut.fromString(n));if(!ve.isDocumentKey(s))throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return I_(r,new ve(s))}if(n instanceof Sn)return I_(r,n._key);throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ed(n)}.`)}function gb(r,e){if(!Array.isArray(r)||r.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function u1(r,e){const n=function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xO{convertValue(e,n="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ha(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Ah].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>At(d.doubleValue));return new Xg(u)}convertGeoPoint(e){return new Qg(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Hh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const n=bs(e);return new Bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ut.fromString(e);$e(AT(s),9688,{name:e});const o=new iu(s.get(1),s.get(3)),u=new ve(s.popFirst(5));return o.isEqual(n)||xi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class h1 extends a1{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(o1("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class ch extends h1{data(e={}){return super.data(e)}}class IO{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new zl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new ch(this._firestore,this._userDataWriter,s.key,s,new zl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const g=new ch(o._firestore,o._userDataWriter,m.doc.key,m.doc,new zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new ch(o._firestore,o._userDataWriter,m.doc.key,m.doc,new zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),E=d.indexOf(m.doc.key)),{type:CO(m.type),doc:g,oldIndex:y,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function CO(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(r){r=Br(r,Sn);const e=Br(r.firestore,la);return dO(Gg(e),r._key).then(n=>f1(e,r,n))}class d1 extends xO{constructor(e){super(),this.firestore=e}convertBytes(e){return new wo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,n)}}function NO(r,e,n){r=Br(r,Sn);const s=Br(r.firestore,la),o=c1(r.converter,e,n);return ip(s,[t1(Zg(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,gr.none())])}function OO(r){return ip(Br(r.firestore,la),[new xg(r._key,gr.none())])}function kO(r,e){const n=Br(r.firestore,la),s=Au(r),o=c1(r.converter,e);return ip(n,[t1(Zg(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,gr.exists(!1))]).then(()=>s)}function rp(r,...e){var n,s,o;r=Dn(r);let u={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||fb(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(fb(e[d])){const _=e[d];e[d]=(n=_.next)===null||n===void 0?void 0:n.bind(_),e[d+1]=(s=_.error)===null||s===void 0?void 0:s.bind(_),e[d+2]=(o=_.complete)===null||o===void 0?void 0:o.bind(_)}let g,y,E;if(r instanceof Sn)y=Br(r.firestore,la),E=Gh(r._key.path),g={next:_=>{e[d]&&e[d](f1(y,r,_))},error:e[d+1],complete:e[d+2]};else{const _=Br(r,Mo);y=Br(_.firestore,la),E=_._query;const S=new d1(y);g={next:D=>{e[d]&&e[d](new IO(y,S,_,D))},error:e[d+1],complete:e[d+2]},AO(r._query)}return function(S,D,F,K){const O=new XT(K),Z=new zT(D,O,F);return S.asyncQueue.enqueueAndForget(async()=>UT(await $m(S),Z)),()=>{O.Cu(),S.asyncQueue.enqueueAndForget(async()=>jT(await $m(S),Z))}}(Gg(y),E,m,g)}function ip(r,e){return function(s,o){const u=new gs;return s.asyncQueue.enqueueAndForget(async()=>eO(await hO(s),o,u)),u.promise}(Gg(r),e)}function f1(r,e,n){const s=n.docs.get(e._key),o=new d1(r);return new h1(r,o,e._key,s,new zl(n.hasPendingWrites,n.fromCache),e.converter)}function po(){return new Jg("serverTimestamp")}(function(e,n=!0){(function(o){Do=o})(Io),yo(new sa("firestore",(s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),m=new la(new SC(s.getProvider("auth-internal")),new RC(d,s.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new fe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(y.options.projectId,E)}(d,o),d);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),fs(p_,y_,e),fs(p_,y_,"esm2017")})();const MO=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"YOUR_API_KEY",authDomain:"YOUR_AUTH_DOMAIN",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_STORAGE_BUCKET",messagingSenderId:"YOUR_MESSAGING_SENDER_ID",appId:"YOUR_APP_ID"};let Mh;ax().length?Mh=cg():Mh=Zb(MO);const ua=gO(Mh),Wc=vC(Mh);bC("debug");const ca=typeof __app_id<"u"?__app_id:"default-form-builder",Xe=yb(r=>({theme:localStorage.getItem("theme")||"light",currentView:"builder",currentFormIdForFiller:null,currentFormIdForResponses:null,isLoading:!1,toastMessage:null,isAuthReady:!1,userId:null,previewDevice:"desktop",showShareModal:!1,shareableLink:"",setTheme:e=>{r({theme:e}),localStorage.setItem("theme",e),e==="dark"?(document.documentElement.classList.add("dark"),document.body.classList.add("dark")):(document.documentElement.classList.remove("dark"),document.body.classList.remove("dark"))},setCurrentView:(e,n=null)=>{r({currentView:e}),e==="filler"&&r({currentFormIdForFiller:n}),e==="responses"&&r({currentFormIdForResponses:n})},setLoading:e=>r({isLoading:e}),setToast:(e,n=3e3)=>{r({toastMessage:e}),e&&n&&setTimeout(()=>r({toastMessage:null}),n)},setAuthReady:e=>r({isAuthReady:e}),setUserId:e=>r({userId:e}),setPreviewDevice:e=>r({previewDevice:e}),setShowShareModal:(e,n="")=>r({showShareModal:e,shareableLink:n})})),VO=(()=>{const r={id:crypto.randomUUID(),type:"TEXT",label:"Name",placeholder:"Enter your full name",required:!0,helpText:""},e={id:crypto.randomUUID(),type:"TEXT",label:"Email",placeholder:"Enter your email address",required:!0,helpText:""},n={id:crypto.randomUUID(),type:"TEXTAREA",label:"Message",placeholder:"Enter your message",required:!0,helpText:"",rows:4},s=crypto.randomUUID();return{title:"Contact Us",description:"Please fill out the form below to contact us.",fields:[r,e,n],steps:[{id:s,name:"Step 1",fieldIds:[r.id,e.id,n.id]}],currentStepId:s,settings:{theme:"default"},createdAt:po(),updatedAt:po()}})(),Pr=yb((r,e)=>({forms:[],currentForm:null,selectedFieldId:null,history:[],historyIndex:-1,draggedFieldType:null,initializeForms:async n=>{if(!n)return;Xe.getState().setLoading(!0);const s=`artifacts/${ca}/users/${n}/forms`,o=l1(Hg(ua,s));return rp(o,d=>{const m=[];d.forEach(g=>{m.push({id:g.id,...g.data()})}),r({forms:m}),Xe.getState().setLoading(!1)},d=>{console.error("Error fetching forms: ",d),Xe.getState().setToast("Error fetching forms.",5e3),Xe.getState().setLoading(!1)})},createNewForm:()=>{const n={id:crypto.randomUUID(),title:"Untitled Form",description:"",fields:[],steps:[{id:crypto.randomUUID(),name:"Step 1",fieldIds:[]}],currentStepId:null,settings:{theme:"default"},createdAt:po(),updatedAt:po()};n.currentStepId=n.steps[0].id,r({currentForm:n,selectedFieldId:null,history:[n],historyIndex:0}),e().saveCurrentForm()},createContactUsForm:()=>{const n=JSON.parse(JSON.stringify(VO));n.id=crypto.randomUUID(),n.fields.forEach((s,o)=>{const u=crypto.randomUUID();n.steps[0].fieldIds[o]=u,s.id=u}),n.steps[0].id=crypto.randomUUID(),n.currentStepId=n.steps[0].id,r({currentForm:n,selectedFieldId:null,history:[n],historyIndex:0}),e().saveCurrentForm(),e().loadFormForEditing(n.id)},loadFormForEditing:n=>{const s=e().forms.find(o=>o.id===n);if(s){const o={...s,steps:s.steps&&s.steps.length>0?s.steps:[{id:crypto.randomUUID(),name:"Step 1",fieldIds:[]}]};!o.currentStepId&&o.steps.length>0?o.currentStepId=o.steps[0].id:o.steps.length===0&&(o.currentStepId=null),r({currentForm:o,selectedFieldId:null,history:[o],historyIndex:0})}else Xe.getState().setToast(`Form with ID ${n} not found.`,5e3)},saveCurrentForm:async()=>{const{currentForm:n}=e(),s=Xe.getState().userId;if(!n||!s)return;Xe.getState().setLoading(!0);const o={...n,updatedAt:po()},u=Au(ua,`artifacts/${ca}/users/${s}/forms`,n.id);try{await NO(u,o,{merge:!0}),Xe.getState().setToast("Form saved!",2e3),r(d=>({forms:d.forms.map(m=>m.id===n.id?o:m)}))}catch(d){console.error("Error saving form: ",d),Xe.getState().setToast("Error saving form. Check console.",5e3)}finally{Xe.getState().setLoading(!1)}},updateFormDetails:n=>{r(s=>{if(!s.currentForm)return{};const o={...s.currentForm,...n};return e()._addHistory(o),{currentForm:o}})},addField:n=>{r(s=>{if(!s.currentForm||!s.currentForm.currentStepId)return{};const o={...n,id:crypto.randomUUID()},u=[...s.currentForm.fields,o],d=s.currentForm.steps.map(g=>g.id===s.currentForm.currentStepId?{...g,fieldIds:[...g.fieldIds||[],o.id]}:g),m={...s.currentForm,fields:u,steps:d};return e()._addHistory(m),{currentForm:m,selectedFieldId:o.id}})},updateField:(n,s)=>{r(o=>{if(!o.currentForm)return{};const u=o.currentForm.fields.map(m=>m.id===n?{...m,...s}:m),d={...o.currentForm,fields:u};return e()._addHistory(d),{currentForm:d}})},deleteField:n=>{r(s=>{if(!s.currentForm)return{};const o=s.currentForm.fields.filter(g=>g.id!==n),u=s.currentForm.steps.map(g=>({...g,fieldIds:(g.fieldIds||[]).filter(y=>y!==n)})),d={...s.currentForm,fields:o,steps:u},m=s.selectedFieldId===n?null:s.selectedFieldId;return e()._addHistory(d),{currentForm:d,selectedFieldId:m}})},reorderFields:(n,s)=>{r(o=>{if(!o.currentForm||!o.currentForm.currentStepId)return{};const u=o.currentForm.steps.find(y=>y.id===o.currentForm.currentStepId);if(!u||!u.fieldIds)return{};const d=ag(u.fieldIds,n,s),m=o.currentForm.steps.map(y=>y.id===o.currentForm.currentStepId?{...y,fieldIds:d}:y),g={...o.currentForm,steps:m};return e()._addHistory(g),{currentForm:g}})},selectField:n=>r({selectedFieldId:n}),addStep:()=>{r(n=>{if(!n.currentForm)return{};const s={id:crypto.randomUUID(),name:`Step ${n.currentForm.steps.length+1}`,fieldIds:[]},o=[...n.currentForm.steps,s],u={...n.currentForm,steps:o,currentStepId:s.id};return e()._addHistory(u),{currentForm:u}})},updateStep:(n,s)=>{r(o=>{if(!o.currentForm)return{};const u=o.currentForm.steps.map(m=>m.id===n?{...m,...s}:m),d={...o.currentForm,steps:u};return e()._addHistory(d),{currentForm:d}})},deleteStep:n=>{r(s=>{if(!s.currentForm||s.currentForm.steps.length<=1)return Xe.getState().setToast("Cannot delete the last step.",3e3),{};const o=s.currentForm.steps.find(g=>g.id===n),u=s.currentForm.steps.filter(g=>g.id!==n);let d=s.currentForm.currentStepId===n?u.length>0?u[0].id:null:s.currentForm.currentStepId;if(o&&o.fieldIds&&o.fieldIds.length>0&&u.length>0){const g=Math.max(0,u.findIndex(y=>y.id===d));u[g].fieldIds=[...u[g].fieldIds||[],...o.fieldIds||[]]}const m={...s.currentForm,steps:u,currentStepId:d};return e()._addHistory(m),{currentForm:m}})},setCurrentStepId:n=>{r(s=>s.currentForm?{currentForm:{...s.currentForm,currentStepId:n}}:{})},_addHistory:n=>{r(s=>{const o=s.history.slice(0,s.historyIndex+1);return o.push(JSON.parse(JSON.stringify(n))),{history:o,historyIndex:o.length-1}})},undo:()=>{r(n=>{if(n.historyIndex>0){const s=n.historyIndex-1;return{currentForm:JSON.parse(JSON.stringify(n.history[s])),historyIndex:s,selectedFieldId:null}}return{}})},redo:()=>{r(n=>{if(n.historyIndex<n.history.length-1){const s=n.historyIndex+1;return{currentForm:JSON.parse(JSON.stringify(n.history[s])),historyIndex:s,selectedFieldId:null}}return{}})}})),ys={TEXT:{type:"TEXT",label:"Text Input",icon:x.jsx(DR,{size:18}),defaultProps:{label:"Text Field",placeholder:"Enter text",required:!1,helpText:"",minLength:0,maxLength:255,pattern:""}},TEXTAREA:{type:"TEXTAREA",label:"Textarea",icon:x.jsx(dR,{size:18}),defaultProps:{label:"Textarea Field",placeholder:"Enter longer text",required:!1,helpText:"",rows:3,minLength:0,maxLength:1e3}},DROPDOWN:{type:"DROPDOWN",label:"Dropdown",icon:x.jsx(iR,{size:18}),defaultProps:{label:"Dropdown Field",required:!1,helpText:"",options:[{value:"option1",label:"Option 1"},{value:"option2",label:"Option 2"}]}},CHECKBOX:{type:"CHECKBOX",label:"Checkbox",icon:x.jsx(zb,{size:18}),defaultProps:{label:"Checkbox Field",required:!1,helpText:"",options:[{value:"choice1",label:"Choice 1",checked:!1}]}},DATE:{type:"DATE",label:"Date Picker",icon:x.jsx(HA,{size:18}),defaultProps:{label:"Date Field",required:!1,helpText:""}},FILE:{type:"FILE",label:"File Upload",icon:x.jsx(jb,{size:18}),defaultProps:{label:"File Upload",required:!1,helpText:"",multiple:!1,accept:"*"}}},PO=({id:r,field:e,onSelect:n,onDelete:s,isSelected:o})=>{const{attributes:u,listeners:d,setNodeRef:m,transform:g,transition:y,isDragging:E}=PA({id:r}),_={transform:Zl.Transform.toString(g),transition:y,opacity:E?.5:1,zIndex:E?100:"auto",touchAction:"none"},S=ys[e.type];return x.jsxs("div",{ref:m,style:_,className:`p-4 mb-3 rounded-lg shadow-md cursor-default border-2 ${o?"border-blue-500 bg-blue-50 dark:bg-gray-700":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800"}`,onClick:()=>n(e.id),children:[x.jsxs("div",{className:"flex justify-between items-center mb-2",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("button",{...u,...d,className:"cursor-grab p-1 mr-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:x.jsx(nR,{size:20})}),x.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:e.label||(S==null?void 0:S.label)||"Field"}),e.required&&x.jsx("span",{className:"ml-2 text-red-500",children:"*"})]}),x.jsx("button",{onClick:D=>{D.stopPropagation(),s(e.id)},className:"p-1 text-red-500 hover:text-red-700",children:x.jsx(Uh,{size:18})})]}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.placeholder||e.helpText||"No placeholder or help text"}),e.type==="TEXT"&&x.jsx("input",{type:"text",placeholder:e.placeholder,className:"mt-2 p-2 border rounded-md w-full dark:bg-gray-700 dark:border-gray-600",readOnly:!0}),e.type==="TEXTAREA"&&x.jsx("textarea",{placeholder:e.placeholder,rows:e.rows||2,className:"mt-2 p-2 border rounded-md w-full dark:bg-gray-700 dark:border-gray-600",readOnly:!0})]})},LO=()=>{const r=Object.keys(ys);return x.jsxs("div",{className:"w-72 bg-gray-50 dark:bg-gray-800 p-4 border-r dark:border-gray-700 h-full overflow-y-auto",children:[x.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Form Elements"}),r.map(e=>x.jsxs("div",{draggable:!0,onDragStart:n=>{n.dataTransfer.setData("fieldType",e)},className:"w-full flex items-center space-x-2 p-3 mb-2 bg-white dark:bg-gray-700 rounded-md shadow-sm hover:bg-gray-100 dark:hover:bg-gray-600 text-left text-gray-700 dark:text-gray-300 cursor-grab",style:{userSelect:"none"},children:[ys[e].icon,x.jsx("span",{children:ys[e].label})]},e))]})},UO=()=>{const{currentForm:r,selectedFieldId:e,selectField:n,deleteField:s,reorderFields:o,addField:u}=Pr(),d=dw(hw(sg,{activationConstraint:{distance:8}}));if(!r)return x.jsx("div",{className:"flex-1 p-8 flex items-center justify-center text-gray-500 dark:text-gray-400",children:"Select or create a form to start building."});const m=r.steps.find(_=>_.id===r.currentStepId),g=m?(m.fieldIds||[]).map(_=>r.fields.find(S=>S.id===_)).filter(Boolean):[],y=_=>{const{active:S,over:D}=_;if(S.id!==D.id&&D){const F=g.findIndex(O=>O.id===S.id),K=g.findIndex(O=>O.id===D.id);F!==-1&&K!==-1&&o(F,K)}},E=_=>{const S=_.dataTransfer.getData("fieldType");S&&ys[S]&&u({type:ys[S].type,...ys[S].defaultProps})};return x.jsx(pA,{sensors:d,collisionDetection:yw,onDragEnd:y,children:x.jsxs("div",{className:"flex-1 p-4 md:p-8 overflow-y-auto",onDragOver:_=>_.preventDefault(),onDrop:E,children:[x.jsxs("div",{className:"mb-4",children:[x.jsx("input",{type:"text",value:r.title,onChange:_=>Pr.getState().updateFormDetails({title:_.target.value}),className:"text-2xl font-bold p-2 border-b-2 border-transparent focus:border-blue-500 outline-none bg-transparent w-full dark:text-white",placeholder:"Form Title"}),x.jsx("textarea",{value:r.description,onChange:_=>Pr.getState().updateFormDetails({description:_.target.value}),className:"text-sm text-gray-600 dark:text-gray-300 p-2 mt-1 border-b-2 border-transparent focus:border-blue-500 outline-none bg-transparent w-full",placeholder:"Form description (optional)",rows:"2"})]}),x.jsx(jO,{}),m&&g.length>0?x.jsx(CA,{items:g.map(_=>_.id),strategy:xA,children:g.map(_=>x.jsx(PO,{id:_.id,field:_,onSelect:n,onDelete:s,isSelected:e===_.id},_.id))}):x.jsxs("div",{className:"min-h-[200px] border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex flex-col items-center justify-center p-8 text-gray-500 dark:text-gray-400",children:[x.jsx("p",{children:"Drag elements from the left panel or click to add them here."}),x.jsxs("p",{className:"text-sm mt-1",children:["This is the canvas for '",(m==null?void 0:m.name)||"current step","'."]})]})]})})},jO=()=>{const{currentForm:r,setCurrentStepId:e,addStep:n,deleteStep:s,updateStep:o}=Pr(),[u,d]=q.useState(null),[m,g]=q.useState("");if(!r||!r.steps)return null;const y=_=>{d(_.id),g(_.name)},E=_=>{m.trim()&&o(_,{name:m.trim()}),d(null)};return x.jsxs("div",{className:"mb-6 flex items-center border-b border-gray-200 dark:border-gray-700 pb-2",children:[x.jsx("nav",{className:"flex space-x-1 flex-wrap",children:r.steps.map((_,S)=>x.jsxs("div",{className:"relative group",children:[u===_.id?x.jsx("input",{type:"text",value:m,onChange:D=>g(D.target.value),onBlur:()=>E(_.id),onKeyPress:D=>D.key==="Enter"&&E(_.id),className:"px-3 py-2 text-sm font-medium rounded-md bg-transparent border border-blue-500 text-blue-600 dark:text-blue-400",autoFocus:!0}):x.jsx("button",{onClick:()=>e(_.id),onDoubleClick:()=>y(_),className:`px-3 py-2 text-sm font-medium rounded-md ${r.currentStepId===_.id?"bg-blue-100 text-blue-700 dark:bg-blue-700 dark:text-white":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:_.name||`Step ${S+1}`}),r.steps.length>1&&x.jsx("button",{onClick:()=>s(_.id),className:"absolute -top-2 -right-2 p-0.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete step",children:x.jsx(Uh,{size:12})})]},_.id))}),x.jsx("button",{onClick:n,className:"ml-2 p-2 text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",title:"Add new step",children:x.jsx(gh,{size:20})})]})},zO=()=>{const{currentForm:r,selectedFieldId:e,updateField:n}=Pr(),[s,o]=q.useState({}),u=r==null?void 0:r.fields.find(_=>_.id===e);q.useEffect(()=>{o(u?{...u}:{})},[e,r]);const d=_=>{const{name:S,value:D,type:F,checked:K}=_.target;o(O=>({...O,[S]:F==="checkbox"?K:D}))},m=(_,S,D)=>{o(F=>{const K=[...F.options||[]];return K[_]={...K[_],[S]:D},{...F,options:K}})},g=()=>{o(_=>({..._,options:[..._.options||[],{value:`new_option_${(_.options||[]).length+1}`,label:"New Option"}]}))},y=_=>{o(S=>({...S,options:(S.options||[]).filter((D,F)=>F!==_)}))};if(q.useEffect(()=>{if(!e||Object.keys(s).length===0||JSON.stringify(s)===JSON.stringify(u))return;const _=setTimeout(()=>{n(e,s)},500);return()=>clearTimeout(_)},[s,e,n,u]),!u)return x.jsx("div",{className:"w-80 bg-gray-50 dark:bg-gray-800 p-4 border-l dark:border-gray-700 h-full text-gray-500 dark:text-gray-400",children:"Select a field to edit its properties."});const E=ys[u.type];return x.jsxs("div",{className:"w-80 bg-gray-50 dark:bg-gray-800 p-4 border-l dark:border-gray-700 h-full overflow-y-auto",children:[x.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:["Properties: ",E==null?void 0:E.label]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"label",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Label"}),x.jsx("input",{type:"text",name:"label",id:"label",value:s.label||"",onChange:d,className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"placeholder",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Placeholder"}),x.jsx("input",{type:"text",name:"placeholder",id:"placeholder",value:s.placeholder||"",onChange:d,className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"helpText",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Help Text"}),x.jsx("textarea",{name:"helpText",id:"helpText",value:s.helpText||"",onChange:d,rows:"2",className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2"})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{type:"checkbox",name:"required",id:"required",checked:s.required||!1,onChange:d,className:"h-4 w-4 text-blue-600 border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600"}),x.jsx("label",{htmlFor:"required",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:"Required"})]}),u.type==="TEXTAREA"&&x.jsxs("div",{children:[x.jsx("label",{htmlFor:"rows",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rows"}),x.jsx("input",{type:"number",name:"rows",id:"rows",value:s.rows||3,onChange:d,className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2"})]}),(u.type==="DROPDOWN"||u.type==="CHECKBOX")&&x.jsxs("div",{children:[x.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Options"}),(s.options||[]).map((_,S)=>x.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[x.jsx("input",{type:"text",placeholder:"Label",value:_.label,onChange:D=>m(S,"label",D.target.value),className:"flex-1 shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white p-1.5"}),x.jsx("input",{type:"text",placeholder:"Value",value:_.value,onChange:D=>m(S,"value",D.target.value),className:"flex-1 shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white p-1.5"}),u.type==="CHECKBOX"&&x.jsx("input",{type:"checkbox",title:"Default Checked",checked:_.checked||!1,onChange:D=>m(S,"checked",D.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),x.jsx("button",{onClick:()=>y(S),className:"text-red-500 hover:text-red-700 p-1",children:x.jsx(Uh,{size:16})})]},S)),x.jsxs("button",{onClick:g,className:"mt-1 text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 flex items-center",children:[x.jsx(gh,{size:16,className:"mr-1"})," Add Option"]})]})]})]})},BO=({form:r,device:e="desktop"})=>{var E;if(!r)return x.jsx("div",{className:"p-4 text-center text-gray-500",children:"No form to preview."});const[n,s]=q.useState({}),[o,u]=q.useState(0);q.useEffect(()=>{const _={};r.fields.forEach(S=>{S.type==="CHECKBOX"&&S.options?(_[S.id]={},S.options.forEach(D=>_[S.id][D.value]=D.checked||!1)):_[S.id]=""}),s(_),u(0)},[r]);const d=(_,S,D=null)=>{s(F=>{var O;const K={...F};return((O=r.fields.find(Z=>Z.id===_))==null?void 0:O.type)==="CHECKBOX"?(K[_]||(K[_]={}),K[_][D]=S):K[_]=S,K})},m=_=>{_.preventDefault(),Xe.getState().setToast("Preview submission: "+JSON.stringify(n),5e3)},g=r.steps&&r.steps[o]?(r.steps[o].fieldIds||[]).map(_=>r.fields.find(S=>S.id===_)).filter(Boolean):r.fields,y={desktop:"w-full max-w-2xl",tablet:"w-full max-w-md",mobile:"w-full max-w-sm"};return x.jsxs("div",{className:`mx-auto p-6 bg-white dark:bg-gray-800 shadow-xl rounded-lg ${y[e]}`,children:[x.jsx("h2",{className:"text-2xl font-bold mb-1 text-gray-900 dark:text-white",children:r.title}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:r.description}),r.steps&&r.steps.length>1&&x.jsxs("div",{className:"mb-4",children:[x.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:["Step ",o+1," of ",r.steps.length,": ",(E=r.steps[o])==null?void 0:E.name]}),x.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mt-1",children:x.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${(o+1)/r.steps.length*100}%`}})})]}),x.jsxs("form",{onSubmit:m,className:"space-y-6",children:[g.map(_=>x.jsxs("div",{className:"mb-4",children:[x.jsxs("label",{htmlFor:_.id,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[_.label," ",_.required&&x.jsx("span",{className:"text-red-500",children:"*"})]}),_.helpText&&x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:_.helpText}),_.type==="TEXT"&&x.jsx("input",{type:"text",id:_.id,name:_.id,placeholder:_.placeholder,required:_.required,value:n[_.id]||"",onChange:S=>d(_.id,S.target.value),className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),_.type==="TEXTAREA"&&x.jsx("textarea",{id:_.id,name:_.id,placeholder:_.placeholder,rows:_.rows||3,required:_.required,value:n[_.id]||"",onChange:S=>d(_.id,S.target.value),className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),_.type==="DROPDOWN"&&x.jsxs("select",{id:_.id,name:_.id,required:_.required,value:n[_.id]||"",onChange:S=>d(_.id,S.target.value),className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[x.jsx("option",{value:"",children:_.placeholder||"Select an option"}),(_.options||[]).map(S=>x.jsx("option",{value:S.value,children:S.label},S.value))]}),_.type==="CHECKBOX"&&(_.options||[]).map(S=>{var D;return x.jsxs("div",{className:"flex items-center mt-1",children:[x.jsx("input",{type:"checkbox",id:`${_.id}-${S.value}`,name:`${_.id}-${S.value}`,value:S.value,checked:((D=n[_.id])==null?void 0:D[S.value])||!1,onChange:F=>d(_.id,F.target.checked,S.value),className:"h-4 w-4 text-blue-600 border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600"}),x.jsx("label",{htmlFor:`${_.id}-${S.value}`,className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:S.label})]},S.value)}),_.type==="DATE"&&x.jsx("input",{type:"date",id:_.id,name:_.id,required:_.required,value:n[_.id]||"",onChange:S=>d(_.id,S.target.value),className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),_.type==="FILE"&&x.jsx("input",{type:"file",id:_.id,name:_.id,required:_.required,multiple:_.multiple,accept:_.accept,onChange:S=>d(_.id,S.target.files.length>0?S.target.files[0].name:""),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-gray-700 dark:file:text-blue-300 dark:hover:file:bg-gray-600"})]},_.id)),x.jsxs("div",{className:"flex justify-between items-center pt-4",children:[o>0&&x.jsx("button",{type:"button",onClick:()=>u(_=>_-1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600",children:"Previous"}),r.steps&&o<r.steps.length-1?x.jsx("button",{type:"button",onClick:()=>u(_=>_+1),className:"ml-auto px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Next"}):x.jsx("button",{type:"submit",className:"ml-auto px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700",children:"Submit Preview"})]})]})]})},FO=({formId:r,creatorId:e})=>{const{setToast:n,setLoading:s}=Xe(),[o,u]=q.useState(null),[d,m]=q.useState({}),[g,y]=q.useState(0),[E,_]=q.useState(!1);q.useEffect(()=>{if(!r||!e){n("Form ID or Creator ID is missing.",5e3);return}s(!0);const O=Au(ua,`artifacts/${ca}/users/${e}/forms`,r),Z=rp(O,re=>{if(re.exists()){const $=re.data();u({id:re.id,...$});const le={};$.fields.forEach(se=>{se.type==="CHECKBOX"&&se.options?(le[se.id]={},se.options.forEach(ce=>le[se.id][ce.value]=ce.checked||!1)):le[se.id]=""}),m(le),y(0)}else n("Form not found or you don't have access.",5e3),u(null);s(!1)},re=>{console.error("Error fetching form for filling: ",re),n("Error fetching form. "+re.message,5e3),s(!1)});return()=>Z()},[r,e,n,s]);const S=(O,Z,re=null)=>{m($=>{var se;const le={...$};return((se=o.fields.find(ce=>ce.id===O))==null?void 0:se.type)==="CHECKBOX"?(le[O]||(le[O]={}),le[O][re]=Z):le[O]=Z,le})},D=async O=>{if(O.preventDefault(),!o)return;_(!0),n("Submitting...",null);const Z=o.steps[g].fieldIds.map($=>o.fields.find(le=>le.id===$)).filter(Boolean);for(const $ of Z)if($.required){if($.type==="CHECKBOX"){if(!$.options.some(se=>{var ce;return(ce=d[$.id])==null?void 0:ce[se.value]})){n(`Field "${$.label}" is required. Please check at least one option.`,3e3),_(!1);return}}else if(!d[$.id]||String(d[$.id]).trim()===""){n(`Field "${$.label}" is required.`,3e3),_(!1);return}}if(g<o.steps.length-1){y($=>$+1),_(!1),n(null);return}const re={formId:o.id,submittedAt:po(),data:d};try{const $=`artifacts/${ca}/users/${e}/forms/${r}/responses`;await kO(Hg(ua,$),re),n("Form submitted successfully!",5e3);const le={};o.fields.forEach(se=>{se.type==="CHECKBOX"&&se.options?(le[se.id]={},se.options.forEach(ce=>le[se.id][ce.value]=ce.checked||!1)):le[se.id]=""}),m(le),y(0)}catch($){console.error("Error submitting form: ",$),n("Error submitting form. "+$.message,5e3)}finally{_(!1)}};if(!o)return x.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100 dark:bg-gray-900",children:x.jsx("div",{className:"p-6 bg-white dark:bg-gray-800 shadow-lg rounded-md text-gray-700 dark:text-gray-300",children:"Loading form... If it takes too long, the form may not exist or the link is incorrect."})});const F=o.steps[g],K=F?(F.fieldIds||[]).map(O=>o.fields.find(Z=>Z.id===O)).filter(Boolean):[];return x.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-8 px-4 flex flex-col items-center",children:[x.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 shadow-xl rounded-lg p-8",children:[x.jsx("h1",{className:"text-3xl font-bold mb-2 text-gray-900 dark:text-white",children:o.title}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:o.description}),o.steps&&o.steps.length>1&&x.jsxs("div",{className:"mb-6",children:[x.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:["Step ",g+1," of ",o.steps.length,": ",F==null?void 0:F.name]}),x.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mt-1",children:x.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${(g+1)/o.steps.length*100}%`}})})]}),x.jsxs("form",{onSubmit:D,className:"space-y-6",children:[K.map(O=>x.jsxs("div",{className:"mb-4",children:[x.jsxs("label",{htmlFor:O.id,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[O.label," ",O.required&&x.jsx("span",{className:"text-red-500",children:"*"})]}),O.helpText&&x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:O.helpText}),O.type==="TEXT"&&x.jsx("input",{type:"text",id:O.id,name:O.id,placeholder:O.placeholder,required:O.required,value:d[O.id]||"",onChange:Z=>S(O.id,Z.target.value),className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),O.type==="TEXTAREA"&&x.jsx("textarea",{id:O.id,name:O.id,placeholder:O.placeholder,rows:O.rows||3,required:O.required,value:d[O.id]||"",onChange:Z=>S(O.id,Z.target.value),className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),O.type==="DROPDOWN"&&x.jsxs("select",{id:O.id,name:O.id,required:O.required,value:d[O.id]||"",onChange:Z=>S(O.id,Z.target.value),className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[x.jsx("option",{value:"",children:O.placeholder||"Select an option"}),(O.options||[]).map(Z=>x.jsx("option",{value:Z.value,children:Z.label},Z.value))]}),O.type==="CHECKBOX"&&(O.options||[]).map(Z=>{var re;return x.jsxs("div",{className:"flex items-center mt-1",children:[x.jsx("input",{type:"checkbox",id:`${O.id}-${Z.value}`,name:`${O.id}-${Z.value}`,value:Z.value,checked:((re=d[O.id])==null?void 0:re[Z.value])||!1,onChange:$=>S(O.id,$.target.checked,Z.value),className:"h-4 w-4 text-blue-600 border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600"}),x.jsx("label",{htmlFor:`${O.id}-${Z.value}`,className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:Z.label})]},Z.value)}),O.type==="DATE"&&x.jsx("input",{type:"date",id:O.id,name:O.id,required:O.required,value:d[O.id]||"",onChange:Z=>S(O.id,Z.target.value),className:"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),O.type==="FILE"&&x.jsx("input",{type:"file",id:O.id,name:O.id,required:O.required,multiple:O.multiple,accept:O.accept,onChange:Z=>S(O.id,Z.target.files.length>0?Z.target.files[0].name:""),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-gray-700 dark:file:text-blue-300 dark:hover:file:bg-gray-600"})]},O.id)),x.jsxs("div",{className:"flex justify-between items-center pt-6 border-t dark:border-gray-700",children:[g>0&&x.jsx("button",{type:"button",onClick:()=>y(O=>O-1),disabled:E,className:"px-6 py-2.5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-500 disabled:opacity-50",children:"Previous"}),x.jsx("button",{type:"submit",disabled:E,className:"ml-auto px-6 py-2.5 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:E?"Submitting...":g<o.steps.length-1?"Next":"Submit Form"})]})]})]}),x.jsx("button",{onClick:()=>Xe.getState().setCurrentView("builder"),className:"mt-8 text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:" Back to Form Builder"})]})},qO=({formId:r})=>{const{setToast:e,setLoading:n,userId:s}=Xe(),[o,u]=q.useState([]),[d,m]=q.useState("");return q.useEffect(()=>{if(!r||!s){e("Form ID or User ID is missing for viewing responses.",3e3);return}n(!0);const g=Au(ua,`artifacts/${ca}/users/${s}/forms`,r);DO(g).then(S=>{S.exists()&&m(S.data().title)});const y=`artifacts/${ca}/users/${s}/forms/${r}/responses`,E=l1(Hg(ua,y)),_=rp(E,S=>{const D=[];S.forEach(F=>{D.push({id:F.id,...F.data()})}),D.sort((F,K)=>{var O,Z,re,$;return(((Z=(O=K.submittedAt)==null?void 0:O.toDate)==null?void 0:Z.call(O))||0)-((($=(re=F.submittedAt)==null?void 0:re.toDate)==null?void 0:$.call(re))||0)}),u(D),n(!1)},S=>{console.error("Error fetching responses: ",S),e("Error fetching responses. "+S.message,5e3),n(!1)});return()=>_()},[r,s,e,n]),Xe.getState().isLoading&&o.length===0?x.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Loading responses..."}):x.jsx("div",{className:"p-4 md:p-8 bg-gray-50 dark:bg-gray-900 min-h-screen",children:x.jsxs("div",{className:"max-w-4xl mx-auto",children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-white",children:["Responses for: ",x.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:d||r})]}),x.jsx("button",{onClick:()=>Xe.getState().setCurrentView("builder"),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md shadow-sm text-sm font-medium",children:" Back to Builder"})]}),o.length===0&&!Xe.getState().isLoading&&x.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:"No responses submitted for this form yet."}),x.jsx("div",{className:"space-y-6",children:o.map(g=>{var y;return x.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:[x.jsxs("div",{className:"flex justify-between items-start mb-3",children:[x.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200",children:["Response ID: ",g.id.substring(0,8),"..."]}),x.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Submitted: ",(y=g.submittedAt)!=null&&y.toDate?g.submittedAt.toDate().toLocaleString():"N/A"]})]}),x.jsx("div",{className:"space-y-3",children:Object.entries(g.data||{}).map(([E,_])=>{let S=_;return typeof _=="object"&&_!==null?S=Object.entries(_).filter(([D,F])=>F).map(([D])=>D).join(", "):typeof _=="boolean"&&(S=_?"Yes":"No"),x.jsxs("div",{className:"text-sm",children:[x.jsxs("strong",{className:"text-gray-600 dark:text-gray-300",children:[E,":"]})," ",x.jsx("span",{className:"text-gray-800 dark:text-gray-100",children:String(S)})]},E)})})]},g.id)})})]})})},HO=()=>{const{forms:r,createNewForm:e,loadFormForEditing:n,saveCurrentForm:s,createContactUsForm:o}=Pr(),{setCurrentView:u,userId:d,setShowShareModal:m}=Xe(),g=E=>{if(r.find(S=>S.id===E)&&d){const S=`${window.location.origin}${window.location.pathname}?view=filler&formId=${E}&creatorId=${d}`;m(!0,S)}else Xe.getState().setToast("Cannot generate share link.",3e3)},y=async E=>{if(!(!d||!E)&&window.confirm("Are you sure you want to delete this form and all its responses? This action cannot be undone.")){Xe.getState().setLoading(!0);try{const _=Au(ua,`artifacts/${ca}/users/${d}/forms`,E);await OO(_),Xe.getState().setToast("Form deleted (main document only). Responses need manual/server-side cleanup.",4e3)}catch(_){console.error("Error deleting form: ",_),Xe.getState().setToast("Error deleting form: "+_.message,5e3)}finally{Xe.getState().setLoading(!1)}}};return x.jsx("div",{className:"p-4 md:p-8 bg-gray-100 dark:bg-gray-900 min-h-screen",children:x.jsxs("div",{className:"max-w-4xl mx-auto",children:[x.jsxs("div",{className:"flex justify-between items-center mb-8",children:[x.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"My Forms"}),x.jsxs("div",{className:"flex space-x-2",children:[x.jsxs("button",{onClick:()=>{e(),u("builder-canvas")},className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm flex items-center",children:[x.jsx(gh,{size:20,className:"mr-2"})," Create New Form"]}),x.jsxs("button",{onClick:()=>{o(),u("builder-canvas")},className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm flex items-center",children:[x.jsx(gh,{size:20,className:"mr-2"})," Create Contact Us Form"]})]})]}),r.length===0&&!Xe.getState().isLoading&&x.jsxs("div",{className:"text-center py-10",children:[x.jsx(jb,{size:48,className:"mx-auto text-gray-400 dark:text-gray-500 mb-4"}),x.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-2",children:"No forms yet."}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:'Click "Create New Form" to get started.'})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(E=>{var _,S,D;return x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden flex flex-col",children:[x.jsxs("div",{className:"p-5 flex-grow",children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-2 truncate",title:E.title,children:E.title}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1 h-10 overflow-hidden",children:E.description||"No description."}),x.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Fields: ",((_=E.fields)==null?void 0:_.length)||0,", Steps: ",((S=E.steps)==null?void 0:S.length)||0]}),x.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Last updated: ",(D=E.updatedAt)!=null&&D.toDate?E.updatedAt.toDate().toLocaleDateString():"N/A"]})]}),x.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 border-t dark:border-gray-600 flex flex-wrap gap-2 justify-end",children:[x.jsxs("button",{onClick:()=>{n(E.id),u("builder-canvas")},className:"text-xs bg-blue-500 hover:bg-blue-600 text-white py-1.5 px-3 rounded-md shadow-sm flex items-center",children:[x.jsx(vR,{size:14,className:"mr-1"})," Edit"]}),x.jsxs("button",{onClick:()=>u("responses",E.id),className:"text-xs bg-green-500 hover:bg-green-600 text-white py-1.5 px-3 rounded-md shadow-sm flex items-center",children:[x.jsx(WA,{size:14,className:"mr-1"})," Responses"]}),x.jsxs("button",{onClick:()=>g(E.id),className:"text-xs bg-purple-500 hover:bg-purple-600 text-white py-1.5 px-3 rounded-md shadow-sm flex items-center",children:[x.jsx(bR,{size:14,className:"mr-1"})," Share"]}),x.jsxs("button",{onClick:()=>y(E.id),className:"text-xs bg-red-500 hover:bg-red-600 text-white py-1.5 px-3 rounded-md shadow-sm flex items-center",children:[x.jsx(Uh,{size:14,className:"mr-1"})," Delete"]})]})]},E.id)})})]})})},GO=()=>{const{showShareModal:r,shareableLink:e,setShowShareModal:n}=Xe(),[s,o]=q.useState(!1);if(!r)return null;const u=()=>{const d=document.createElement("textarea");d.value=e,document.body.appendChild(d),d.focus(),d.select();try{document.execCommand("copy"),o(!0),setTimeout(()=>o(!1),2e3)}catch(m){console.error("Failed to copy: ",m),Xe.getState().setToast("Failed to copy link.",3e3)}document.body.removeChild(d)};return x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl max-w-md w-full",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Share Form"}),x.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:""})]}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:"Share this link with others to fill out your form:"}),x.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[x.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"flex-grow p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700 text-blue-600 dark:text-blue-400 underline break-all",children:e}),x.jsxs("button",{onClick:u,className:`px-4 py-2 rounded-md text-sm font-medium text-white ${s?"bg-green-500":"bg-blue-500 hover:bg-blue-600"}`,children:[s?x.jsx(zb,{size:16}):x.jsx(XA,{size:16})," ",s?"Copied!":"Copy"]})]}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Anyone with this link will be able to access and submit this form. Ensure your Firebase security rules allow read access to the form structure for unauthenticated users if needed, or that users are authenticated."})]})})},KO=()=>{const{theme:r,setTheme:e,currentView:n,currentFormIdForFiller:s,currentFormIdForResponses:o,isLoading:u,toastMessage:d,isAuthReady:m,userId:g,setAuthReady:y,setUserId:E,previewDevice:_,setPreviewDevice:S}=Xe(),{currentForm:D,saveCurrentForm:F,undo:K,redo:O,initializeForms:Z}=Pr(),[re,$]=q.useState(!1);q.useEffect(()=>{const ce=oI(Wc,async N=>{if(N)E(N.uid),y(!0),console.log("User is signed in with UID:",N.uid),Z(N.uid);else if(typeof __initial_auth_token<"u"&&__initial_auth_token)try{await iI(Wc,__initial_auth_token)}catch(A){console.error("Error signing in with custom token, trying anonymous:",A),await s_(Wc)}else console.log("No initial auth token, signing in anonymously."),await s_(Wc)});return()=>ce()},[y,E,Z]),q.useEffect(()=>{e(r)},[]),q.useEffect(()=>{r==="dark"?(document.documentElement.classList.add("dark"),document.body.classList.add("dark")):(document.documentElement.classList.remove("dark"),document.body.classList.remove("dark"))},[r]),q.useEffect(()=>{const ce=new URLSearchParams(window.location.search),N=ce.get("view"),A=ce.get("formId"),R=ce.get("creatorId");N==="filler"&&A&&R&&Xe.getState().setCurrentView("filler",{formId:A,creatorId:R})},[]);const le=q.useRef(null);if(q.useEffect(()=>(D&&n==="builder-canvas"&&(le.current&&clearTimeout(le.current),le.current=setTimeout(()=>{F()},15e3)),()=>{le.current&&clearTimeout(le.current)}),[D,F,n]),!m)return x.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100 dark:bg-gray-900 text-gray-700 dark:text-gray-300",children:"Initializing Authentication..."});const se=()=>n==="filler"&&s?x.jsx(FO,{formId:s.formId,creatorId:s.creatorId}):n==="responses"&&o?x.jsx(qO,{formId:o}):n==="builder-canvas"&&D?x.jsxs("div",{className:"flex h-screen overflow-hidden bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[x.jsx(LO,{}),x.jsx(UO,{}),x.jsx(zO,{})]}):x.jsx(HO,{});return x.jsxs("div",{className:`${r}`,children:[x.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-100 dark:bg-gray-900",children:[n!=="filler"&&x.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-md sticky top-0 z-40",children:x.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(cR,{size:28,className:"text-blue-600 dark:text-blue-400 mr-2"}),x.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Form Builder Deluxe"}),g&&x.jsxs("span",{className:"ml-4 text-xs text-gray-500 dark:text-gray-400",children:["UID: ",g.substring(0,10),"..."]})]}),x.jsxs("div",{className:"flex items-center space-x-3",children:[n==="builder-canvas"&&D&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:K,title:"Undo",className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 disabled:opacity-50",disabled:Pr.getState().historyIndex<=0,children:x.jsx(OR,{size:20})}),x.jsx("button",{onClick:O,title:"Redo",className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 disabled:opacity-50",disabled:Pr.getState().historyIndex>=Pr.getState().history.length-1,children:x.jsx(mR,{size:20})}),x.jsx("button",{onClick:F,title:"Save Form",className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700",children:x.jsx(pR,{size:20})}),x.jsx("button",{onClick:()=>$(!0),title:"Preview Form",className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700",children:x.jsx(ZA,{size:20})}),x.jsx("button",{onClick:()=>Xe.getState().setCurrentView("builder"),title:"Back to Dashboard",className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700",children:x.jsx(YA,{size:20})})]}),x.jsx("button",{onClick:()=>e(r==="light"?"dark":"light"),className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700",children:r==="light"?x.jsx(lR,{size:20}):x.jsx(AR,{size:20})})]})]})}),x.jsx("main",{className:"flex-grow",children:se()}),u&&x.jsx("div",{className:"fixed bottom-4 right-4 bg-blue-500 text-white text-sm py-2 px-4 rounded-md shadow-lg z-50",children:"Loading..."}),d&&x.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 bg-gray-800 dark:bg-gray-200 text-white dark:text-black text-sm py-2 px-4 rounded-md shadow-lg z-50",children:d})]}),re&&D&&x.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex flex-col items-center justify-center p-4 z-50 overflow-y-auto",children:[x.jsxs("div",{className:"bg-gray-200 dark:bg-gray-800 p-4 rounded-t-lg w-full max-w-3xl flex justify-between items-center",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Form Preview"}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:()=>S("mobile"),className:`p-1.5 rounded ${_==="mobile"?"bg-blue-500 text-white":"hover:bg-gray-300 dark:hover:bg-gray-700"}`,children:x.jsx(TR,{size:18})}),x.jsx("button",{onClick:()=>S("tablet"),className:`p-1.5 rounded ${_==="tablet"?"bg-blue-500 text-white":"hover:bg-gray-300 dark:hover:bg-gray-700"}`,children:x.jsx(xR,{size:18})}),x.jsx("button",{onClick:()=>S("desktop"),className:`p-1.5 rounded ${_==="desktop"?"bg-blue-500 text-white":"hover:bg-gray-300 dark:hover:bg-gray-700"}`,children:x.jsx(aR,{size:18})})]}),x.jsx("button",{onClick:()=>$(!1),className:"text-gray-600 dark:text-gray-300 hover:text-black dark:hover:text-white text-2xl",children:""})]}),x.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 md:p-8 w-full max-w-3xl overflow-y-auto rounded-b-lg",children:x.jsx(BO,{form:D,device:_})})]}),x.jsx(GO,{})]})};YS.createRoot(document.getElementById("root")).render(x.jsx(q.StrictMode,{children:x.jsx(KO,{})}));
